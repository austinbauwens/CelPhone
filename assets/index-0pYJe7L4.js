function i1(o,n){for(var s=0;s<n.length;s++){const l=n[s];if(typeof l!="string"&&!Array.isArray(l)){for(const d in l)if(d!=="default"&&!(d in o)){const c=Object.getOwnPropertyDescriptor(l,d);c&&Object.defineProperty(o,d,c.get?c:{enumerable:!0,get:()=>l[d]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const c of d)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function s(d){const c={};return d.integrity&&(c.integrity=d.integrity),d.referrerPolicy&&(c.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?c.credentials="include":d.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(d){if(d.ep)return;d.ep=!0;const c=s(d);fetch(d.href,c)}})();var k0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qd(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Cg(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var n=o.default;if(typeof n=="function"){var s=function l(){var d=!1;try{d=this instanceof l}catch{}return d?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(o).forEach(function(l){var d=Object.getOwnPropertyDescriptor(o,l);Object.defineProperty(s,l,d.get?d:{enumerable:!0,get:function(){return o[l]}})}),s}var Gh={exports:{}},Cu={},qh={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function s1(){if(E0)return Ze;E0=1;var o=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),T=Symbol.iterator;function E(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,b={};function N(M,X,ee){this.props=M,this.context=X,this.refs=b,this.updater=ee||S}N.prototype.isReactComponent={},N.prototype.setState=function(M,X){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,X,"setState")},N.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function L(){}L.prototype=N.prototype;function x(M,X,ee){this.props=M,this.context=X,this.refs=b,this.updater=ee||S}var _=x.prototype=new L;_.constructor=x,C(_,N.prototype),_.isPureReactComponent=!0;var R=Array.isArray,I=Object.prototype.hasOwnProperty,U={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function j(M,X,ee){var ce,me={},ae=null,Q=null;if(X!=null)for(ce in X.ref!==void 0&&(Q=X.ref),X.key!==void 0&&(ae=""+X.key),X)I.call(X,ce)&&!W.hasOwnProperty(ce)&&(me[ce]=X[ce]);var ie=arguments.length-2;if(ie===1)me.children=ee;else if(1<ie){for(var ve=Array(ie),Se=0;Se<ie;Se++)ve[Se]=arguments[Se+2];me.children=ve}if(M&&M.defaultProps)for(ce in ie=M.defaultProps,ie)me[ce]===void 0&&(me[ce]=ie[ce]);return{$$typeof:o,type:M,key:ae,ref:Q,props:me,_owner:U.current}}function F(M,X){return{$$typeof:o,type:M.type,key:X,ref:M.ref,props:M.props,_owner:M._owner}}function G(M){return typeof M=="object"&&M!==null&&M.$$typeof===o}function B(M){var X={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ee){return X[ee]})}var K=/\/+/g;function $(M,X){return typeof M=="object"&&M!==null&&M.key!=null?B(""+M.key):X.toString(36)}function J(M,X,ee,ce,me){var ae=typeof M;(ae==="undefined"||ae==="boolean")&&(M=null);var Q=!1;if(M===null)Q=!0;else switch(ae){case"string":case"number":Q=!0;break;case"object":switch(M.$$typeof){case o:case n:Q=!0}}if(Q)return Q=M,me=me(Q),M=ce===""?"."+$(Q,0):ce,R(me)?(ee="",M!=null&&(ee=M.replace(K,"$&/")+"/"),J(me,X,ee,"",function(Se){return Se})):me!=null&&(G(me)&&(me=F(me,ee+(!me.key||Q&&Q.key===me.key?"":(""+me.key).replace(K,"$&/")+"/")+M)),X.push(me)),1;if(Q=0,ce=ce===""?".":ce+":",R(M))for(var ie=0;ie<M.length;ie++){ae=M[ie];var ve=ce+$(ae,ie);Q+=J(ae,X,ee,ve,me)}else if(ve=E(M),typeof ve=="function")for(M=ve.call(M),ie=0;!(ae=M.next()).done;)ae=ae.value,ve=ce+$(ae,ie++),Q+=J(ae,X,ee,ve,me);else if(ae==="object")throw X=String(M),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Q}function Y(M,X,ee){if(M==null)return M;var ce=[],me=0;return J(M,ce,"","",function(ae){return X.call(ee,ae,me++)}),ce}function oe(M){if(M._status===-1){var X=M._result;X=X(),X.then(function(ee){(M._status===0||M._status===-1)&&(M._status=1,M._result=ee)},function(ee){(M._status===0||M._status===-1)&&(M._status=2,M._result=ee)}),M._status===-1&&(M._status=0,M._result=X)}if(M._status===1)return M._result.default;throw M._result}var A={current:null},D={transition:null},V={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:U};function q(){throw Error("act(...) is not supported in production builds of React.")}return Ze.Children={map:Y,forEach:function(M,X,ee){Y(M,function(){X.apply(this,arguments)},ee)},count:function(M){var X=0;return Y(M,function(){X++}),X},toArray:function(M){return Y(M,function(X){return X})||[]},only:function(M){if(!G(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ze.Component=N,Ze.Fragment=s,Ze.Profiler=d,Ze.PureComponent=x,Ze.StrictMode=l,Ze.Suspense=g,Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Ze.act=q,Ze.cloneElement=function(M,X,ee){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ce=C({},M.props),me=M.key,ae=M.ref,Q=M._owner;if(X!=null){if(X.ref!==void 0&&(ae=X.ref,Q=U.current),X.key!==void 0&&(me=""+X.key),M.type&&M.type.defaultProps)var ie=M.type.defaultProps;for(ve in X)I.call(X,ve)&&!W.hasOwnProperty(ve)&&(ce[ve]=X[ve]===void 0&&ie!==void 0?ie[ve]:X[ve])}var ve=arguments.length-2;if(ve===1)ce.children=ee;else if(1<ve){ie=Array(ve);for(var Se=0;Se<ve;Se++)ie[Se]=arguments[Se+2];ce.children=ie}return{$$typeof:o,type:M.type,key:me,ref:ae,props:ce,_owner:Q}},Ze.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:c,_context:M},M.Consumer=M},Ze.createElement=j,Ze.createFactory=function(M){var X=j.bind(null,M);return X.type=M,X},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(M){return{$$typeof:p,render:M}},Ze.isValidElement=G,Ze.lazy=function(M){return{$$typeof:k,_payload:{_status:-1,_result:M},_init:oe}},Ze.memo=function(M,X){return{$$typeof:v,type:M,compare:X===void 0?null:X}},Ze.startTransition=function(M){var X=D.transition;D.transition={};try{M()}finally{D.transition=X}},Ze.unstable_act=q,Ze.useCallback=function(M,X){return A.current.useCallback(M,X)},Ze.useContext=function(M){return A.current.useContext(M)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(M){return A.current.useDeferredValue(M)},Ze.useEffect=function(M,X){return A.current.useEffect(M,X)},Ze.useId=function(){return A.current.useId()},Ze.useImperativeHandle=function(M,X,ee){return A.current.useImperativeHandle(M,X,ee)},Ze.useInsertionEffect=function(M,X){return A.current.useInsertionEffect(M,X)},Ze.useLayoutEffect=function(M,X){return A.current.useLayoutEffect(M,X)},Ze.useMemo=function(M,X){return A.current.useMemo(M,X)},Ze.useReducer=function(M,X,ee){return A.current.useReducer(M,X,ee)},Ze.useRef=function(M){return A.current.useRef(M)},Ze.useState=function(M){return A.current.useState(M)},Ze.useSyncExternalStore=function(M,X,ee){return A.current.useSyncExternalStore(M,X,ee)},Ze.useTransition=function(){return A.current.useTransition()},Ze.version="18.3.1",Ze}var C0;function Xd(){return C0||(C0=1,qh.exports=s1()),qh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function o1(){if(x0)return Cu;x0=1;var o=Xd(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,d=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(p,g,v){var k,T={},E=null,S=null;v!==void 0&&(E=""+v),g.key!==void 0&&(E=""+g.key),g.ref!==void 0&&(S=g.ref);for(k in g)l.call(g,k)&&!c.hasOwnProperty(k)&&(T[k]=g[k]);if(p&&p.defaultProps)for(k in g=p.defaultProps,g)T[k]===void 0&&(T[k]=g[k]);return{$$typeof:n,type:p,key:E,ref:S,props:T,_owner:d.current}}return Cu.Fragment=s,Cu.jsx=u,Cu.jsxs=u,Cu}var P0;function a1(){return P0||(P0=1,Gh.exports=o1()),Gh.exports}var re=a1(),ye=Xd();const ur=Qd(ye);var Id={},Vh={exports:{}},wr={},Hh={exports:{}},Wh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0;function l1(){return b0||(b0=1,(function(o){function n(D,V){var q=D.length;D.push(V);e:for(;0<q;){var M=q-1>>>1,X=D[M];if(0<d(X,V))D[M]=V,D[q]=X,q=M;else break e}}function s(D){return D.length===0?null:D[0]}function l(D){if(D.length===0)return null;var V=D[0],q=D.pop();if(q!==V){D[0]=q;e:for(var M=0,X=D.length,ee=X>>>1;M<ee;){var ce=2*(M+1)-1,me=D[ce],ae=ce+1,Q=D[ae];if(0>d(me,q))ae<X&&0>d(Q,me)?(D[M]=Q,D[ae]=q,M=ae):(D[M]=me,D[ce]=q,M=ce);else if(ae<X&&0>d(Q,q))D[M]=Q,D[ae]=q,M=ae;else break e}}return V}function d(D,V){var q=D.sortIndex-V.sortIndex;return q!==0?q:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;o.unstable_now=function(){return c.now()}}else{var u=Date,p=u.now();o.unstable_now=function(){return u.now()-p}}var g=[],v=[],k=1,T=null,E=3,S=!1,C=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(D){for(var V=s(v);V!==null;){if(V.callback===null)l(v);else if(V.startTime<=D)l(v),V.sortIndex=V.expirationTime,n(g,V);else break;V=s(v)}}function R(D){if(b=!1,_(D),!C)if(s(g)!==null)C=!0,oe(I);else{var V=s(v);V!==null&&A(R,V.startTime-D)}}function I(D,V){C=!1,b&&(b=!1,L(j),j=-1),S=!0;var q=E;try{for(_(V),T=s(g);T!==null&&(!(T.expirationTime>V)||D&&!B());){var M=T.callback;if(typeof M=="function"){T.callback=null,E=T.priorityLevel;var X=M(T.expirationTime<=V);V=o.unstable_now(),typeof X=="function"?T.callback=X:T===s(g)&&l(g),_(V)}else l(g);T=s(g)}if(T!==null)var ee=!0;else{var ce=s(v);ce!==null&&A(R,ce.startTime-V),ee=!1}return ee}finally{T=null,E=q,S=!1}}var U=!1,W=null,j=-1,F=5,G=-1;function B(){return!(o.unstable_now()-G<F)}function K(){if(W!==null){var D=o.unstable_now();G=D;var V=!0;try{V=W(!0,D)}finally{V?$():(U=!1,W=null)}}else U=!1}var $;if(typeof x=="function")$=function(){x(K)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Y=J.port2;J.port1.onmessage=K,$=function(){Y.postMessage(null)}}else $=function(){N(K,0)};function oe(D){W=D,U||(U=!0,$())}function A(D,V){j=N(function(){D(o.unstable_now())},V)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(D){D.callback=null},o.unstable_continueExecution=function(){C||S||(C=!0,oe(I))},o.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<D?Math.floor(1e3/D):5},o.unstable_getCurrentPriorityLevel=function(){return E},o.unstable_getFirstCallbackNode=function(){return s(g)},o.unstable_next=function(D){switch(E){case 1:case 2:case 3:var V=3;break;default:V=E}var q=E;E=V;try{return D()}finally{E=q}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var q=E;E=D;try{return V()}finally{E=q}},o.unstable_scheduleCallback=function(D,V,q){var M=o.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?M+q:M):q=M,D){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=q+X,D={id:k++,callback:V,priorityLevel:D,startTime:q,expirationTime:X,sortIndex:-1},q>M?(D.sortIndex=q,n(v,D),s(g)===null&&D===s(v)&&(b?(L(j),j=-1):b=!0,A(R,q-M))):(D.sortIndex=X,n(g,D),C||S||(C=!0,oe(I))),D},o.unstable_shouldYield=B,o.unstable_wrapCallback=function(D){var V=E;return function(){var q=E;E=V;try{return D.apply(this,arguments)}finally{E=q}}}})(Wh)),Wh}var T0;function Nf(){return T0||(T0=1,Hh.exports=l1()),Hh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function u1(){if(R0)return wr;R0=1;var o=Xd(),n=Nf();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,d={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(d[e]=t,e=0;e<t.length;e++)l.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},T={};function E(e){return g.call(T,e)?!0:g.call(k,e)?!1:v.test(e)?T[e]=!0:(k[e]=!0,!1)}function S(e,t,a,f){if(a!==null&&a.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return f?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,t,a,f){if(t===null||typeof t>"u"||S(e,t,a,f))return!0;if(f)return!1;if(a!==null)switch(a.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function b(e,t,a,f,y,P,z){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=P,this.removeEmptyString=z}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new b(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];N[t]=new b(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new b(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new b(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new b(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new b(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new b(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new b(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new b(e,5,!1,e.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(L,x);N[t]=new b(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(L,x);N[t]=new b(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(L,x);N[t]=new b(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new b(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new b(e,1,!1,e.toLowerCase(),null,!0,!0)});function _(e,t,a,f){var y=N.hasOwnProperty(t)?N[t]:null;(y!==null?y.type!==0:f||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C(t,a,y,f)&&(a=null),f||y===null?E(t)&&(a===null?e.removeAttribute(t):e.setAttribute(t,""+a)):y.mustUseProperty?e[y.propertyName]=a===null?y.type===3?!1:"":a:(t=y.attributeName,f=y.attributeNamespace,a===null?e.removeAttribute(t):(y=y.type,a=y===3||y===4&&a===!0?"":""+a,f?e.setAttributeNS(f,t,a):e.setAttribute(t,a))))}var R=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),U=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),B=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),D=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=D&&e[D]||e["@@iterator"],typeof e=="function"?e:null)}var q=Object.assign,M;function X(e){if(M===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return`
`+M+e}var ee=!1;function ce(e,t){if(!e||ee)return"";ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(fe){var f=fe}Reflect.construct(e,[],t)}else{try{t.call()}catch(fe){f=fe}e.call(t.prototype)}else{try{throw Error()}catch(fe){f=fe}e()}}catch(fe){if(fe&&f&&typeof fe.stack=="string"){for(var y=fe.stack.split(`
`),P=f.stack.split(`
`),z=y.length-1,Z=P.length-1;1<=z&&0<=Z&&y[z]!==P[Z];)Z--;for(;1<=z&&0<=Z;z--,Z--)if(y[z]!==P[Z]){if(z!==1||Z!==1)do if(z--,Z--,0>Z||y[z]!==P[Z]){var te=`
`+y[z].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=z&&0<=Z);break}}}finally{ee=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?X(e):""}function me(e){switch(e.tag){case 5:return X(e.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return e=ce(e.type,!1),e;case 11:return e=ce(e.type.render,!1),e;case 1:return e=ce(e.type,!0),e;default:return""}}function ae(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case U:return"Portal";case F:return"Profiler";case j:return"StrictMode";case $:return"Suspense";case J:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B:return(e.displayName||"Context")+".Consumer";case G:return(e._context.displayName||"Context")+".Provider";case K:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case oe:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}function Q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ie(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ve(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Se(e){var t=ve(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),f=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var y=a.get,P=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return y.call(this)},set:function(z){f=""+z,P.call(this,z)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return f},setValue:function(z){f=""+z},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xe(e){e._valueTracker||(e._valueTracker=Se(e))}function ze(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),f="";return e&&(f=ve(e)?e.checked?"true":"false":e.value),e=f,e!==a?(t.setValue(e),!0):!1}function De(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function it(e,t){var a=t.checked;return q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function Ve(e,t){var a=t.defaultValue==null?"":t.defaultValue,f=t.checked!=null?t.checked:t.defaultChecked;a=ie(t.value!=null?t.value:a),e._wrapperState={initialChecked:f,initialValue:a,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Dt(e,t){t=t.checked,t!=null&&_(e,"checked",t,!1)}function ot(e,t){Dt(e,t);var a=ie(t.value),f=t.type;if(a!=null)f==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(f==="submit"||f==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ir(e,t.type,a):t.hasOwnProperty("defaultValue")&&Ir(e,t.type,ie(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Et(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var f=t.type;if(!(f!=="submit"&&f!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function Ir(e,t,a){(t!=="number"||De(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Ot=Array.isArray;function cr(e,t,a,f){if(e=e.options,t){t={};for(var y=0;y<a.length;y++)t["$"+a[y]]=!0;for(a=0;a<e.length;a++)y=t.hasOwnProperty("$"+e[a].value),e[a].selected!==y&&(e[a].selected=y),y&&f&&(e[a].defaultSelected=!0)}else{for(a=""+ie(a),t=null,y=0;y<e.length;y++){if(e[y].value===a){e[y].selected=!0,f&&(e[y].defaultSelected=!0);return}t!==null||e[y].disabled||(t=e[y])}t!==null&&(t.selected=!0)}}function dt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Un(e,t){var a=t.value;if(a==null){if(a=t.children,t=t.defaultValue,a!=null){if(t!=null)throw Error(s(92));if(Ot(a)){if(1<a.length)throw Error(s(93));a=a[0]}t=a}t==null&&(t=""),a=t}e._wrapperState={initialValue:ie(a)}}function ln(e,t){var a=ie(t.value),f=ie(t.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),t.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),f!=null&&(e.defaultValue=""+f)}function Lr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function un(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dr(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?un(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var yn,Kn=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,a,f,y){MSApp.execUnsafeLocalFunction(function(){return e(t,a,f,y)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(yn=yn||document.createElement("div"),yn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mt(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mi=["Webkit","ms","Moz","O"];Object.keys(Ut).forEach(function(e){Mi.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ut[t]=Ut[e]})});function vo(e,t,a){return t==null||typeof t=="boolean"||t===""?"":a||typeof t!="number"||t===0||Ut.hasOwnProperty(e)&&Ut[e]?(""+t).trim():t+"px"}function Ui(e,t){e=e.style;for(var a in t)if(t.hasOwnProperty(a)){var f=a.indexOf("--")===0,y=vo(a,t[a],f);a==="float"&&(a="cssFloat"),f?e.setProperty(a,y):e[a]=y}}var Cl=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yo(e,t){if(t){if(Cl[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function aa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xl=null;function Pl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bl=null,_s=null,ws=null;function kc(e){if(e=Do(e)){if(typeof bl!="function")throw Error(s(280));var t=e.stateNode;t&&(t=rn(t),bl(e.stateNode,e.type,t))}}function Tl(e){_s?ws?ws.push(e):ws=[e]:_s=e}function Rl(){if(_s){var e=_s,t=ws;if(ws=_s=null,kc(e),t)for(e=0;e<t.length;e++)kc(t[e])}}function Ec(e,t){return e(t)}function la(){}var ua=!1;function Ol(e,t,a){if(ua)return e(t,a);ua=!0;try{return Ec(e,t,a)}finally{ua=!1,(_s!==null||ws!==null)&&(la(),Rl())}}function _o(e,t){var a=e.stateNode;if(a===null)return null;var f=rn(a);if(f===null)return null;a=f[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,t,typeof a));return a}var Nl=!1;if(p)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){Nl=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{Nl=!1}function Cc(e,t,a,f,y,P,z,Z,te){var fe=Array.prototype.slice.call(arguments,3);try{t.apply(a,fe)}catch(we){this.onError(we)}}var zi=!1,ca=null,da=!1,Ss=null,ih={onError:function(e){zi=!0,ca=e}};function sh(e,t,a,f,y,P,z,Z,te){zi=!1,ca=null,Cc.apply(ih,arguments)}function oh(e,t,a,f,y,P,z,Z,te){if(sh.apply(this,arguments),zi){if(zi){var fe=ca;zi=!1,ca=null}else throw Error(s(198));da||(da=!0,Ss=fe)}}function Bi(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function xc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pc(e){if(Bi(e)!==e)throw Error(s(188))}function ah(e){var t=e.alternate;if(!t){if(t=Bi(e),t===null)throw Error(s(188));return t!==e?null:e}for(var a=e,f=t;;){var y=a.return;if(y===null)break;var P=y.alternate;if(P===null){if(f=y.return,f!==null){a=f;continue}break}if(y.child===P.child){for(P=y.child;P;){if(P===a)return Pc(y),e;if(P===f)return Pc(y),t;P=P.sibling}throw Error(s(188))}if(a.return!==f.return)a=y,f=P;else{for(var z=!1,Z=y.child;Z;){if(Z===a){z=!0,a=y,f=P;break}if(Z===f){z=!0,f=y,a=P;break}Z=Z.sibling}if(!z){for(Z=P.child;Z;){if(Z===a){z=!0,a=P,f=y;break}if(Z===f){z=!0,f=P,a=y;break}Z=Z.sibling}if(!z)throw Error(s(189))}}if(a.alternate!==f)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:t}function bc(e){return e=ah(e),e!==null?Tc(e):null}function Tc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tc(e);if(t!==null)return t;e=e.sibling}return null}var Rc=n.unstable_scheduleCallback,Oc=n.unstable_cancelCallback,lh=n.unstable_shouldYield,uh=n.unstable_requestPaint,It=n.unstable_now,Al=n.unstable_getCurrentPriorityLevel,Gi=n.unstable_ImmediatePriority,ha=n.unstable_UserBlockingPriority,ks=n.unstable_NormalPriority,ch=n.unstable_LowPriority,fa=n.unstable_IdlePriority,Yr=null,cn=null;function _t(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Yr,e,void 0,(e.current.flags&128)===128)}catch{}}var Xe=Math.clz32?Math.clz32:zn,gi=Math.log,_n=Math.LN2;function zn(e){return e>>>=0,e===0?32:31-(gi(e)/_n|0)|0}var jr=64,Qr=4194304;function en(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qi(e,t){var a=e.pendingLanes;if(a===0)return 0;var f=0,y=e.suspendedLanes,P=e.pingedLanes,z=a&268435455;if(z!==0){var Z=z&~y;Z!==0?f=en(Z):(P&=z,P!==0&&(f=en(P)))}else z=a&~y,z!==0?f=en(z):P!==0&&(f=en(P));if(f===0)return 0;if(t!==0&&t!==f&&(t&y)===0&&(y=f&-f,P=t&-t,y>=P||y===16&&(P&4194240)!==0))return t;if((f&4)!==0&&(f|=a&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=f;0<t;)a=31-Xe(t),y=1<<a,f|=e[a],t&=~y;return f}function Nc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ac(e,t){for(var a=e.suspendedLanes,f=e.pingedLanes,y=e.expirationTimes,P=e.pendingLanes;0<P;){var z=31-Xe(P),Z=1<<z,te=y[z];te===-1?((Z&a)===0||(Z&f)!==0)&&(y[z]=Nc(Z,t)):te<=t&&(e.expiredLanes|=Z),P&=~Z}}function Es(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Il(){var e=jr;return jr<<=1,(jr&4194240)===0&&(jr=64),e}function Yn(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function So(e,t,a){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xe(t),e[t]=a}function dh(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var f=e.eventTimes;for(e=e.expirationTimes;0<a;){var y=31-Xe(a),P=1<<y;t[y]=0,f[y]=-1,e[y]=-1,a&=~P}}function Ll(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var f=31-Xe(a),y=1<<f;y&t|e[f]&t&&(e[f]|=t),a&=~y}}var st=0;function ko(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Cs,xs,Ic,Lc,pa,ga=!1,Ps=[],hr=null,mi=null,Fr=null,Je=new Map,bs=new Map,Dr=[],jc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fc(e,t){switch(e){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Je.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(t.pointerId)}}function Eo(e,t,a,f,y,P){return e===null||e.nativeEvent!==P?(e={blockedOn:t,domEventName:a,eventSystemFlags:f,nativeEvent:P,targetContainers:[y]},t!==null&&(t=Do(t),t!==null&&xs(t)),e):(e.eventSystemFlags|=f,t=e.targetContainers,y!==null&&t.indexOf(y)===-1&&t.push(y),e)}function tn(e,t,a,f,y){switch(t){case"focusin":return hr=Eo(hr,e,t,a,f,y),!0;case"dragenter":return mi=Eo(mi,e,t,a,f,y),!0;case"mouseover":return Fr=Eo(Fr,e,t,a,f,y),!0;case"pointerover":var P=y.pointerId;return Je.set(P,Eo(Je.get(P)||null,e,t,a,f,y)),!0;case"gotpointercapture":return P=y.pointerId,bs.set(P,Eo(bs.get(P)||null,e,t,a,f,y)),!0}return!1}function ma(e){var t=Pi(e.target);if(t!==null){var a=Bi(t);if(a!==null){if(t=a.tag,t===13){if(t=xc(a),t!==null){e.blockedOn=t,pa(e.priority,function(){Ic(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function va(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=wa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var f=new a.constructor(a.type,a);xl=f,a.target.dispatchEvent(f),xl=null}else return t=Do(a),t!==null&&xs(t),e.blockedOn=a,!1;t.shift()}return!0}function ya(e,t,a){va(e)&&a.delete(t)}function hh(){ga=!1,hr!==null&&va(hr)&&(hr=null),mi!==null&&va(mi)&&(mi=null),Fr!==null&&va(Fr)&&(Fr=null),Je.forEach(ya),bs.forEach(ya)}function vi(e,t){e.blockedOn===t&&(e.blockedOn=null,ga||(ga=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hh)))}function Bn(e){function t(y){return vi(y,e)}if(0<Ps.length){vi(Ps[0],e);for(var a=1;a<Ps.length;a++){var f=Ps[a];f.blockedOn===e&&(f.blockedOn=null)}}for(hr!==null&&vi(hr,e),mi!==null&&vi(mi,e),Fr!==null&&vi(Fr,e),Je.forEach(t),bs.forEach(t),a=0;a<Dr.length;a++)f=Dr[a],f.blockedOn===e&&(f.blockedOn=null);for(;0<Dr.length&&(a=Dr[0],a.blockedOn===null);)ma(a),a.blockedOn===null&&Dr.shift()}var Ts=R.ReactCurrentBatchConfig,_a=!0;function Er(e,t,a,f){var y=st,P=Ts.transition;Ts.transition=null;try{st=1,Rs(e,t,a,f)}finally{st=y,Ts.transition=P}}function Xr(e,t,a,f){var y=st,P=Ts.transition;Ts.transition=null;try{st=4,Rs(e,t,a,f)}finally{st=y,Ts.transition=P}}function Rs(e,t,a,f){if(_a){var y=wa(e,t,a,f);if(y===null)Fa(e,t,f,Os,a),Fc(e,f);else if(tn(y,e,t,a,f))f.stopPropagation();else if(Fc(e,f),t&4&&-1<jc.indexOf(e)){for(;y!==null;){var P=Do(y);if(P!==null&&Cs(P),P=wa(e,t,a,f),P===null&&Fa(e,t,f,Os,a),P===y)break;y=P}y!==null&&f.stopPropagation()}else Fa(e,t,f,null,a)}}var Os=null;function wa(e,t,a,f){if(Os=null,e=Pl(f),e=Pi(e),e!==null)if(t=Bi(e),t===null)e=null;else if(a=t.tag,a===13){if(e=xc(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Os=e,null}function Dc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Al()){case Gi:return 1;case ha:return 4;case ks:case ch:return 16;case fa:return 536870912;default:return 16}default:return 16}}var dn=null,yi=null,Jr=null;function Co(){if(Jr)return Jr;var e,t=yi,a=t.length,f,y="value"in dn?dn.value:dn.textContent,P=y.length;for(e=0;e<a&&t[e]===y[e];e++);var z=a-e;for(f=1;f<=z&&t[a-f]===y[P-f];f++);return Jr=y.slice(e,1<f?1-f:void 0)}function Vi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Rn(){return!0}function Qn(){return!1}function Wt(e){function t(a,f,y,P,z){this._reactName=a,this._targetInst=y,this.type=f,this.nativeEvent=P,this.target=z,this.currentTarget=null;for(var Z in e)e.hasOwnProperty(Z)&&(a=e[Z],this[Z]=a?a(P):P[Z]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Rn:Qn,this.isPropagationStopped=Qn,this}return q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rn)},persist:function(){},isPersistent:Rn}),t}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cr=Wt(Gn),xr=q({},Gn,{view:0,detail:0}),Mc=Wt(xr),xo,Po,hn,On=q({},xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&e.type==="mousemove"?(xo=e.screenX-hn.screenX,Po=e.screenY-hn.screenY):Po=xo=0,hn=e),xo)},movementY:function(e){return"movementY"in e?e.movementY:Po}}),wt=Wt(On),bo=q({},On,{dataTransfer:0}),Pr=Wt(bo),Uc=q({},xr,{relatedTarget:0}),Sa=Wt(Uc),jl=q({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fl=Wt(jl),zc=q({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ka=Wt(zc),Bc=q({},Gn,{data:0}),Hi=Wt(Bc),Dl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ea={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ph(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ea[e])?!!t[e]:!1}function Wi(){return ph}var Ca=q({},xr,{key:function(e){if(e.key){var t=Dl[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wi,charCode:function(e){return e.type==="keypress"?Vi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gc=Wt(Ca),qc=q({},On,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$i=Wt(qc),Vc=q({},xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wi}),xa=Wt(Vc),Pa=q({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ns=Wt(Pa),Ml=q({},On,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ul=Wt(Ml),Hc=[9,13,27,32],To=p&&"CompositionEvent"in window,Ki=null;p&&"documentMode"in document&&(Ki=document.documentMode);var As=p&&"TextEvent"in window&&!Ki,Xn=p&&(!To||Ki&&8<Ki&&11>=Ki),_i=" ",ba=!1;function zl(e,t){switch(e){case"keyup":return Hc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function br(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jn=!1;function Bl(e,t){switch(e){case"compositionend":return br(t);case"keypress":return t.which!==32?null:(ba=!0,_i);case"textInput":return e=t.data,e===_i&&ba?null:e;default:return null}}function Wc(e,t){if(Jn)return e==="compositionend"||!To&&zl(e,t)?(e=Co(),Jr=yi=dn=null,Jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xn&&t.locale!=="ko"?null:t.data;default:return null}}var Zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ei(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zr[e.type]:t==="textarea"}function Ro(e,t,a,f){Tl(f),t=Da(t,"onChange"),0<t.length&&(a=new Cr("onChange","change",null,a,f),e.push({event:a,listeners:t}))}var Is=null,wi=null;function $c(e){Jl(e,0)}function Si(e){var t=Kt(e);if(ze(t))return e}function fr(e,t){if(e==="change")return t}var Ls=!1;if(p){var ki;if(p){var pr="oninput"in document;if(!pr){var Ta=document.createElement("div");Ta.setAttribute("oninput","return;"),pr=typeof Ta.oninput=="function"}ki=pr}else ki=!1;Ls=ki&&(!document.documentMode||9<document.documentMode)}function Yi(){Is&&(Is.detachEvent("onpropertychange",Gl),wi=Is=null)}function Gl(e){if(e.propertyName==="value"&&Si(wi)){var t=[];Ro(t,wi,e,Pl(e)),Ol($c,t)}}function ql(e,t,a){e==="focusin"?(Yi(),Is=t,wi=a,Is.attachEvent("onpropertychange",Gl)):e==="focusout"&&Yi()}function Rt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Si(wi)}function Ra(e,t){if(e==="click")return Si(t)}function Vl(e,t){if(e==="input"||e==="change")return Si(t)}function Hl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qn=typeof Object.is=="function"?Object.is:Hl;function Qi(e,t){if(qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),f=Object.keys(t);if(a.length!==f.length)return!1;for(f=0;f<a.length;f++){var y=a[f];if(!g.call(t,y)||!qn(e[y],t[y]))return!1}return!0}function Ei(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ct(e,t){var a=Ei(e);e=0;for(var f;a;){if(a.nodeType===3){if(f=e+a.textContent.length,e<=t&&f>=t)return{node:a,offset:t-e};e=f}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ei(a)}}function zt(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zt(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $t(){for(var e=window,t=De();t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=De(e.document)}return t}function js(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Oo(e){var t=$t(),a=e.focusedElem,f=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&zt(a.ownerDocument.documentElement,a)){if(f!==null&&js(a)){if(t=f.start,e=f.end,e===void 0&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if(e=(t=a.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var y=a.textContent.length,P=Math.min(f.start,y);f=f.end===void 0?P:Math.min(f.end,y),!e.extend&&P>f&&(y=f,f=P,P=y),y=Ct(a,P);var z=Ct(a,f);y&&z&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==z.node||e.focusOffset!==z.offset)&&(t=t.createRange(),t.setStart(y.node,y.offset),e.removeAllRanges(),P>f?(e.addRange(t),e.extend(z.node,z.offset)):(t.setEnd(z.node,z.offset),e.addRange(t)))}}for(t=[],e=a;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<t.length;a++)e=t[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var No=p&&"documentMode"in document&&11>=document.documentMode,Fs=null,nn=null,Xi=null,Ao=!1;function Oa(e,t,a){var f=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ao||Fs==null||Fs!==De(f)||(f=Fs,"selectionStart"in f&&js(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Xi&&Qi(Xi,f)||(Xi=f,f=Da(nn,"onSelect"),0<f.length&&(t=new Cr("onSelect","select",null,t,a),e.push({event:t,listeners:f}),t.target=Fs)))}function Zn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var fn={animationend:Zn("Animation","AnimationEnd"),animationiteration:Zn("Animation","AnimationIteration"),animationstart:Zn("Animation","AnimationStart"),transitionend:Zn("Transition","TransitionEnd")},Ji={},Na={};p&&(Na=document.createElement("div").style,"AnimationEvent"in window||(delete fn.animationend.animation,delete fn.animationiteration.animation,delete fn.animationstart.animation),"TransitionEvent"in window||delete fn.transitionend.transition);function Ds(e){if(Ji[e])return Ji[e];if(!fn[e])return e;var t=fn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Na)return Ji[e]=t[a];return e}var Wl=Ds("animationend"),$l=Ds("animationiteration"),Kl=Ds("animationstart"),Yl=Ds("transitionend"),Ql=new Map,Xl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(e,t){Ql.set(e,t),c(t,[e])}for(var Aa=0;Aa<Xl.length;Aa++){var Zi=Xl[Aa],Kc=Zi.toLowerCase(),Ia=Zi[0].toUpperCase()+Zi.slice(1);ti(Kc,"on"+Ia)}ti(Wl,"onAnimationEnd"),ti($l,"onAnimationIteration"),ti(Kl,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(Yl,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ci));function La(e,t,a){var f=e.type||"unknown-event";e.currentTarget=a,oh(f,t,void 0,e),e.currentTarget=null}function Jl(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var f=e[a],y=f.event;f=f.listeners;e:{var P=void 0;if(t)for(var z=f.length-1;0<=z;z--){var Z=f[z],te=Z.instance,fe=Z.currentTarget;if(Z=Z.listener,te!==P&&y.isPropagationStopped())break e;La(y,Z,fe),P=te}else for(z=0;z<f.length;z++){if(Z=f[z],te=Z.instance,fe=Z.currentTarget,Z=Z.listener,te!==P&&y.isPropagationStopped())break e;La(y,Z,fe),P=te}}}if(da)throw e=Ss,da=!1,Ss=null,e}function gt(e,t){var a=t[Ua];a===void 0&&(a=t[Ua]=new Set);var f=e+"__bubble";a.has(f)||(Zl(t,e,2,!1),a.add(f))}function ja(e,t,a){var f=0;t&&(f|=4),Zl(a,e,f,t)}var Io="_reactListening"+Math.random().toString(36).slice(2);function es(e){if(!e[Io]){e[Io]=!0,l.forEach(function(a){a!=="selectionchange"&&(Yc.has(a)||ja(a,!1,e),ja(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Io]||(t[Io]=!0,ja("selectionchange",!1,t))}}function Zl(e,t,a,f){switch(Dc(t)){case 1:var y=Er;break;case 4:y=Xr;break;default:y=Rs}a=y.bind(null,t,a,e),y=void 0,!Nl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(y=!0),f?y!==void 0?e.addEventListener(t,a,{capture:!0,passive:y}):e.addEventListener(t,a,!0):y!==void 0?e.addEventListener(t,a,{passive:y}):e.addEventListener(t,a,!1)}function Fa(e,t,a,f,y){var P=f;if((t&1)===0&&(t&2)===0&&f!==null)e:for(;;){if(f===null)return;var z=f.tag;if(z===3||z===4){var Z=f.stateNode.containerInfo;if(Z===y||Z.nodeType===8&&Z.parentNode===y)break;if(z===4)for(z=f.return;z!==null;){var te=z.tag;if((te===3||te===4)&&(te=z.stateNode.containerInfo,te===y||te.nodeType===8&&te.parentNode===y))return;z=z.return}for(;Z!==null;){if(z=Pi(Z),z===null)return;if(te=z.tag,te===5||te===6){f=P=z;continue e}Z=Z.parentNode}}f=f.return}Ol(function(){var fe=P,we=Pl(a),ke=[];e:{var _e=Ql.get(e);if(_e!==void 0){var Oe=Cr,Ie=e;switch(e){case"keypress":if(Vi(a)===0)break e;case"keydown":case"keyup":Oe=Gc;break;case"focusin":Ie="focus",Oe=Sa;break;case"focusout":Ie="blur",Oe=Sa;break;case"beforeblur":case"afterblur":Oe=Sa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Oe=wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Oe=Pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Oe=xa;break;case Wl:case $l:case Kl:Oe=Fl;break;case Yl:Oe=Ns;break;case"scroll":Oe=Mc;break;case"wheel":Oe=Ul;break;case"copy":case"cut":case"paste":Oe=ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Oe=$i}var Le=(t&4)!==0,Jt=!Le&&e==="scroll",ue=Le?_e!==null?_e+"Capture":null:_e;Le=[];for(var ne=fe,de;ne!==null;){de=ne;var Ce=de.stateNode;if(de.tag===5&&Ce!==null&&(de=Ce,ue!==null&&(Ce=_o(ne,ue),Ce!=null&&Le.push(Ms(ne,Ce,de)))),Jt)break;ne=ne.return}0<Le.length&&(_e=new Oe(_e,Ie,null,a,we),ke.push({event:_e,listeners:Le}))}}if((t&7)===0){e:{if(_e=e==="mouseover"||e==="pointerover",Oe=e==="mouseout"||e==="pointerout",_e&&a!==xl&&(Ie=a.relatedTarget||a.fromElement)&&(Pi(Ie)||Ie[Ur]))break e;if((Oe||_e)&&(_e=we.window===we?we:(_e=we.ownerDocument)?_e.defaultView||_e.parentWindow:window,Oe?(Ie=a.relatedTarget||a.toElement,Oe=fe,Ie=Ie?Pi(Ie):null,Ie!==null&&(Jt=Bi(Ie),Ie!==Jt||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(Oe=null,Ie=fe),Oe!==Ie)){if(Le=wt,Ce="onMouseLeave",ue="onMouseEnter",ne="mouse",(e==="pointerout"||e==="pointerover")&&(Le=$i,Ce="onPointerLeave",ue="onPointerEnter",ne="pointer"),Jt=Oe==null?_e:Kt(Oe),de=Ie==null?_e:Kt(Ie),_e=new Le(Ce,ne+"leave",Oe,a,we),_e.target=Jt,_e.relatedTarget=de,Ce=null,Pi(we)===fe&&(Le=new Le(ue,ne+"enter",Ie,a,we),Le.target=de,Le.relatedTarget=Jt,Ce=Le),Jt=Ce,Oe&&Ie)t:{for(Le=Oe,ue=Ie,ne=0,de=Le;de;de=ts(de))ne++;for(de=0,Ce=ue;Ce;Ce=ts(Ce))de++;for(;0<ne-de;)Le=ts(Le),ne--;for(;0<de-ne;)ue=ts(ue),de--;for(;ne--;){if(Le===ue||ue!==null&&Le===ue.alternate)break t;Le=ts(Le),ue=ts(ue)}Le=null}else Le=null;Oe!==null&&Qc(ke,_e,Oe,Le,!1),Ie!==null&&Jt!==null&&Qc(ke,Jt,Ie,Le,!0)}}e:{if(_e=fe?Kt(fe):window,Oe=_e.nodeName&&_e.nodeName.toLowerCase(),Oe==="select"||Oe==="input"&&_e.type==="file")var Fe=fr;else if(ei(_e))if(Ls)Fe=Vl;else{Fe=Rt;var Be=ql}else(Oe=_e.nodeName)&&Oe.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(Fe=Ra);if(Fe&&(Fe=Fe(e,fe))){Ro(ke,Fe,a,we);break e}Be&&Be(e,_e,fe),e==="focusout"&&(Be=_e._wrapperState)&&Be.controlled&&_e.type==="number"&&Ir(_e,"number",_e.value)}switch(Be=fe?Kt(fe):window,e){case"focusin":(ei(Be)||Be.contentEditable==="true")&&(Fs=Be,nn=fe,Xi=null);break;case"focusout":Xi=nn=Fs=null;break;case"mousedown":Ao=!0;break;case"contextmenu":case"mouseup":case"dragend":Ao=!1,Oa(ke,a,we);break;case"selectionchange":if(No)break;case"keydown":case"keyup":Oa(ke,a,we)}var Ge;if(To)e:{switch(e){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Jn?zl(e,a)&&(He="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(Xn&&a.locale!=="ko"&&(Jn||He!=="onCompositionStart"?He==="onCompositionEnd"&&Jn&&(Ge=Co()):(dn=we,yi="value"in dn?dn.value:dn.textContent,Jn=!0)),Be=Da(fe,He),0<Be.length&&(He=new Hi(He,e,null,a,we),ke.push({event:He,listeners:Be}),Ge?He.data=Ge:(Ge=br(a),Ge!==null&&(He.data=Ge)))),(Ge=As?Bl(e,a):Wc(e,a))&&(fe=Da(fe,"onBeforeInput"),0<fe.length&&(we=new Hi("onBeforeInput","beforeinput",null,a,we),ke.push({event:we,listeners:fe}),we.data=Ge))}Jl(ke,t)})}function Ms(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Da(e,t){for(var a=t+"Capture",f=[];e!==null;){var y=e,P=y.stateNode;y.tag===5&&P!==null&&(y=P,P=_o(e,a),P!=null&&f.unshift(Ms(e,P,y)),P=_o(e,t),P!=null&&f.push(Ms(e,P,y))),e=e.return}return f}function ts(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Qc(e,t,a,f,y){for(var P=t._reactName,z=[];a!==null&&a!==f;){var Z=a,te=Z.alternate,fe=Z.stateNode;if(te!==null&&te===f)break;Z.tag===5&&fe!==null&&(Z=fe,y?(te=_o(a,P),te!=null&&z.unshift(Ms(a,te,Z))):y||(te=_o(a,P),te!=null&&z.push(Ms(a,te,Z)))),a=a.return}z.length!==0&&e.push({event:t,listeners:z})}var gh=/\r\n?/g,Xc=/\u0000|\uFFFD/g;function eu(e){return(typeof e=="string"?e:""+e).replace(gh,`
`).replace(Xc,"")}function Lo(e,t,a){if(t=eu(t),eu(e)!==t&&a)throw Error(s(425))}function ns(){}var tu=null,nu=null;function ru(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var er=typeof setTimeout=="function"?setTimeout:void 0,iu=typeof clearTimeout=="function"?clearTimeout:void 0,jo=typeof Promise=="function"?Promise:void 0,Jc=typeof queueMicrotask=="function"?queueMicrotask:typeof jo<"u"?function(e){return jo.resolve(null).then(e).catch(Zc)}:er;function Zc(e){setTimeout(function(){throw e})}function Ma(e,t){var a=t,f=0;do{var y=a.nextSibling;if(e.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(f===0){e.removeChild(y),Bn(t);return}f--}else a!=="$"&&a!=="$?"&&a!=="$!"||f++;a=y}while(a);Bn(t)}function Mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rs(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}var xi=Math.random().toString(36).slice(2),gr="__reactFiber$"+xi,Fo="__reactProps$"+xi,Ur="__reactContainer$"+xi,Ua="__reactEvents$"+xi,ed="__reactListeners$"+xi,td="__reactHandles$"+xi;function Pi(e){var t=e[gr];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Ur]||a[gr]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=rs(e);e!==null;){if(a=e[gr])return a;e=rs(e)}return t}e=a,a=e.parentNode}return null}function Do(e){return e=e[gr]||e[Ur],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kt(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function rn(e){return e[Fo]||null}var za=[],is=-1;function ni(e){return{current:e}}function mt(e){0>is||(e.current=za[is],za[is]=null,is--)}function ft(e,t){is++,za[is]=e.current,e.current=t}var zr={},pn=ni(zr),wn=ni(!1),bi=zr;function ss(e,t){var a=e.type.contextTypes;if(!a)return zr;var f=e.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===t)return f.__reactInternalMemoizedMaskedChildContext;var y={},P;for(P in a)y[P]=t[P];return f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=y),y}function Sn(e){return e=e.childContextTypes,e!=null}function Us(){mt(wn),mt(pn)}function su(e,t,a){if(pn.current!==zr)throw Error(s(168));ft(pn,t),ft(wn,a)}function Ba(e,t,a){var f=e.stateNode;if(t=t.childContextTypes,typeof f.getChildContext!="function")return a;f=f.getChildContext();for(var y in f)if(!(y in t))throw Error(s(108,Q(e)||"Unknown",y));return q({},a,f)}function os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zr,bi=pn.current,ft(pn,e),ft(wn,wn.current),!0}function nd(e,t,a){var f=e.stateNode;if(!f)throw Error(s(169));a?(e=Ba(e,t,bi),f.__reactInternalMemoizedMergedChildContext=e,mt(wn),mt(pn),ft(pn,e)):mt(wn),ft(wn,a)}var Br=null,zs=!1,Ga=!1;function Mo(e){Br===null?Br=[e]:Br.push(e)}function ri(e){zs=!0,Mo(e)}function Ti(){if(!Ga&&Br!==null){Ga=!0;var e=0,t=st;try{var a=Br;for(st=1;e<a.length;e++){var f=a[e];do f=f(!0);while(f!==null)}Br=null,zs=!1}catch(y){throw Br!==null&&(Br=Br.slice(e+1)),Rc(Gi,Ti),y}finally{st=t,Ga=!1}}return null}var Nn=[],as=0,Ri=null,Oi=0,An=[],In=0,Ni=null,tr=1,xt="";function ls(e,t){Nn[as++]=Oi,Nn[as++]=Ri,Ri=e,Oi=t}function rd(e,t,a){An[In++]=tr,An[In++]=xt,An[In++]=Ni,Ni=e;var f=tr;e=xt;var y=32-Xe(f)-1;f&=~(1<<y),a+=1;var P=32-Xe(t)+y;if(30<P){var z=y-y%5;P=(f&(1<<z)-1).toString(32),f>>=z,y-=z,tr=1<<32-Xe(t)+y|a<<y|f,xt=P+e}else tr=1<<P|a<<y|f,xt=e}function Bs(e){e.return!==null&&(ls(e,1),rd(e,1,0))}function sn(e){for(;e===Ri;)Ri=Nn[--as],Nn[as]=null,Oi=Nn[--as],Nn[as]=null;for(;e===Ni;)Ni=An[--In],An[In]=null,xt=An[--In],An[In]=null,tr=An[--In],An[In]=null}var nr=null,Pe=null,ut=!1,rr=null;function ou(e,t){var a=Kr(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,t=e.deletions,t===null?(e.deletions=[a],e.flags|=16):t.push(a)}function id(e,t){switch(e.tag){case 5:var a=e.type;return t=t.nodeType!==1||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nr=e,Pe=Mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nr=e,Pe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(a=Ni!==null?{id:tr,overflow:xt}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},a=Kr(18,null,null,0),a.stateNode=t,a.return=e,e.child=a,nr=e,Pe=null,!0):!1;default:return!1}}function us(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gs(e){if(ut){var t=Pe;if(t){var a=t;if(!id(e,t)){if(us(e))throw Error(s(418));t=Mr(a.nextSibling);var f=nr;t&&id(e,t)?ou(f,a):(e.flags=e.flags&-4097|2,ut=!1,nr=e)}}else{if(us(e))throw Error(s(418));e.flags=e.flags&-4097|2,ut=!1,nr=e}}}function qa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nr=e}function Uo(e){if(e!==nr)return!1;if(!ut)return qa(e),ut=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ru(e.type,e.memoizedProps)),t&&(t=Pe)){if(us(e))throw au(),Error(s(418));for(;t;)ou(e,t),t=Mr(t.nextSibling)}if(qa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(t===0){Pe=Mr(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++}e=e.nextSibling}Pe=null}}else Pe=nr?Mr(e.stateNode.nextSibling):null;return!0}function au(){for(var e=Pe;e;)e=Mr(e.nextSibling)}function cs(){Pe=nr=null,ut=!1}function zo(e){rr===null?rr=[e]:rr.push(e)}var lu=R.ReactCurrentBatchConfig;function Lt(e,t,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(s(309));var f=a.stateNode}if(!f)throw Error(s(147,e));var y=f,P=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===P?t.ref:(t=function(z){var Z=y.refs;z===null?delete Z[P]:Z[P]=z},t._stringRef=P,t)}if(typeof e!="string")throw Error(s(284));if(!a._owner)throw Error(s(290,e))}return e}function Vn(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tr(e){var t=e._init;return t(e._payload)}function Va(e){function t(ue,ne){if(e){var de=ue.deletions;de===null?(ue.deletions=[ne],ue.flags|=16):de.push(ne)}}function a(ue,ne){if(!e)return null;for(;ne!==null;)t(ue,ne),ne=ne.sibling;return null}function f(ue,ne){for(ue=new Map;ne!==null;)ne.key!==null?ue.set(ne.key,ne):ue.set(ne.index,ne),ne=ne.sibling;return ue}function y(ue,ne){return ue=lo(ue,ne),ue.index=0,ue.sibling=null,ue}function P(ue,ne,de){return ue.index=de,e?(de=ue.alternate,de!==null?(de=de.index,de<ne?(ue.flags|=2,ne):de):(ue.flags|=2,ne)):(ue.flags|=1048576,ne)}function z(ue){return e&&ue.alternate===null&&(ue.flags|=2),ue}function Z(ue,ne,de,Ce){return ne===null||ne.tag!==6?(ne=Fh(de,ue.mode,Ce),ne.return=ue,ne):(ne=y(ne,de),ne.return=ue,ne)}function te(ue,ne,de,Ce){var Fe=de.type;return Fe===W?we(ue,ne,de.props.children,Ce,de.key):ne!==null&&(ne.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===oe&&Tr(Fe)===ne.type)?(Ce=y(ne,de.props),Ce.ref=Lt(ue,ne,de),Ce.return=ue,Ce):(Ce=xd(de.type,de.key,de.props,null,ue.mode,Ce),Ce.ref=Lt(ue,ne,de),Ce.return=ue,Ce)}function fe(ue,ne,de,Ce){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==de.containerInfo||ne.stateNode.implementation!==de.implementation?(ne=Dh(de,ue.mode,Ce),ne.return=ue,ne):(ne=y(ne,de.children||[]),ne.return=ue,ne)}function we(ue,ne,de,Ce,Fe){return ne===null||ne.tag!==7?(ne=Xo(de,ue.mode,Ce,Fe),ne.return=ue,ne):(ne=y(ne,de),ne.return=ue,ne)}function ke(ue,ne,de){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Fh(""+ne,ue.mode,de),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return de=xd(ne.type,ne.key,ne.props,null,ue.mode,de),de.ref=Lt(ue,null,ne),de.return=ue,de;case U:return ne=Dh(ne,ue.mode,de),ne.return=ue,ne;case oe:var Ce=ne._init;return ke(ue,Ce(ne._payload),de)}if(Ot(ne)||V(ne))return ne=Xo(ne,ue.mode,de,null),ne.return=ue,ne;Vn(ue,ne)}return null}function _e(ue,ne,de,Ce){var Fe=ne!==null?ne.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return Fe!==null?null:Z(ue,ne,""+de,Ce);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case I:return de.key===Fe?te(ue,ne,de,Ce):null;case U:return de.key===Fe?fe(ue,ne,de,Ce):null;case oe:return Fe=de._init,_e(ue,ne,Fe(de._payload),Ce)}if(Ot(de)||V(de))return Fe!==null?null:we(ue,ne,de,Ce,null);Vn(ue,de)}return null}function Oe(ue,ne,de,Ce,Fe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return ue=ue.get(de)||null,Z(ne,ue,""+Ce,Fe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case I:return ue=ue.get(Ce.key===null?de:Ce.key)||null,te(ne,ue,Ce,Fe);case U:return ue=ue.get(Ce.key===null?de:Ce.key)||null,fe(ne,ue,Ce,Fe);case oe:var Be=Ce._init;return Oe(ue,ne,de,Be(Ce._payload),Fe)}if(Ot(Ce)||V(Ce))return ue=ue.get(de)||null,we(ne,ue,Ce,Fe,null);Vn(ne,Ce)}return null}function Ie(ue,ne,de,Ce){for(var Fe=null,Be=null,Ge=ne,He=ne=0,bn=null;Ge!==null&&He<de.length;He++){Ge.index>He?(bn=Ge,Ge=null):bn=Ge.sibling;var lt=_e(ue,Ge,de[He],Ce);if(lt===null){Ge===null&&(Ge=bn);break}e&&Ge&&lt.alternate===null&&t(ue,Ge),ne=P(lt,ne,He),Be===null?Fe=lt:Be.sibling=lt,Be=lt,Ge=bn}if(He===de.length)return a(ue,Ge),ut&&ls(ue,He),Fe;if(Ge===null){for(;He<de.length;He++)Ge=ke(ue,de[He],Ce),Ge!==null&&(ne=P(Ge,ne,He),Be===null?Fe=Ge:Be.sibling=Ge,Be=Ge);return ut&&ls(ue,He),Fe}for(Ge=f(ue,Ge);He<de.length;He++)bn=Oe(Ge,ue,He,de[He],Ce),bn!==null&&(e&&bn.alternate!==null&&Ge.delete(bn.key===null?He:bn.key),ne=P(bn,ne,He),Be===null?Fe=bn:Be.sibling=bn,Be=bn);return e&&Ge.forEach(function(uo){return t(ue,uo)}),ut&&ls(ue,He),Fe}function Le(ue,ne,de,Ce){var Fe=V(de);if(typeof Fe!="function")throw Error(s(150));if(de=Fe.call(de),de==null)throw Error(s(151));for(var Be=Fe=null,Ge=ne,He=ne=0,bn=null,lt=de.next();Ge!==null&&!lt.done;He++,lt=de.next()){Ge.index>He?(bn=Ge,Ge=null):bn=Ge.sibling;var uo=_e(ue,Ge,lt.value,Ce);if(uo===null){Ge===null&&(Ge=bn);break}e&&Ge&&uo.alternate===null&&t(ue,Ge),ne=P(uo,ne,He),Be===null?Fe=uo:Be.sibling=uo,Be=uo,Ge=bn}if(lt.done)return a(ue,Ge),ut&&ls(ue,He),Fe;if(Ge===null){for(;!lt.done;He++,lt=de.next())lt=ke(ue,lt.value,Ce),lt!==null&&(ne=P(lt,ne,He),Be===null?Fe=lt:Be.sibling=lt,Be=lt);return ut&&ls(ue,He),Fe}for(Ge=f(ue,Ge);!lt.done;He++,lt=de.next())lt=Oe(Ge,ue,He,lt.value,Ce),lt!==null&&(e&&lt.alternate!==null&&Ge.delete(lt.key===null?He:lt.key),ne=P(lt,ne,He),Be===null?Fe=lt:Be.sibling=lt,Be=lt);return e&&Ge.forEach(function(r1){return t(ue,r1)}),ut&&ls(ue,He),Fe}function Jt(ue,ne,de,Ce){if(typeof de=="object"&&de!==null&&de.type===W&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case I:e:{for(var Fe=de.key,Be=ne;Be!==null;){if(Be.key===Fe){if(Fe=de.type,Fe===W){if(Be.tag===7){a(ue,Be.sibling),ne=y(Be,de.props.children),ne.return=ue,ue=ne;break e}}else if(Be.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===oe&&Tr(Fe)===Be.type){a(ue,Be.sibling),ne=y(Be,de.props),ne.ref=Lt(ue,Be,de),ne.return=ue,ue=ne;break e}a(ue,Be);break}else t(ue,Be);Be=Be.sibling}de.type===W?(ne=Xo(de.props.children,ue.mode,Ce,de.key),ne.return=ue,ue=ne):(Ce=xd(de.type,de.key,de.props,null,ue.mode,Ce),Ce.ref=Lt(ue,ne,de),Ce.return=ue,ue=Ce)}return z(ue);case U:e:{for(Be=de.key;ne!==null;){if(ne.key===Be)if(ne.tag===4&&ne.stateNode.containerInfo===de.containerInfo&&ne.stateNode.implementation===de.implementation){a(ue,ne.sibling),ne=y(ne,de.children||[]),ne.return=ue,ue=ne;break e}else{a(ue,ne);break}else t(ue,ne);ne=ne.sibling}ne=Dh(de,ue.mode,Ce),ne.return=ue,ue=ne}return z(ue);case oe:return Be=de._init,Jt(ue,ne,Be(de._payload),Ce)}if(Ot(de))return Ie(ue,ne,de,Ce);if(V(de))return Le(ue,ne,de,Ce);Vn(ue,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ne!==null&&ne.tag===6?(a(ue,ne.sibling),ne=y(ne,de),ne.return=ue,ue=ne):(a(ue,ne),ne=Fh(de,ue.mode,Ce),ne.return=ue,ue=ne),z(ue)):a(ue,ne)}return Jt}var ds=Va(!0),mr=Va(!1),Bo=ni(null),ir=null,qs=null,Ha=null;function Wa(){Ha=qs=ir=null}function $a(e){var t=Bo.current;mt(Bo),e._currentValue=t}function Ka(e,t,a){for(;e!==null;){var f=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,f!==null&&(f.childLanes|=t)):f!==null&&(f.childLanes&t)!==t&&(f.childLanes|=t),e===a)break;e=e.return}}function ii(e,t){ir=e,Ha=qs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(O=!0),e.firstContext=null)}function Ln(e){var t=e._currentValue;if(Ha!==e)if(e={context:e,memoizedValue:t,next:null},qs===null){if(ir===null)throw Error(s(308));qs=e,ir.dependencies={lanes:0,firstContext:e}}else qs=qs.next=e;return t}var Gr=null;function Vs(e){Gr===null?Gr=[e]:Gr.push(e)}function Go(e,t,a,f){var y=t.interleaved;return y===null?(a.next=a,Vs(t)):(a.next=y.next,y.next=a),t.interleaved=a,sr(e,f)}function sr(e,t){e.lanes|=t;var a=e.alternate;for(a!==null&&(a.lanes|=t),a=e,e=e.return;e!==null;)e.childLanes|=t,a=e.alternate,a!==null&&(a.childLanes|=t),a=e,e=e.return;return a.tag===3?a.stateNode:null}var qr=!1;function qo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hr(e,t,a){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,(at&2)!==0){var y=f.pending;return y===null?t.next=t:(t.next=y.next,y.next=t),f.pending=t,sr(e,a)}return y=f.interleaved,y===null?(t.next=t,Vs(f)):(t.next=y.next,y.next=t),f.interleaved=t,sr(e,a)}function Qa(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194240)!==0)){var f=t.lanes;f&=e.pendingLanes,a|=f,t.lanes=a,Ll(e,a)}}function Vo(e,t){var a=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,a===f)){var y=null,P=null;if(a=a.firstBaseUpdate,a!==null){do{var z={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};P===null?y=P=z:P=P.next=z,a=a.next}while(a!==null);P===null?y=P=t:P=P.next=t}else y=P=t;a={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:P,shared:f.shared,effects:f.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Hs(e,t,a,f){var y=e.updateQueue;qr=!1;var P=y.firstBaseUpdate,z=y.lastBaseUpdate,Z=y.shared.pending;if(Z!==null){y.shared.pending=null;var te=Z,fe=te.next;te.next=null,z===null?P=fe:z.next=fe,z=te;var we=e.alternate;we!==null&&(we=we.updateQueue,Z=we.lastBaseUpdate,Z!==z&&(Z===null?we.firstBaseUpdate=fe:Z.next=fe,we.lastBaseUpdate=te))}if(P!==null){var ke=y.baseState;z=0,we=fe=te=null,Z=P;do{var _e=Z.lane,Oe=Z.eventTime;if((f&_e)===_e){we!==null&&(we=we.next={eventTime:Oe,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var Ie=e,Le=Z;switch(_e=t,Oe=a,Le.tag){case 1:if(Ie=Le.payload,typeof Ie=="function"){ke=Ie.call(Oe,ke,_e);break e}ke=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Le.payload,_e=typeof Ie=="function"?Ie.call(Oe,ke,_e):Ie,_e==null)break e;ke=q({},ke,_e);break e;case 2:qr=!0}}Z.callback!==null&&Z.lane!==0&&(e.flags|=64,_e=y.effects,_e===null?y.effects=[Z]:_e.push(Z))}else Oe={eventTime:Oe,lane:_e,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},we===null?(fe=we=Oe,te=ke):we=we.next=Oe,z|=_e;if(Z=Z.next,Z===null){if(Z=y.shared.pending,Z===null)break;_e=Z,Z=_e.next,_e.next=null,y.lastBaseUpdate=_e,y.shared.pending=null}}while(!0);if(we===null&&(te=ke),y.baseState=te,y.firstBaseUpdate=fe,y.lastBaseUpdate=we,t=y.shared.interleaved,t!==null){y=t;do z|=y.lane,y=y.next;while(y!==t)}else P===null&&(y.shared.lanes=0);$o|=z,e.lanes=z,e.memoizedState=ke}}function Nt(e,t,a){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var f=e[t],y=f.callback;if(y!==null){if(f.callback=null,f=a,typeof y!="function")throw Error(s(191,y));y.call(f)}}}var Ke={},pt=ni(Ke),Pt=ni(Ke),jt=ni(Ke);function Yt(e){if(e===Ke)throw Error(s(174));return e}function Ai(e,t){switch(ft(jt,t),ft(Pt,e),ft(pt,Ke),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dr(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dr(t,e)}mt(pt),ft(pt,t)}function bt(){mt(pt),mt(Pt),mt(jt)}function Ws(e){Yt(jt.current);var t=Yt(pt.current),a=dr(t,e.type);t!==a&&(ft(Pt,e),ft(pt,a))}function si(e){Pt.current===e&&(mt(pt),mt(Pt))}var vt=ni(0);function $s(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hs=[];function kn(){for(var e=0;e<hs.length;e++)hs[e]._workInProgressVersionPrimary=null;hs.length=0}var Ks=R.ReactCurrentDispatcher,Ho=R.ReactCurrentBatchConfig,jn=0,ht=null,At=null,Bt=null,Rr=!1,Ii=!1,vr=0,Xa=0;function Gt(){throw Error(s(321))}function Wo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!qn(e[a],t[a]))return!1;return!0}function Ys(e,t,a,f,y,P){if(jn=P,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ks.current=e===null||e.memoizedState===null?vh:Fi,e=a(f,y),Ii){P=0;do{if(Ii=!1,vr=0,25<=P)throw Error(s(301));P+=1,Bt=At=null,t.updateQueue=null,Ks.current=nl,e=a(f,y)}while(Ii)}if(Ks.current=Zs,t=At!==null&&At.next!==null,jn=0,Bt=At=ht=null,Rr=!1,t)throw Error(s(300));return e}function Qs(){var e=vr!==0;return vr=0,e}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ht.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Qt(){if(At===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Bt===null?ht.memoizedState:Bt.next;if(t!==null)Bt=t,At=e;else{if(e===null)throw Error(s(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Bt===null?ht.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function En(e,t){return typeof t=="function"?t(e):t}function Cn(e){var t=Qt(),a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var f=At,y=f.baseQueue,P=a.pending;if(P!==null){if(y!==null){var z=y.next;y.next=P.next,P.next=z}f.baseQueue=y=P,a.pending=null}if(y!==null){P=y.next,f=f.baseState;var Z=z=null,te=null,fe=P;do{var we=fe.lane;if((jn&we)===we)te!==null&&(te=te.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),f=fe.hasEagerState?fe.eagerState:e(f,fe.action);else{var ke={lane:we,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};te===null?(Z=te=ke,z=f):te=te.next=ke,ht.lanes|=we,$o|=we}fe=fe.next}while(fe!==null&&fe!==P);te===null?z=f:te.next=Z,qn(f,t.memoizedState)||(O=!0),t.memoizedState=f,t.baseState=z,t.baseQueue=te,a.lastRenderedState=f}if(e=a.interleaved,e!==null){y=e;do P=y.lane,ht.lanes|=P,$o|=P,y=y.next;while(y!==e)}else y===null&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function Ja(e){var t=Qt(),a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var f=a.dispatch,y=a.pending,P=t.memoizedState;if(y!==null){a.pending=null;var z=y=y.next;do P=e(P,z.action),z=z.next;while(z!==y);qn(P,t.memoizedState)||(O=!0),t.memoizedState=P,t.baseQueue===null&&(t.baseState=P),a.lastRenderedState=P}return[P,f]}function Za(){}function el(e,t){var a=ht,f=Qt(),y=t(),P=!qn(f.memoizedState,y);if(P&&(f.memoizedState=y,O=!0),f=f.queue,hu(uu.bind(null,a,f,e),[e]),f.getSnapshot!==t||P||Bt!==null&&Bt.memoizedState.tag&1){if(a.flags|=2048,Xs(9,oi.bind(null,a,f,y,t),void 0,null),Pn===null)throw Error(s(349));(jn&30)!==0||sd(a,t,y)}return y}function sd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function oi(e,t,a,f){t.value=a,t.getSnapshot=f,cu(t)&&tl(e)}function uu(e,t,a){return a(function(){cu(t)&&tl(e)})}function cu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!qn(e,a)}catch{return!0}}function tl(e){var t=sr(e,1);t!==null&&ci(t,e,1,-1)}function Li(e){var t=St();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:e},t.queue=e,e=e.dispatch=dd.bind(null,ht,e),[t.memoizedState,e]}function Xs(e,t,a,f){return e={tag:e,create:t,destroy:a,deps:f,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(a=t.lastEffect,a===null?t.lastEffect=e.next=e:(f=a.next,a.next=e,e.next=f,t.lastEffect=e)),e}function du(){return Qt().memoizedState}function Js(e,t,a,f){var y=St();ht.flags|=e,y.memoizedState=Xs(1|t,a,void 0,f===void 0?null:f)}function fs(e,t,a,f){var y=Qt();f=f===void 0?null:f;var P=void 0;if(At!==null){var z=At.memoizedState;if(P=z.destroy,f!==null&&Wo(f,z.deps)){y.memoizedState=Xs(t,a,P,f);return}}ht.flags|=e,y.memoizedState=Xs(1|t,a,P,f)}function od(e,t){return Js(8390656,8,e,t)}function hu(e,t){return fs(2048,8,e,t)}function fu(e,t){return fs(4,2,e,t)}function pu(e,t){return fs(4,4,e,t)}function ji(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ad(e,t,a){return a=a!=null?a.concat([e]):null,fs(4,4,ji.bind(null,t,e),a)}function ai(){}function gu(e,t){var a=Qt();t=t===void 0?null:t;var f=a.memoizedState;return f!==null&&t!==null&&Wo(t,f[1])?f[0]:(a.memoizedState=[e,t],e)}function kt(e,t){var a=Qt();t=t===void 0?null:t;var f=a.memoizedState;return f!==null&&t!==null&&Wo(t,f[1])?f[0]:(e=e(),a.memoizedState=[e,t],e)}function ld(e,t,a){return(jn&21)===0?(e.baseState&&(e.baseState=!1,O=!0),e.memoizedState=a):(qn(a,t)||(a=Il(),ht.lanes|=a,$o|=a,e.baseState=!0),t)}function ud(e,t){var a=st;st=a!==0&&4>a?a:4,e(!0);var f=Ho.transition;Ho.transition={};try{e(!1),t()}finally{st=a,Ho.transition=f}}function cd(){return Qt().memoizedState}function mh(e,t,a){var f=oo(e);if(a={lane:f,action:a,hasEagerState:!1,eagerState:null,next:null},mu(e))hd(t,a);else if(a=Go(e,t,a,f),a!==null){var y=ar();ci(a,e,f,y),or(a,t,f)}}function dd(e,t,a){var f=oo(e),y={lane:f,action:a,hasEagerState:!1,eagerState:null,next:null};if(mu(e))hd(t,y);else{var P=e.alternate;if(e.lanes===0&&(P===null||P.lanes===0)&&(P=t.lastRenderedReducer,P!==null))try{var z=t.lastRenderedState,Z=P(z,a);if(y.hasEagerState=!0,y.eagerState=Z,qn(Z,z)){var te=t.interleaved;te===null?(y.next=y,Vs(t)):(y.next=te.next,te.next=y),t.interleaved=y;return}}catch{}finally{}a=Go(e,t,y,f),a!==null&&(y=ar(),ci(a,e,f,y),or(a,t,f))}}function mu(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function hd(e,t){Ii=Rr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function or(e,t,a){if((a&4194240)!==0){var f=t.lanes;f&=e.pendingLanes,a|=f,t.lanes=a,Ll(e,a)}}var Zs={readContext:Ln,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},vh={readContext:Ln,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:Ln,useEffect:od,useImperativeHandle:function(e,t,a){return a=a!=null?a.concat([e]):null,Js(4194308,4,ji.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){return Js(4,2,e,t)},useMemo:function(e,t){var a=St();return t=t===void 0?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var f=St();return t=a!==void 0?a(t):t,f.memoizedState=f.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},f.queue=e,e=e.dispatch=mh.bind(null,ht,e),[f.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:Li,useDebugValue:ai,useDeferredValue:function(e){return St().memoizedState=e},useTransition:function(){var e=Li(!1),t=e[0];return e=ud.bind(null,e[1]),St().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var f=ht,y=St();if(ut){if(a===void 0)throw Error(s(407));a=a()}else{if(a=t(),Pn===null)throw Error(s(349));(jn&30)!==0||sd(f,t,a)}y.memoizedState=a;var P={value:a,getSnapshot:t};return y.queue=P,od(uu.bind(null,f,P,e),[e]),f.flags|=2048,Xs(9,oi.bind(null,f,P,a,t),void 0,null),a},useId:function(){var e=St(),t=Pn.identifierPrefix;if(ut){var a=xt,f=tr;a=(f&~(1<<32-Xe(f)-1)).toString(32)+a,t=":"+t+"R"+a,a=vr++,0<a&&(t+="H"+a.toString(32)),t+=":"}else a=Xa++,t=":"+t+"r"+a.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Fi={readContext:Ln,useCallback:gu,useContext:Ln,useEffect:hu,useImperativeHandle:ad,useInsertionEffect:fu,useLayoutEffect:pu,useMemo:kt,useReducer:Cn,useRef:du,useState:function(){return Cn(En)},useDebugValue:ai,useDeferredValue:function(e){var t=Qt();return ld(t,At.memoizedState,e)},useTransition:function(){var e=Cn(En)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Za,useSyncExternalStore:el,useId:cd,unstable_isNewReconciler:!1},nl={readContext:Ln,useCallback:gu,useContext:Ln,useEffect:hu,useImperativeHandle:ad,useInsertionEffect:fu,useLayoutEffect:pu,useMemo:kt,useReducer:Ja,useRef:du,useState:function(){return Ja(En)},useDebugValue:ai,useDeferredValue:function(e){var t=Qt();return At===null?t.memoizedState=e:ld(t,At.memoizedState,e)},useTransition:function(){var e=Ja(En)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Za,useSyncExternalStore:el,useId:cd,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=q({},t),e=e.defaultProps;for(var a in e)t[a]===void 0&&(t[a]=e[a]);return t}return t}function eo(e,t,a,f){t=e.memoizedState,a=a(f,t),a=a==null?t:q({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var to={isMounted:function(e){return(e=e._reactInternals)?Bi(e)===e:!1},enqueueSetState:function(e,t,a){e=e._reactInternals;var f=ar(),y=oo(e),P=Vr(f,y);P.payload=t,a!=null&&(P.callback=a),t=Hr(e,P,y),t!==null&&(ci(t,e,y,f),Qa(t,e,y))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var f=ar(),y=oo(e),P=Vr(f,y);P.tag=1,P.payload=t,a!=null&&(P.callback=a),t=Hr(e,P,y),t!==null&&(ci(t,e,y,f),Qa(t,e,y))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ar(),f=oo(e),y=Vr(a,f);y.tag=2,t!=null&&(y.callback=t),t=Hr(e,y,f),t!==null&&(ci(t,e,f,a),Qa(t,e,f))}};function rl(e,t,a,f,y,P,z){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,P,z):t.prototype&&t.prototype.isPureReactComponent?!Qi(a,f)||!Qi(y,P):!0}function fd(e,t,a){var f=!1,y=zr,P=t.contextType;return typeof P=="object"&&P!==null?P=Ln(P):(y=Sn(t)?bi:pn.current,f=t.contextTypes,P=(f=f!=null)?ss(e,y):zr),t=new t(a,P),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=to,e.stateNode=t,t._reactInternals=e,f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=P),t}function vu(e,t,a,f){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,f),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,f),t.state!==e&&to.enqueueReplaceState(t,t.state,null)}function il(e,t,a,f){var y=e.stateNode;y.props=a,y.state=e.memoizedState,y.refs={},qo(e);var P=t.contextType;typeof P=="object"&&P!==null?y.context=Ln(P):(P=Sn(t)?bi:pn.current,y.context=ss(e,P)),y.state=e.memoizedState,P=t.getDerivedStateFromProps,typeof P=="function"&&(eo(e,t,P,a),y.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(t=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),t!==y.state&&to.enqueueReplaceState(y,y.state,null),Hs(e,a,y,f),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function ps(e,t){try{var a="",f=t;do a+=me(f),f=f.return;while(f);var y=a}catch(P){y=`
Error generating stack: `+P.message+`
`+P.stack}return{value:e,source:t,stack:y,digest:null}}function sl(e,t,a){return{value:e,source:null,stack:a??null,digest:t??null}}function no(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var yh=typeof WeakMap=="function"?WeakMap:Map;function pd(e,t,a){a=Vr(-1,a),a.tag=3,a.payload={element:null};var f=t.value;return a.callback=function(){_d||(_d=!0,Th=f),no(e,t)},a}function r(e,t,a){a=Vr(-1,a),a.tag=3;var f=e.type.getDerivedStateFromError;if(typeof f=="function"){var y=t.value;a.payload=function(){return f(y)},a.callback=function(){no(e,t)}}var P=e.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(a.callback=function(){no(e,t),typeof f!="function"&&(io===null?io=new Set([this]):io.add(this));var z=t.stack;this.componentDidCatch(t.value,{componentStack:z!==null?z:""})}),a}function i(e,t,a){var f=e.pingCache;if(f===null){f=e.pingCache=new yh;var y=new Set;f.set(t,y)}else y=f.get(t),y===void 0&&(y=new Set,f.set(t,y));y.has(a)||(y.add(a),e=Wm.bind(null,e,t,a),t.then(e,e))}function h(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function m(e,t,a,f,y){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(t=Vr(-1,1),t.tag=2,Hr(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=y,e)}var w=R.ReactCurrentOwner,O=!1;function H(e,t,a,f){t.child=e===null?mr(t,null,a,f):ds(t,e.child,a,f)}function se(e,t,a,f,y){a=a.render;var P=t.ref;return ii(t,y),f=Ys(e,t,a,f,P,y),a=Qs(),e!==null&&!O?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~y,xn(e,t,y)):(ut&&a&&Bs(t),t.flags|=1,H(e,t,f,y),t.child)}function pe(e,t,a,f,y){if(e===null){var P=a.type;return typeof P=="function"&&!jh(P)&&P.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(t.tag=15,t.type=P,Ee(e,t,P,f,y)):(e=xd(a.type,null,f,t,t.mode,y),e.ref=t.ref,e.return=t,t.child=e)}if(P=e.child,(e.lanes&y)===0){var z=P.memoizedProps;if(a=a.compare,a=a!==null?a:Qi,a(z,f)&&e.ref===t.ref)return xn(e,t,y)}return t.flags|=1,e=lo(P,f),e.ref=t.ref,e.return=t,t.child=e}function Ee(e,t,a,f,y){if(e!==null){var P=e.memoizedProps;if(Qi(P,f)&&e.ref===t.ref)if(O=!1,t.pendingProps=f=P,(e.lanes&y)!==0)(e.flags&131072)!==0&&(O=!0);else return t.lanes=e.lanes,xn(e,t,y)}return be(e,t,a,f,y)}function Ne(e,t,a){var f=t.pendingProps,y=f.children,P=e!==null?e.memoizedState:null;if(f.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(al,Or),Or|=a;else{if((a&1073741824)===0)return e=P!==null?P.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ft(al,Or),Or|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=P!==null?P.baseLanes:a,ft(al,Or),Or|=f}else P!==null?(f=P.baseLanes|a,t.memoizedState=null):f=a,ft(al,Or),Or|=f;return H(e,t,y,a),t.child}function We(e,t){var a=t.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function be(e,t,a,f,y){var P=Sn(a)?bi:pn.current;return P=ss(t,P),ii(t,y),a=Ys(e,t,a,f,P,y),f=Qs(),e!==null&&!O?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~y,xn(e,t,y)):(ut&&f&&Bs(t),t.flags|=1,H(e,t,a,y),t.child)}function yt(e,t,a,f,y){if(Sn(a)){var P=!0;os(t)}else P=!1;if(ii(t,y),t.stateNode===null)et(e,t),fd(t,a,f),il(t,a,f,y),f=!0;else if(e===null){var z=t.stateNode,Z=t.memoizedProps;z.props=Z;var te=z.context,fe=a.contextType;typeof fe=="object"&&fe!==null?fe=Ln(fe):(fe=Sn(a)?bi:pn.current,fe=ss(t,fe));var we=a.getDerivedStateFromProps,ke=typeof we=="function"||typeof z.getSnapshotBeforeUpdate=="function";ke||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Z!==f||te!==fe)&&vu(t,z,f,fe),qr=!1;var _e=t.memoizedState;z.state=_e,Hs(t,f,z,y),te=t.memoizedState,Z!==f||_e!==te||wn.current||qr?(typeof we=="function"&&(eo(t,a,we,f),te=t.memoizedState),(Z=qr||rl(t,a,Z,f,_e,te,fe))?(ke||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(t.flags|=4194308)):(typeof z.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=f,t.memoizedState=te),z.props=f,z.state=te,z.context=fe,f=Z):(typeof z.componentDidMount=="function"&&(t.flags|=4194308),f=!1)}else{z=t.stateNode,Ya(e,t),Z=t.memoizedProps,fe=t.type===t.elementType?Z:gn(t.type,Z),z.props=fe,ke=t.pendingProps,_e=z.context,te=a.contextType,typeof te=="object"&&te!==null?te=Ln(te):(te=Sn(a)?bi:pn.current,te=ss(t,te));var Oe=a.getDerivedStateFromProps;(we=typeof Oe=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Z!==ke||_e!==te)&&vu(t,z,f,te),qr=!1,_e=t.memoizedState,z.state=_e,Hs(t,f,z,y);var Ie=t.memoizedState;Z!==ke||_e!==Ie||wn.current||qr?(typeof Oe=="function"&&(eo(t,a,Oe,f),Ie=t.memoizedState),(fe=qr||rl(t,a,fe,f,_e,Ie,te)||!1)?(we||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(f,Ie,te),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(f,Ie,te)),typeof z.componentDidUpdate=="function"&&(t.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof z.componentDidUpdate!="function"||Z===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Z===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),t.memoizedProps=f,t.memoizedState=Ie),z.props=f,z.state=Ie,z.context=te,f=fe):(typeof z.componentDidUpdate!="function"||Z===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Z===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),f=!1)}return ct(e,t,a,f,P,y)}function ct(e,t,a,f,y,P){We(e,t);var z=(t.flags&128)!==0;if(!f&&!z)return y&&nd(t,a,!1),xn(e,t,P);f=t.stateNode,w.current=t;var Z=z&&typeof a.getDerivedStateFromError!="function"?null:f.render();return t.flags|=1,e!==null&&z?(t.child=ds(t,e.child,null,P),t.child=ds(t,null,Z,P)):H(e,t,Z,P),t.memoizedState=f.state,y&&nd(t,a,!0),t.child}function Fn(e){var t=e.stateNode;t.pendingContext?su(e,t.pendingContext,t.pendingContext!==t.context):t.context&&su(e,t.context,!1),Ai(e,t.containerInfo)}function Wr(e,t,a,f,y){return cs(),zo(y),t.flags|=256,H(e,t,a,f),t.child}var he={dehydrated:null,treeContext:null,retryLane:0};function le(e){return{baseLanes:e,cachePool:null,transitions:null}}function ge(e,t,a){var f=t.pendingProps,y=vt.current,P=!1,z=(t.flags&128)!==0,Z;if((Z=z)||(Z=e!==null&&e.memoizedState===null?!1:(y&2)!==0),Z?(P=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),ft(vt,y&1),e===null)return Gs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(z=f.children,e=f.fallback,P?(f=t.mode,P=t.child,z={mode:"hidden",children:z},(f&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=z):P=Pd(z,f,0,null),e=Xo(e,f,a,null),P.return=t,e.return=t,P.sibling=e,t.child=P,t.child.memoizedState=le(a),t.memoizedState=he,e):Te(t,z));if(y=e.memoizedState,y!==null&&(Z=y.dehydrated,Z!==null))return Ye(e,t,z,f,Z,y,a);if(P){P=f.fallback,z=t.mode,y=e.child,Z=y.sibling;var te={mode:"hidden",children:f.children};return(z&1)===0&&t.child!==y?(f=t.child,f.childLanes=0,f.pendingProps=te,t.deletions=null):(f=lo(y,te),f.subtreeFlags=y.subtreeFlags&14680064),Z!==null?P=lo(Z,P):(P=Xo(P,z,a,null),P.flags|=2),P.return=t,f.return=t,f.sibling=P,t.child=f,f=P,P=t.child,z=e.child.memoizedState,z=z===null?le(a):{baseLanes:z.baseLanes|a,cachePool:null,transitions:z.transitions},P.memoizedState=z,P.childLanes=e.childLanes&~a,t.memoizedState=he,f}return P=e.child,e=P.sibling,f=lo(P,{mode:"visible",children:f.children}),(t.mode&1)===0&&(f.lanes=a),f.return=t,f.sibling=null,e!==null&&(a=t.deletions,a===null?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=f,t.memoizedState=null,f}function Te(e,t){return t=Pd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Me(e,t,a,f){return f!==null&&zo(f),ds(t,e.child,null,a),e=Te(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ye(e,t,a,f,y,P,z){if(a)return t.flags&256?(t.flags&=-257,f=sl(Error(s(422))),Me(e,t,z,f)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(P=f.fallback,y=t.mode,f=Pd({mode:"visible",children:f.children},y,0,null),P=Xo(P,y,z,null),P.flags|=2,f.return=t,P.return=t,f.sibling=P,t.child=f,(t.mode&1)!==0&&ds(t,e.child,null,z),t.child.memoizedState=le(z),t.memoizedState=he,P);if((t.mode&1)===0)return Me(e,t,z,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var Z=f.dgst;return f=Z,P=Error(s(419)),f=sl(P,f,void 0),Me(e,t,z,f)}if(Z=(z&e.childLanes)!==0,O||Z){if(f=Pn,f!==null){switch(z&-z){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|z))!==0?0:y,y!==0&&y!==P.retryLane&&(P.retryLane=y,sr(e,y),ci(f,e,y,-1))}return Lh(),f=sl(Error(s(421))),Me(e,t,z,f)}return y.data==="$?"?(t.flags|=128,t.child=e.child,t=$m.bind(null,e),y._reactRetry=t,null):(e=P.treeContext,Pe=Mr(y.nextSibling),nr=t,ut=!0,rr=null,e!==null&&(An[In++]=tr,An[In++]=xt,An[In++]=Ni,tr=e.id,xt=e.overflow,Ni=t),t=Te(t,f.children),t.flags|=4096,t)}function $e(e,t,a){e.lanes|=t;var f=e.alternate;f!==null&&(f.lanes|=t),Ka(e.return,t,a)}function nt(e,t,a,f,y){var P=e.memoizedState;P===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:f,tail:a,tailMode:y}:(P.isBackwards=t,P.rendering=null,P.renderingStartTime=0,P.last=f,P.tail=a,P.tailMode=y)}function Xt(e,t,a){var f=t.pendingProps,y=f.revealOrder,P=f.tail;if(H(e,t,f.children,a),f=vt.current,(f&2)!==0)f=f&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$e(e,a,t);else if(e.tag===19)$e(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}f&=1}if(ft(vt,f),(t.mode&1)===0)t.memoizedState=null;else switch(y){case"forwards":for(a=t.child,y=null;a!==null;)e=a.alternate,e!==null&&$s(e)===null&&(y=a),a=a.sibling;a=y,a===null?(y=t.child,t.child=null):(y=a.sibling,a.sibling=null),nt(t,!1,y,a,P);break;case"backwards":for(a=null,y=t.child,t.child=null;y!==null;){if(e=y.alternate,e!==null&&$s(e)===null){t.child=y;break}e=y.sibling,y.sibling=a,a=y,y=e}nt(t,!0,a,null,P);break;case"together":nt(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function et(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xn(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),$o|=t.lanes,(a&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,a=lo(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=lo(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function _h(e,t,a){switch(t.tag){case 3:Fn(t),cs();break;case 5:Ws(t);break;case 1:Sn(t.type)&&os(t);break;case 4:Ai(t,t.stateNode.containerInfo);break;case 10:var f=t.type._context,y=t.memoizedProps.value;ft(Bo,f._currentValue),f._currentValue=y;break;case 13:if(f=t.memoizedState,f!==null)return f.dehydrated!==null?(ft(vt,vt.current&1),t.flags|=128,null):(a&t.child.childLanes)!==0?ge(e,t,a):(ft(vt,vt.current&1),e=xn(e,t,a),e!==null?e.sibling:null);ft(vt,vt.current&1);break;case 19:if(f=(a&t.childLanes)!==0,(e.flags&128)!==0){if(f)return Xt(e,t,a);t.flags|=128}if(y=t.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ft(vt,vt.current),f)break;return null;case 22:case 23:return t.lanes=0,Ne(e,t,a)}return xn(e,t,a)}var $f,wh,Kf,Yf;$f=function(e,t){for(var a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},wh=function(){},Kf=function(e,t,a,f){var y=e.memoizedProps;if(y!==f){e=t.stateNode,Yt(pt.current);var P=null;switch(a){case"input":y=it(e,y),f=it(e,f),P=[];break;case"select":y=q({},y,{value:void 0}),f=q({},f,{value:void 0}),P=[];break;case"textarea":y=dt(e,y),f=dt(e,f),P=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(e.onclick=ns)}yo(a,f);var z;a=null;for(fe in y)if(!f.hasOwnProperty(fe)&&y.hasOwnProperty(fe)&&y[fe]!=null)if(fe==="style"){var Z=y[fe];for(z in Z)Z.hasOwnProperty(z)&&(a||(a={}),a[z]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(d.hasOwnProperty(fe)?P||(P=[]):(P=P||[]).push(fe,null));for(fe in f){var te=f[fe];if(Z=y?.[fe],f.hasOwnProperty(fe)&&te!==Z&&(te!=null||Z!=null))if(fe==="style")if(Z){for(z in Z)!Z.hasOwnProperty(z)||te&&te.hasOwnProperty(z)||(a||(a={}),a[z]="");for(z in te)te.hasOwnProperty(z)&&Z[z]!==te[z]&&(a||(a={}),a[z]=te[z])}else a||(P||(P=[]),P.push(fe,a)),a=te;else fe==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,Z=Z?Z.__html:void 0,te!=null&&Z!==te&&(P=P||[]).push(fe,te)):fe==="children"?typeof te!="string"&&typeof te!="number"||(P=P||[]).push(fe,""+te):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(d.hasOwnProperty(fe)?(te!=null&&fe==="onScroll"&&gt("scroll",e),P||Z===te||(P=[])):(P=P||[]).push(fe,te))}a&&(P=P||[]).push("style",a);var fe=P;(t.updateQueue=fe)&&(t.flags|=4)}},Yf=function(e,t,a,f){a!==f&&(t.flags|=4)};function yu(e,t){if(!ut)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function Hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,f=0;if(t)for(var y=e.child;y!==null;)a|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)a|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=f,e.childLanes=a,t}function Fm(e,t,a){var f=t.pendingProps;switch(sn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(t),null;case 1:return Sn(t.type)&&Us(),Hn(t),null;case 3:return f=t.stateNode,bt(),mt(wn),mt(pn),kn(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(e===null||e.child===null)&&(Uo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,rr!==null&&(Nh(rr),rr=null))),wh(e,t),Hn(t),null;case 5:si(t);var y=Yt(jt.current);if(a=t.type,e!==null&&t.stateNode!=null)Kf(e,t,a,f,y),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!f){if(t.stateNode===null)throw Error(s(166));return Hn(t),null}if(e=Yt(pt.current),Uo(t)){f=t.stateNode,a=t.type;var P=t.memoizedProps;switch(f[gr]=t,f[Fo]=P,e=(t.mode&1)!==0,a){case"dialog":gt("cancel",f),gt("close",f);break;case"iframe":case"object":case"embed":gt("load",f);break;case"video":case"audio":for(y=0;y<Ci.length;y++)gt(Ci[y],f);break;case"source":gt("error",f);break;case"img":case"image":case"link":gt("error",f),gt("load",f);break;case"details":gt("toggle",f);break;case"input":Ve(f,P),gt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!P.multiple},gt("invalid",f);break;case"textarea":Un(f,P),gt("invalid",f)}yo(a,P),y=null;for(var z in P)if(P.hasOwnProperty(z)){var Z=P[z];z==="children"?typeof Z=="string"?f.textContent!==Z&&(P.suppressHydrationWarning!==!0&&Lo(f.textContent,Z,e),y=["children",Z]):typeof Z=="number"&&f.textContent!==""+Z&&(P.suppressHydrationWarning!==!0&&Lo(f.textContent,Z,e),y=["children",""+Z]):d.hasOwnProperty(z)&&Z!=null&&z==="onScroll"&&gt("scroll",f)}switch(a){case"input":xe(f),Et(f,P,!0);break;case"textarea":xe(f),Lr(f);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(f.onclick=ns)}f=y,t.updateQueue=f,f!==null&&(t.flags|=4)}else{z=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=un(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=z.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof f.is=="string"?e=z.createElement(a,{is:f.is}):(e=z.createElement(a),a==="select"&&(z=e,f.multiple?z.multiple=!0:f.size&&(z.size=f.size))):e=z.createElementNS(e,a),e[gr]=t,e[Fo]=f,$f(e,t,!1,!1),t.stateNode=e;e:{switch(z=aa(a,f),a){case"dialog":gt("cancel",e),gt("close",e),y=f;break;case"iframe":case"object":case"embed":gt("load",e),y=f;break;case"video":case"audio":for(y=0;y<Ci.length;y++)gt(Ci[y],e);y=f;break;case"source":gt("error",e),y=f;break;case"img":case"image":case"link":gt("error",e),gt("load",e),y=f;break;case"details":gt("toggle",e),y=f;break;case"input":Ve(e,f),y=it(e,f),gt("invalid",e);break;case"option":y=f;break;case"select":e._wrapperState={wasMultiple:!!f.multiple},y=q({},f,{value:void 0}),gt("invalid",e);break;case"textarea":Un(e,f),y=dt(e,f),gt("invalid",e);break;default:y=f}yo(a,y),Z=y;for(P in Z)if(Z.hasOwnProperty(P)){var te=Z[P];P==="style"?Ui(e,te):P==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Kn(e,te)):P==="children"?typeof te=="string"?(a!=="textarea"||te!=="")&&Mt(e,te):typeof te=="number"&&Mt(e,""+te):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(d.hasOwnProperty(P)?te!=null&&P==="onScroll"&&gt("scroll",e):te!=null&&_(e,P,te,z))}switch(a){case"input":xe(e),Et(e,f,!1);break;case"textarea":xe(e),Lr(e);break;case"option":f.value!=null&&e.setAttribute("value",""+ie(f.value));break;case"select":e.multiple=!!f.multiple,P=f.value,P!=null?cr(e,!!f.multiple,P,!1):f.defaultValue!=null&&cr(e,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=ns)}switch(a){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hn(t),null;case 6:if(e&&t.stateNode!=null)Yf(e,t,e.memoizedProps,f);else{if(typeof f!="string"&&t.stateNode===null)throw Error(s(166));if(a=Yt(jt.current),Yt(pt.current),Uo(t)){if(f=t.stateNode,a=t.memoizedProps,f[gr]=t,(P=f.nodeValue!==a)&&(e=nr,e!==null))switch(e.tag){case 3:Lo(f.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lo(f.nodeValue,a,(e.mode&1)!==0)}P&&(t.flags|=4)}else f=(a.nodeType===9?a:a.ownerDocument).createTextNode(f),f[gr]=t,t.stateNode=f}return Hn(t),null;case 13:if(mt(vt),f=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ut&&Pe!==null&&(t.mode&1)!==0&&(t.flags&128)===0)au(),cs(),t.flags|=98560,P=!1;else if(P=Uo(t),f!==null&&f.dehydrated!==null){if(e===null){if(!P)throw Error(s(318));if(P=t.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(s(317));P[gr]=t}else cs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Hn(t),P=!1}else rr!==null&&(Nh(rr),rr=null),P=!0;if(!P)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=a,t):(f=f!==null,f!==(e!==null&&e.memoizedState!==null)&&f&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(vt.current&1)!==0?mn===0&&(mn=3):Lh())),t.updateQueue!==null&&(t.flags|=4),Hn(t),null);case 4:return bt(),wh(e,t),e===null&&es(t.stateNode.containerInfo),Hn(t),null;case 10:return $a(t.type._context),Hn(t),null;case 17:return Sn(t.type)&&Us(),Hn(t),null;case 19:if(mt(vt),P=t.memoizedState,P===null)return Hn(t),null;if(f=(t.flags&128)!==0,z=P.rendering,z===null)if(f)yu(P,!1);else{if(mn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(z=$s(e),z!==null){for(t.flags|=128,yu(P,!1),f=z.updateQueue,f!==null&&(t.updateQueue=f,t.flags|=4),t.subtreeFlags=0,f=a,a=t.child;a!==null;)P=a,e=f,P.flags&=14680066,z=P.alternate,z===null?(P.childLanes=0,P.lanes=e,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=z.childLanes,P.lanes=z.lanes,P.child=z.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=z.memoizedProps,P.memoizedState=z.memoizedState,P.updateQueue=z.updateQueue,P.type=z.type,e=z.dependencies,P.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return ft(vt,vt.current&1|2),t.child}e=e.sibling}P.tail!==null&&It()>ll&&(t.flags|=128,f=!0,yu(P,!1),t.lanes=4194304)}else{if(!f)if(e=$s(z),e!==null){if(t.flags|=128,f=!0,a=e.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),yu(P,!0),P.tail===null&&P.tailMode==="hidden"&&!z.alternate&&!ut)return Hn(t),null}else 2*It()-P.renderingStartTime>ll&&a!==1073741824&&(t.flags|=128,f=!0,yu(P,!1),t.lanes=4194304);P.isBackwards?(z.sibling=t.child,t.child=z):(a=P.last,a!==null?a.sibling=z:t.child=z,P.last=z)}return P.tail!==null?(t=P.tail,P.rendering=t,P.tail=t.sibling,P.renderingStartTime=It(),t.sibling=null,a=vt.current,ft(vt,f?a&1|2:a&1),t):(Hn(t),null);case 22:case 23:return Ih(),f=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==f&&(t.flags|=8192),f&&(t.mode&1)!==0?(Or&1073741824)!==0&&(Hn(t),t.subtreeFlags&6&&(t.flags|=8192)):Hn(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function Dm(e,t){switch(sn(t),t.tag){case 1:return Sn(t.type)&&Us(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bt(),mt(wn),mt(pn),kn(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return si(t),null;case 13:if(mt(vt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));cs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mt(vt),null;case 4:return bt(),null;case 10:return $a(t.type._context),null;case 22:case 23:return Ih(),null;case 24:return null;default:return null}}var gd=!1,Wn=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function ol(e,t){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(f){qt(e,t,f)}else a.current=null}function Sh(e,t,a){try{a()}catch(f){qt(e,t,f)}}var Qf=!1;function Um(e,t){if(tu=_a,e=$t(),js(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var f=a.getSelection&&a.getSelection();if(f&&f.rangeCount!==0){a=f.anchorNode;var y=f.anchorOffset,P=f.focusNode;f=f.focusOffset;try{a.nodeType,P.nodeType}catch{a=null;break e}var z=0,Z=-1,te=-1,fe=0,we=0,ke=e,_e=null;t:for(;;){for(var Oe;ke!==a||y!==0&&ke.nodeType!==3||(Z=z+y),ke!==P||f!==0&&ke.nodeType!==3||(te=z+f),ke.nodeType===3&&(z+=ke.nodeValue.length),(Oe=ke.firstChild)!==null;)_e=ke,ke=Oe;for(;;){if(ke===e)break t;if(_e===a&&++fe===y&&(Z=z),_e===P&&++we===f&&(te=z),(Oe=ke.nextSibling)!==null)break;ke=_e,_e=ke.parentNode}ke=Oe}a=Z===-1||te===-1?null:{start:Z,end:te}}else a=null}a=a||{start:0,end:0}}else a=null;for(nu={focusedElem:e,selectionRange:a},_a=!1,Ae=t;Ae!==null;)if(t=Ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ae=e;else for(;Ae!==null;){t=Ae;try{var Ie=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var Le=Ie.memoizedProps,Jt=Ie.memoizedState,ue=t.stateNode,ne=ue.getSnapshotBeforeUpdate(t.elementType===t.type?Le:gn(t.type,Le),Jt);ue.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var de=t.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Ce){qt(t,t.return,Ce)}if(e=t.sibling,e!==null){e.return=t.return,Ae=e;break}Ae=t.return}return Ie=Qf,Qf=!1,Ie}function _u(e,t,a){var f=t.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&e)===e){var P=y.destroy;y.destroy=void 0,P!==void 0&&Sh(t,a,P)}y=y.next}while(y!==f)}}function md(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var a=t=t.next;do{if((a.tag&e)===e){var f=a.create;a.destroy=f()}a=a.next}while(a!==t)}}function kh(e){var t=e.ref;if(t!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof t=="function"?t(e):t.current=e}}function Xf(e){var t=e.alternate;t!==null&&(e.alternate=null,Xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gr],delete t[Fo],delete t[Ua],delete t[ed],delete t[td])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jf(e){return e.tag===5||e.tag===3||e.tag===4}function Zf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eh(e,t,a){var f=e.tag;if(f===5||f===6)e=e.stateNode,t?a.nodeType===8?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(a.nodeType===8?(t=a.parentNode,t.insertBefore(e,a)):(t=a,t.appendChild(e)),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ns));else if(f!==4&&(e=e.child,e!==null))for(Eh(e,t,a),e=e.sibling;e!==null;)Eh(e,t,a),e=e.sibling}function Ch(e,t,a){var f=e.tag;if(f===5||f===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(f!==4&&(e=e.child,e!==null))for(Ch(e,t,a),e=e.sibling;e!==null;)Ch(e,t,a),e=e.sibling}var Dn=null,li=!1;function ro(e,t,a){for(a=a.child;a!==null;)e0(e,t,a),a=a.sibling}function e0(e,t,a){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Yr,a)}catch{}switch(a.tag){case 5:Wn||ol(a,t);case 6:var f=Dn,y=li;Dn=null,ro(e,t,a),Dn=f,li=y,Dn!==null&&(li?(e=Dn,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Dn.removeChild(a.stateNode));break;case 18:Dn!==null&&(li?(e=Dn,a=a.stateNode,e.nodeType===8?Ma(e.parentNode,a):e.nodeType===1&&Ma(e,a),Bn(e)):Ma(Dn,a.stateNode));break;case 4:f=Dn,y=li,Dn=a.stateNode.containerInfo,li=!0,ro(e,t,a),Dn=f,li=y;break;case 0:case 11:case 14:case 15:if(!Wn&&(f=a.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var P=y,z=P.destroy;P=P.tag,z!==void 0&&((P&2)!==0||(P&4)!==0)&&Sh(a,t,z),y=y.next}while(y!==f)}ro(e,t,a);break;case 1:if(!Wn&&(ol(a,t),f=a.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=a.memoizedProps,f.state=a.memoizedState,f.componentWillUnmount()}catch(Z){qt(a,t,Z)}ro(e,t,a);break;case 21:ro(e,t,a);break;case 22:a.mode&1?(Wn=(f=Wn)||a.memoizedState!==null,ro(e,t,a),Wn=f):ro(e,t,a);break;default:ro(e,t,a)}}function t0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Mm),t.forEach(function(f){var y=Km.bind(null,e,f);a.has(f)||(a.add(f),f.then(y,y))})}}function ui(e,t){var a=t.deletions;if(a!==null)for(var f=0;f<a.length;f++){var y=a[f];try{var P=e,z=t,Z=z;e:for(;Z!==null;){switch(Z.tag){case 5:Dn=Z.stateNode,li=!1;break e;case 3:Dn=Z.stateNode.containerInfo,li=!0;break e;case 4:Dn=Z.stateNode.containerInfo,li=!0;break e}Z=Z.return}if(Dn===null)throw Error(s(160));e0(P,z,y),Dn=null,li=!1;var te=y.alternate;te!==null&&(te.return=null),y.return=null}catch(fe){qt(y,t,fe)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)n0(t,e),t=t.sibling}function n0(e,t){var a=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ui(t,e),Di(e),f&4){try{_u(3,e,e.return),md(3,e)}catch(Le){qt(e,e.return,Le)}try{_u(5,e,e.return)}catch(Le){qt(e,e.return,Le)}}break;case 1:ui(t,e),Di(e),f&512&&a!==null&&ol(a,a.return);break;case 5:if(ui(t,e),Di(e),f&512&&a!==null&&ol(a,a.return),e.flags&32){var y=e.stateNode;try{Mt(y,"")}catch(Le){qt(e,e.return,Le)}}if(f&4&&(y=e.stateNode,y!=null)){var P=e.memoizedProps,z=a!==null?a.memoizedProps:P,Z=e.type,te=e.updateQueue;if(e.updateQueue=null,te!==null)try{Z==="input"&&P.type==="radio"&&P.name!=null&&Dt(y,P),aa(Z,z);var fe=aa(Z,P);for(z=0;z<te.length;z+=2){var we=te[z],ke=te[z+1];we==="style"?Ui(y,ke):we==="dangerouslySetInnerHTML"?Kn(y,ke):we==="children"?Mt(y,ke):_(y,we,ke,fe)}switch(Z){case"input":ot(y,P);break;case"textarea":ln(y,P);break;case"select":var _e=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!P.multiple;var Oe=P.value;Oe!=null?cr(y,!!P.multiple,Oe,!1):_e!==!!P.multiple&&(P.defaultValue!=null?cr(y,!!P.multiple,P.defaultValue,!0):cr(y,!!P.multiple,P.multiple?[]:"",!1))}y[Fo]=P}catch(Le){qt(e,e.return,Le)}}break;case 6:if(ui(t,e),Di(e),f&4){if(e.stateNode===null)throw Error(s(162));y=e.stateNode,P=e.memoizedProps;try{y.nodeValue=P}catch(Le){qt(e,e.return,Le)}}break;case 3:if(ui(t,e),Di(e),f&4&&a!==null&&a.memoizedState.isDehydrated)try{Bn(t.containerInfo)}catch(Le){qt(e,e.return,Le)}break;case 4:ui(t,e),Di(e);break;case 13:ui(t,e),Di(e),y=e.child,y.flags&8192&&(P=y.memoizedState!==null,y.stateNode.isHidden=P,!P||y.alternate!==null&&y.alternate.memoizedState!==null||(bh=It())),f&4&&t0(e);break;case 22:if(we=a!==null&&a.memoizedState!==null,e.mode&1?(Wn=(fe=Wn)||we,ui(t,e),Wn=fe):ui(t,e),Di(e),f&8192){if(fe=e.memoizedState!==null,(e.stateNode.isHidden=fe)&&!we&&(e.mode&1)!==0)for(Ae=e,we=e.child;we!==null;){for(ke=Ae=we;Ae!==null;){switch(_e=Ae,Oe=_e.child,_e.tag){case 0:case 11:case 14:case 15:_u(4,_e,_e.return);break;case 1:ol(_e,_e.return);var Ie=_e.stateNode;if(typeof Ie.componentWillUnmount=="function"){f=_e,a=_e.return;try{t=f,Ie.props=t.memoizedProps,Ie.state=t.memoizedState,Ie.componentWillUnmount()}catch(Le){qt(f,a,Le)}}break;case 5:ol(_e,_e.return);break;case 22:if(_e.memoizedState!==null){s0(ke);continue}}Oe!==null?(Oe.return=_e,Ae=Oe):s0(ke)}we=we.sibling}e:for(we=null,ke=e;;){if(ke.tag===5){if(we===null){we=ke;try{y=ke.stateNode,fe?(P=y.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(Z=ke.stateNode,te=ke.memoizedProps.style,z=te!=null&&te.hasOwnProperty("display")?te.display:null,Z.style.display=vo("display",z))}catch(Le){qt(e,e.return,Le)}}}else if(ke.tag===6){if(we===null)try{ke.stateNode.nodeValue=fe?"":ke.memoizedProps}catch(Le){qt(e,e.return,Le)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===e)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===e)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===e)break e;we===ke&&(we=null),ke=ke.return}we===ke&&(we=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:ui(t,e),Di(e),f&4&&t0(e);break;case 21:break;default:ui(t,e),Di(e)}}function Di(e){var t=e.flags;if(t&2){try{e:{for(var a=e.return;a!==null;){if(Jf(a)){var f=a;break e}a=a.return}throw Error(s(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(Mt(y,""),f.flags&=-33);var P=Zf(e);Ch(e,P,y);break;case 3:case 4:var z=f.stateNode.containerInfo,Z=Zf(e);Eh(e,Z,z);break;default:throw Error(s(161))}}catch(te){qt(e,e.return,te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zm(e,t,a){Ae=e,r0(e)}function r0(e,t,a){for(var f=(e.mode&1)!==0;Ae!==null;){var y=Ae,P=y.child;if(y.tag===22&&f){var z=y.memoizedState!==null||gd;if(!z){var Z=y.alternate,te=Z!==null&&Z.memoizedState!==null||Wn;Z=gd;var fe=Wn;if(gd=z,(Wn=te)&&!fe)for(Ae=y;Ae!==null;)z=Ae,te=z.child,z.tag===22&&z.memoizedState!==null?o0(y):te!==null?(te.return=z,Ae=te):o0(y);for(;P!==null;)Ae=P,r0(P),P=P.sibling;Ae=y,gd=Z,Wn=fe}i0(e)}else(y.subtreeFlags&8772)!==0&&P!==null?(P.return=y,Ae=P):i0(e)}}function i0(e){for(;Ae!==null;){var t=Ae;if((t.flags&8772)!==0){var a=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Wn||md(5,t);break;case 1:var f=t.stateNode;if(t.flags&4&&!Wn)if(a===null)f.componentDidMount();else{var y=t.elementType===t.type?a.memoizedProps:gn(t.type,a.memoizedProps);f.componentDidUpdate(y,a.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var P=t.updateQueue;P!==null&&Nt(t,P,f);break;case 3:var z=t.updateQueue;if(z!==null){if(a=null,t.child!==null)switch(t.child.tag){case 5:a=t.child.stateNode;break;case 1:a=t.child.stateNode}Nt(t,z,a)}break;case 5:var Z=t.stateNode;if(a===null&&t.flags&4){a=Z;var te=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&a.focus();break;case"img":te.src&&(a.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var fe=t.alternate;if(fe!==null){var we=fe.memoizedState;if(we!==null){var ke=we.dehydrated;ke!==null&&Bn(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Wn||t.flags&512&&kh(t)}catch(_e){qt(t,t.return,_e)}}if(t===e){Ae=null;break}if(a=t.sibling,a!==null){a.return=t.return,Ae=a;break}Ae=t.return}}function s0(e){for(;Ae!==null;){var t=Ae;if(t===e){Ae=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ae=a;break}Ae=t.return}}function o0(e){for(;Ae!==null;){var t=Ae;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{md(4,t)}catch(te){qt(t,a,te)}break;case 1:var f=t.stateNode;if(typeof f.componentDidMount=="function"){var y=t.return;try{f.componentDidMount()}catch(te){qt(t,y,te)}}var P=t.return;try{kh(t)}catch(te){qt(t,P,te)}break;case 5:var z=t.return;try{kh(t)}catch(te){qt(t,z,te)}}}catch(te){qt(t,t.return,te)}if(t===e){Ae=null;break}var Z=t.sibling;if(Z!==null){Z.return=t.return,Ae=Z;break}Ae=t.return}}var Bm=Math.ceil,vd=R.ReactCurrentDispatcher,xh=R.ReactCurrentOwner,$r=R.ReactCurrentBatchConfig,at=0,Pn=null,on=null,Mn=0,Or=0,al=ni(0),mn=0,wu=null,$o=0,yd=0,Ph=0,Su=null,yr=null,bh=0,ll=1/0,gs=null,_d=!1,Th=null,io=null,wd=!1,so=null,Sd=0,ku=0,Rh=null,kd=-1,Ed=0;function ar(){return(at&6)!==0?It():kd!==-1?kd:kd=It()}function oo(e){return(e.mode&1)===0?1:(at&2)!==0&&Mn!==0?Mn&-Mn:lu.transition!==null?(Ed===0&&(Ed=Il()),Ed):(e=st,e!==0||(e=window.event,e=e===void 0?16:Dc(e.type)),e)}function ci(e,t,a,f){if(50<ku)throw ku=0,Rh=null,Error(s(185));So(e,a,f),((at&2)===0||e!==Pn)&&(e===Pn&&((at&2)===0&&(yd|=a),mn===4&&ao(e,Mn)),_r(e,f),a===1&&at===0&&(t.mode&1)===0&&(ll=It()+500,zs&&Ti()))}function _r(e,t){var a=e.callbackNode;Ac(e,t);var f=qi(e,e===Pn?Mn:0);if(f===0)a!==null&&Oc(a),e.callbackNode=null,e.callbackPriority=0;else if(t=f&-f,e.callbackPriority!==t){if(a!=null&&Oc(a),t===1)e.tag===0?ri(l0.bind(null,e)):Mo(l0.bind(null,e)),Jc(function(){(at&6)===0&&Ti()}),a=null;else{switch(ko(f)){case 1:a=Gi;break;case 4:a=ha;break;case 16:a=ks;break;case 536870912:a=fa;break;default:a=ks}a=m0(a,a0.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function a0(e,t){if(kd=-1,Ed=0,(at&6)!==0)throw Error(s(327));var a=e.callbackNode;if(ul()&&e.callbackNode!==a)return null;var f=qi(e,e===Pn?Mn:0);if(f===0)return null;if((f&30)!==0||(f&e.expiredLanes)!==0||t)t=Cd(e,f);else{t=f;var y=at;at|=2;var P=c0();(Pn!==e||Mn!==t)&&(gs=null,ll=It()+500,Yo(e,t));do try{Vm();break}catch(Z){u0(e,Z)}while(!0);Wa(),vd.current=P,at=y,on!==null?t=0:(Pn=null,Mn=0,t=mn)}if(t!==0){if(t===2&&(y=Es(e),y!==0&&(f=y,t=Oh(e,y))),t===1)throw a=wu,Yo(e,0),ao(e,f),_r(e,It()),a;if(t===6)ao(e,f);else{if(y=e.current.alternate,(f&30)===0&&!Gm(y)&&(t=Cd(e,f),t===2&&(P=Es(e),P!==0&&(f=P,t=Oh(e,P))),t===1))throw a=wu,Yo(e,0),ao(e,f),_r(e,It()),a;switch(e.finishedWork=y,e.finishedLanes=f,t){case 0:case 1:throw Error(s(345));case 2:Qo(e,yr,gs);break;case 3:if(ao(e,f),(f&130023424)===f&&(t=bh+500-It(),10<t)){if(qi(e,0)!==0)break;if(y=e.suspendedLanes,(y&f)!==f){ar(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=er(Qo.bind(null,e,yr,gs),t);break}Qo(e,yr,gs);break;case 4:if(ao(e,f),(f&4194240)===f)break;for(t=e.eventTimes,y=-1;0<f;){var z=31-Xe(f);P=1<<z,z=t[z],z>y&&(y=z),f&=~P}if(f=y,f=It()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Bm(f/1960))-f,10<f){e.timeoutHandle=er(Qo.bind(null,e,yr,gs),f);break}Qo(e,yr,gs);break;case 5:Qo(e,yr,gs);break;default:throw Error(s(329))}}}return _r(e,It()),e.callbackNode===a?a0.bind(null,e):null}function Oh(e,t){var a=Su;return e.current.memoizedState.isDehydrated&&(Yo(e,t).flags|=256),e=Cd(e,t),e!==2&&(t=yr,yr=a,t!==null&&Nh(t)),e}function Nh(e){yr===null?yr=e:yr.push.apply(yr,e)}function Gm(e){for(var t=e;;){if(t.flags&16384){var a=t.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var f=0;f<a.length;f++){var y=a[f],P=y.getSnapshot;y=y.value;try{if(!qn(P(),y))return!1}catch{return!1}}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ao(e,t){for(t&=~Ph,t&=~yd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-Xe(t),f=1<<a;e[a]=-1,t&=~f}}function l0(e){if((at&6)!==0)throw Error(s(327));ul();var t=qi(e,0);if((t&1)===0)return _r(e,It()),null;var a=Cd(e,t);if(e.tag!==0&&a===2){var f=Es(e);f!==0&&(t=f,a=Oh(e,f))}if(a===1)throw a=wu,Yo(e,0),ao(e,t),_r(e,It()),a;if(a===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qo(e,yr,gs),_r(e,It()),null}function Ah(e,t){var a=at;at|=1;try{return e(t)}finally{at=a,at===0&&(ll=It()+500,zs&&Ti())}}function Ko(e){so!==null&&so.tag===0&&(at&6)===0&&ul();var t=at;at|=1;var a=$r.transition,f=st;try{if($r.transition=null,st=1,e)return e()}finally{st=f,$r.transition=a,at=t,(at&6)===0&&Ti()}}function Ih(){Or=al.current,mt(al)}function Yo(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,iu(a)),on!==null)for(a=on.return;a!==null;){var f=a;switch(sn(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Us();break;case 3:bt(),mt(wn),mt(pn),kn();break;case 5:si(f);break;case 4:bt();break;case 13:mt(vt);break;case 19:mt(vt);break;case 10:$a(f.type._context);break;case 22:case 23:Ih()}a=a.return}if(Pn=e,on=e=lo(e.current,null),Mn=Or=t,mn=0,wu=null,Ph=yd=$o=0,yr=Su=null,Gr!==null){for(t=0;t<Gr.length;t++)if(a=Gr[t],f=a.interleaved,f!==null){a.interleaved=null;var y=f.next,P=a.pending;if(P!==null){var z=P.next;P.next=y,f.next=z}a.pending=f}Gr=null}return e}function u0(e,t){do{var a=on;try{if(Wa(),Ks.current=Zs,Rr){for(var f=ht.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}Rr=!1}if(jn=0,Bt=At=ht=null,Ii=!1,vr=0,xh.current=null,a===null||a.return===null){mn=1,wu=t,on=null;break}e:{var P=e,z=a.return,Z=a,te=t;if(t=Mn,Z.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var fe=te,we=Z,ke=we.tag;if((we.mode&1)===0&&(ke===0||ke===11||ke===15)){var _e=we.alternate;_e?(we.updateQueue=_e.updateQueue,we.memoizedState=_e.memoizedState,we.lanes=_e.lanes):(we.updateQueue=null,we.memoizedState=null)}var Oe=h(z);if(Oe!==null){Oe.flags&=-257,m(Oe,z,Z,P,t),Oe.mode&1&&i(P,fe,t),t=Oe,te=fe;var Ie=t.updateQueue;if(Ie===null){var Le=new Set;Le.add(te),t.updateQueue=Le}else Ie.add(te);break e}else{if((t&1)===0){i(P,fe,t),Lh();break e}te=Error(s(426))}}else if(ut&&Z.mode&1){var Jt=h(z);if(Jt!==null){(Jt.flags&65536)===0&&(Jt.flags|=256),m(Jt,z,Z,P,t),zo(ps(te,Z));break e}}P=te=ps(te,Z),mn!==4&&(mn=2),Su===null?Su=[P]:Su.push(P),P=z;do{switch(P.tag){case 3:P.flags|=65536,t&=-t,P.lanes|=t;var ue=pd(P,te,t);Vo(P,ue);break e;case 1:Z=te;var ne=P.type,de=P.stateNode;if((P.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(io===null||!io.has(de)))){P.flags|=65536,t&=-t,P.lanes|=t;var Ce=r(P,Z,t);Vo(P,Ce);break e}}P=P.return}while(P!==null)}h0(a)}catch(Fe){t=Fe,on===a&&a!==null&&(on=a=a.return);continue}break}while(!0)}function c0(){var e=vd.current;return vd.current=Zs,e===null?Zs:e}function Lh(){(mn===0||mn===3||mn===2)&&(mn=4),Pn===null||($o&268435455)===0&&(yd&268435455)===0||ao(Pn,Mn)}function Cd(e,t){var a=at;at|=2;var f=c0();(Pn!==e||Mn!==t)&&(gs=null,Yo(e,t));do try{qm();break}catch(y){u0(e,y)}while(!0);if(Wa(),at=a,vd.current=f,on!==null)throw Error(s(261));return Pn=null,Mn=0,mn}function qm(){for(;on!==null;)d0(on)}function Vm(){for(;on!==null&&!lh();)d0(on)}function d0(e){var t=g0(e.alternate,e,Or);e.memoizedProps=e.pendingProps,t===null?h0(e):on=t,xh.current=null}function h0(e){var t=e;do{var a=t.alternate;if(e=t.return,(t.flags&32768)===0){if(a=Fm(a,t,Or),a!==null){on=a;return}}else{if(a=Dm(a,t),a!==null){a.flags&=32767,on=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mn=6,on=null;return}}if(t=t.sibling,t!==null){on=t;return}on=t=e}while(t!==null);mn===0&&(mn=5)}function Qo(e,t,a){var f=st,y=$r.transition;try{$r.transition=null,st=1,Hm(e,t,a,f)}finally{$r.transition=y,st=f}return null}function Hm(e,t,a,f){do ul();while(so!==null);if((at&6)!==0)throw Error(s(327));a=e.finishedWork;var y=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var P=a.lanes|a.childLanes;if(dh(e,P),e===Pn&&(on=Pn=null,Mn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||wd||(wd=!0,m0(ks,function(){return ul(),null})),P=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||P){P=$r.transition,$r.transition=null;var z=st;st=1;var Z=at;at|=4,xh.current=null,Um(e,a),n0(a,e),Oo(nu),_a=!!tu,nu=tu=null,e.current=a,zm(a),uh(),at=Z,st=z,$r.transition=P}else e.current=a;if(wd&&(wd=!1,so=e,Sd=y),P=e.pendingLanes,P===0&&(io=null),_t(a.stateNode),_r(e,It()),t!==null)for(f=e.onRecoverableError,a=0;a<t.length;a++)y=t[a],f(y.value,{componentStack:y.stack,digest:y.digest});if(_d)throw _d=!1,e=Th,Th=null,e;return(Sd&1)!==0&&e.tag!==0&&ul(),P=e.pendingLanes,(P&1)!==0?e===Rh?ku++:(ku=0,Rh=e):ku=0,Ti(),null}function ul(){if(so!==null){var e=ko(Sd),t=$r.transition,a=st;try{if($r.transition=null,st=16>e?16:e,so===null)var f=!1;else{if(e=so,so=null,Sd=0,(at&6)!==0)throw Error(s(331));var y=at;for(at|=4,Ae=e.current;Ae!==null;){var P=Ae,z=P.child;if((Ae.flags&16)!==0){var Z=P.deletions;if(Z!==null){for(var te=0;te<Z.length;te++){var fe=Z[te];for(Ae=fe;Ae!==null;){var we=Ae;switch(we.tag){case 0:case 11:case 15:_u(8,we,P)}var ke=we.child;if(ke!==null)ke.return=we,Ae=ke;else for(;Ae!==null;){we=Ae;var _e=we.sibling,Oe=we.return;if(Xf(we),we===fe){Ae=null;break}if(_e!==null){_e.return=Oe,Ae=_e;break}Ae=Oe}}}var Ie=P.alternate;if(Ie!==null){var Le=Ie.child;if(Le!==null){Ie.child=null;do{var Jt=Le.sibling;Le.sibling=null,Le=Jt}while(Le!==null)}}Ae=P}}if((P.subtreeFlags&2064)!==0&&z!==null)z.return=P,Ae=z;else e:for(;Ae!==null;){if(P=Ae,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:_u(9,P,P.return)}var ue=P.sibling;if(ue!==null){ue.return=P.return,Ae=ue;break e}Ae=P.return}}var ne=e.current;for(Ae=ne;Ae!==null;){z=Ae;var de=z.child;if((z.subtreeFlags&2064)!==0&&de!==null)de.return=z,Ae=de;else e:for(z=ne;Ae!==null;){if(Z=Ae,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:md(9,Z)}}catch(Fe){qt(Z,Z.return,Fe)}if(Z===z){Ae=null;break e}var Ce=Z.sibling;if(Ce!==null){Ce.return=Z.return,Ae=Ce;break e}Ae=Z.return}}if(at=y,Ti(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Yr,e)}catch{}f=!0}return f}finally{st=a,$r.transition=t}}return!1}function f0(e,t,a){t=ps(a,t),t=pd(e,t,1),e=Hr(e,t,1),t=ar(),e!==null&&(So(e,1,t),_r(e,t))}function qt(e,t,a){if(e.tag===3)f0(e,e,a);else for(;t!==null;){if(t.tag===3){f0(t,e,a);break}else if(t.tag===1){var f=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(io===null||!io.has(f))){e=ps(a,e),e=r(t,e,1),t=Hr(t,e,1),e=ar(),t!==null&&(So(t,1,e),_r(t,e));break}}t=t.return}}function Wm(e,t,a){var f=e.pingCache;f!==null&&f.delete(t),t=ar(),e.pingedLanes|=e.suspendedLanes&a,Pn===e&&(Mn&a)===a&&(mn===4||mn===3&&(Mn&130023424)===Mn&&500>It()-bh?Yo(e,0):Ph|=a),_r(e,t)}function p0(e,t){t===0&&((e.mode&1)===0?t=1:(t=Qr,Qr<<=1,(Qr&130023424)===0&&(Qr=4194304)));var a=ar();e=sr(e,t),e!==null&&(So(e,t,a),_r(e,a))}function $m(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),p0(e,a)}function Km(e,t){var a=0;switch(e.tag){case 13:var f=e.stateNode,y=e.memoizedState;y!==null&&(a=y.retryLane);break;case 19:f=e.stateNode;break;default:throw Error(s(314))}f!==null&&f.delete(t),p0(e,a)}var g0;g0=function(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps||wn.current)O=!0;else{if((e.lanes&a)===0&&(t.flags&128)===0)return O=!1,_h(e,t,a);O=(e.flags&131072)!==0}else O=!1,ut&&(t.flags&1048576)!==0&&rd(t,Oi,t.index);switch(t.lanes=0,t.tag){case 2:var f=t.type;et(e,t),e=t.pendingProps;var y=ss(t,pn.current);ii(t,a),y=Ys(null,t,f,e,y,a);var P=Qs();return t.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sn(f)?(P=!0,os(t)):P=!1,t.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,qo(t),y.updater=to,t.stateNode=y,y._reactInternals=t,il(t,f,e,a),t=ct(null,t,f,!0,P,a)):(t.tag=0,ut&&P&&Bs(t),H(null,t,y,a),t=t.child),t;case 16:f=t.elementType;e:{switch(et(e,t),e=t.pendingProps,y=f._init,f=y(f._payload),t.type=f,y=t.tag=Qm(f),e=gn(f,e),y){case 0:t=be(null,t,f,e,a);break e;case 1:t=yt(null,t,f,e,a);break e;case 11:t=se(null,t,f,e,a);break e;case 14:t=pe(null,t,f,gn(f.type,e),a);break e}throw Error(s(306,f,""))}return t;case 0:return f=t.type,y=t.pendingProps,y=t.elementType===f?y:gn(f,y),be(e,t,f,y,a);case 1:return f=t.type,y=t.pendingProps,y=t.elementType===f?y:gn(f,y),yt(e,t,f,y,a);case 3:e:{if(Fn(t),e===null)throw Error(s(387));f=t.pendingProps,P=t.memoizedState,y=P.element,Ya(e,t),Hs(t,f,null,a);var z=t.memoizedState;if(f=z.element,P.isDehydrated)if(P={element:f,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},t.updateQueue.baseState=P,t.memoizedState=P,t.flags&256){y=ps(Error(s(423)),t),t=Wr(e,t,f,a,y);break e}else if(f!==y){y=ps(Error(s(424)),t),t=Wr(e,t,f,a,y);break e}else for(Pe=Mr(t.stateNode.containerInfo.firstChild),nr=t,ut=!0,rr=null,a=mr(t,null,f,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(cs(),f===y){t=xn(e,t,a);break e}H(e,t,f,a)}t=t.child}return t;case 5:return Ws(t),e===null&&Gs(t),f=t.type,y=t.pendingProps,P=e!==null?e.memoizedProps:null,z=y.children,ru(f,y)?z=null:P!==null&&ru(f,P)&&(t.flags|=32),We(e,t),H(e,t,z,a),t.child;case 6:return e===null&&Gs(t),null;case 13:return ge(e,t,a);case 4:return Ai(t,t.stateNode.containerInfo),f=t.pendingProps,e===null?t.child=ds(t,null,f,a):H(e,t,f,a),t.child;case 11:return f=t.type,y=t.pendingProps,y=t.elementType===f?y:gn(f,y),se(e,t,f,y,a);case 7:return H(e,t,t.pendingProps,a),t.child;case 8:return H(e,t,t.pendingProps.children,a),t.child;case 12:return H(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(f=t.type._context,y=t.pendingProps,P=t.memoizedProps,z=y.value,ft(Bo,f._currentValue),f._currentValue=z,P!==null)if(qn(P.value,z)){if(P.children===y.children&&!wn.current){t=xn(e,t,a);break e}}else for(P=t.child,P!==null&&(P.return=t);P!==null;){var Z=P.dependencies;if(Z!==null){z=P.child;for(var te=Z.firstContext;te!==null;){if(te.context===f){if(P.tag===1){te=Vr(-1,a&-a),te.tag=2;var fe=P.updateQueue;if(fe!==null){fe=fe.shared;var we=fe.pending;we===null?te.next=te:(te.next=we.next,we.next=te),fe.pending=te}}P.lanes|=a,te=P.alternate,te!==null&&(te.lanes|=a),Ka(P.return,a,t),Z.lanes|=a;break}te=te.next}}else if(P.tag===10)z=P.type===t.type?null:P.child;else if(P.tag===18){if(z=P.return,z===null)throw Error(s(341));z.lanes|=a,Z=z.alternate,Z!==null&&(Z.lanes|=a),Ka(z,a,t),z=P.sibling}else z=P.child;if(z!==null)z.return=P;else for(z=P;z!==null;){if(z===t){z=null;break}if(P=z.sibling,P!==null){P.return=z.return,z=P;break}z=z.return}P=z}H(e,t,y.children,a),t=t.child}return t;case 9:return y=t.type,f=t.pendingProps.children,ii(t,a),y=Ln(y),f=f(y),t.flags|=1,H(e,t,f,a),t.child;case 14:return f=t.type,y=gn(f,t.pendingProps),y=gn(f.type,y),pe(e,t,f,y,a);case 15:return Ee(e,t,t.type,t.pendingProps,a);case 17:return f=t.type,y=t.pendingProps,y=t.elementType===f?y:gn(f,y),et(e,t),t.tag=1,Sn(f)?(e=!0,os(t)):e=!1,ii(t,a),fd(t,f,y),il(t,f,y,a),ct(null,t,f,!0,e,a);case 19:return Xt(e,t,a);case 22:return Ne(e,t,a)}throw Error(s(156,t.tag))};function m0(e,t){return Rc(e,t)}function Ym(e,t,a,f){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(e,t,a,f){return new Ym(e,t,a,f)}function jh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qm(e){if(typeof e=="function")return jh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===K)return 11;if(e===Y)return 14}return 2}function lo(e,t){var a=e.alternate;return a===null?(a=Kr(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function xd(e,t,a,f,y,P){var z=2;if(f=e,typeof e=="function")jh(e)&&(z=1);else if(typeof e=="string")z=5;else e:switch(e){case W:return Xo(a.children,y,P,t);case j:z=8,y|=8;break;case F:return e=Kr(12,a,t,y|2),e.elementType=F,e.lanes=P,e;case $:return e=Kr(13,a,t,y),e.elementType=$,e.lanes=P,e;case J:return e=Kr(19,a,t,y),e.elementType=J,e.lanes=P,e;case A:return Pd(a,y,P,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case G:z=10;break e;case B:z=9;break e;case K:z=11;break e;case Y:z=14;break e;case oe:z=16,f=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=Kr(z,a,t,y),t.elementType=e,t.type=f,t.lanes=P,t}function Xo(e,t,a,f){return e=Kr(7,e,f,t),e.lanes=a,e}function Pd(e,t,a,f){return e=Kr(22,e,f,t),e.elementType=A,e.lanes=a,e.stateNode={isHidden:!1},e}function Fh(e,t,a){return e=Kr(6,e,null,t),e.lanes=a,e}function Dh(e,t,a){return t=Kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xm(e,t,a,f,y){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yn(0),this.expirationTimes=Yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Mh(e,t,a,f,y,P,z,Z,te){return e=new Xm(e,t,a,Z,te),t===1?(t=1,P===!0&&(t|=8)):t=0,P=Kr(3,null,null,t),e.current=P,P.stateNode=e,P.memoizedState={element:f,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},qo(P),e}function Jm(e,t,a){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:f==null?null:""+f,children:e,containerInfo:t,implementation:a}}function v0(e){if(!e)return zr;e=e._reactInternals;e:{if(Bi(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var a=e.type;if(Sn(a))return Ba(e,a,t)}return t}function y0(e,t,a,f,y,P,z,Z,te){return e=Mh(a,f,!0,e,y,P,z,Z,te),e.context=v0(null),a=e.current,f=ar(),y=oo(a),P=Vr(f,y),P.callback=t??null,Hr(a,P,y),e.current.lanes=y,So(e,y,f),_r(e,f),e}function bd(e,t,a,f){var y=t.current,P=ar(),z=oo(y);return a=v0(a),t.context===null?t.context=a:t.pendingContext=a,t=Vr(P,z),t.payload={element:e},f=f===void 0?null:f,f!==null&&(t.callback=f),e=Hr(y,t,z),e!==null&&(ci(e,y,z,P),Qa(e,y,z)),z}function Td(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Uh(e,t){_0(e,t),(e=e.alternate)&&_0(e,t)}function Zm(){return null}var w0=typeof reportError=="function"?reportError:function(e){console.error(e)};function zh(e){this._internalRoot=e}Rd.prototype.render=zh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));bd(e,t,null,null)},Rd.prototype.unmount=zh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ko(function(){bd(null,e,null,null)}),t[Ur]=null}};function Rd(e){this._internalRoot=e}Rd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lc();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Dr.length&&t!==0&&t<Dr[a].priority;a++);Dr.splice(a,0,e),a===0&&ma(e)}};function Bh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Od(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function S0(){}function e1(e,t,a,f,y){if(y){if(typeof f=="function"){var P=f;f=function(){var fe=Td(z);P.call(fe)}}var z=y0(t,f,e,0,null,!1,!1,"",S0);return e._reactRootContainer=z,e[Ur]=z.current,es(e.nodeType===8?e.parentNode:e),Ko(),z}for(;y=e.lastChild;)e.removeChild(y);if(typeof f=="function"){var Z=f;f=function(){var fe=Td(te);Z.call(fe)}}var te=Mh(e,0,!1,null,null,!1,!1,"",S0);return e._reactRootContainer=te,e[Ur]=te.current,es(e.nodeType===8?e.parentNode:e),Ko(function(){bd(t,te,a,f)}),te}function Nd(e,t,a,f,y){var P=a._reactRootContainer;if(P){var z=P;if(typeof y=="function"){var Z=y;y=function(){var te=Td(z);Z.call(te)}}bd(t,z,e,y)}else z=e1(a,t,e,y,f);return Td(z)}Cs=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=en(t.pendingLanes);a!==0&&(Ll(t,a|1),_r(t,It()),(at&6)===0&&(ll=It()+500,Ti()))}break;case 13:Ko(function(){var f=sr(e,1);if(f!==null){var y=ar();ci(f,e,1,y)}}),Uh(e,1)}},xs=function(e){if(e.tag===13){var t=sr(e,134217728);if(t!==null){var a=ar();ci(t,e,134217728,a)}Uh(e,134217728)}},Ic=function(e){if(e.tag===13){var t=oo(e),a=sr(e,t);if(a!==null){var f=ar();ci(a,e,t,f)}Uh(e,t)}},Lc=function(){return st},pa=function(e,t){var a=st;try{return st=e,t()}finally{st=a}},bl=function(e,t,a){switch(t){case"input":if(ot(e,a),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var f=a[t];if(f!==e&&f.form===e.form){var y=rn(f);if(!y)throw Error(s(90));ze(f),ot(f,y)}}}break;case"textarea":ln(e,a);break;case"select":t=a.value,t!=null&&cr(e,!!a.multiple,t,!1)}},Ec=Ah,la=Ko;var t1={usingClientEntryPoint:!1,Events:[Do,Kt,rn,Tl,Rl,Ah]},Eu={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n1={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bc(e),e===null?null:e.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||Zm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ad.isDisabled&&Ad.supportsFiber)try{Yr=Ad.inject(n1),cn=Ad}catch{}}return wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t1,wr.createPortal=function(e,t){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bh(t))throw Error(s(200));return Jm(e,t,null,a)},wr.createRoot=function(e,t){if(!Bh(e))throw Error(s(299));var a=!1,f="",y=w0;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(f=t.identifierPrefix),t.onRecoverableError!==void 0&&(y=t.onRecoverableError)),t=Mh(e,1,!1,null,null,a,!1,f,y),e[Ur]=t.current,es(e.nodeType===8?e.parentNode:e),new zh(t)},wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=bc(t),e=e===null?null:e.stateNode,e},wr.flushSync=function(e){return Ko(e)},wr.hydrate=function(e,t,a){if(!Od(t))throw Error(s(200));return Nd(null,e,t,!0,a)},wr.hydrateRoot=function(e,t,a){if(!Bh(e))throw Error(s(405));var f=a!=null&&a.hydratedSources||null,y=!1,P="",z=w0;if(a!=null&&(a.unstable_strictMode===!0&&(y=!0),a.identifierPrefix!==void 0&&(P=a.identifierPrefix),a.onRecoverableError!==void 0&&(z=a.onRecoverableError)),t=y0(t,null,e,1,a??null,y,!1,P,z),e[Ur]=t.current,es(e),f)for(e=0;e<f.length;e++)a=f[e],y=a._getVersion,y=y(a._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,y]:t.mutableSourceEagerHydrationData.push(a,y);return new Rd(t)},wr.render=function(e,t,a){if(!Od(t))throw Error(s(200));return Nd(null,e,t,!1,a)},wr.unmountComponentAtNode=function(e){if(!Od(e))throw Error(s(40));return e._reactRootContainer?(Ko(function(){Nd(null,null,e,!1,function(){e._reactRootContainer=null,e[Ur]=null})}),!0):!1},wr.unstable_batchedUpdates=Ah,wr.unstable_renderSubtreeIntoContainer=function(e,t,a,f){if(!Od(a))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Nd(e,t,a,!1,f)},wr.version="18.3.1-next-f1338f8080-20240426",wr}var O0;function c1(){if(O0)return Vh.exports;O0=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Vh.exports=u1(),Vh.exports}var N0;function d1(){if(N0)return Id;N0=1;var o=c1();return Id.createRoot=o.createRoot,Id.hydrateRoot=o.hydrateRoot,Id}var h1=d1(),mf=function(o,n){return mf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])},mf(o,n)};function xg(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");mf(o,n);function s(){this.constructor=o}o.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}var Hd=function(){return Hd=Object.assign||function(n){for(var s,l=1,d=arguments.length;l<d;l++){s=arguments[l];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},Hd.apply(this,arguments)};function kl(o,n){var s={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&n.indexOf(l)<0&&(s[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(o);d<l.length;d++)n.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(o,l[d])&&(s[l[d]]=o[l[d]]);return s}function Pg(o,n,s,l){var d=arguments.length,c=d<3?n:l===null?l=Object.getOwnPropertyDescriptor(n,s):l,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,n,s,l);else for(var p=o.length-1;p>=0;p--)(u=o[p])&&(c=(d<3?u(c):d>3?u(n,s,c):u(n,s))||c);return d>3&&c&&Object.defineProperty(n,s,c),c}function bg(o,n){return function(s,l){n(s,l,o)}}function Tg(o,n,s,l,d,c){function u(L){if(L!==void 0&&typeof L!="function")throw new TypeError("Function expected");return L}for(var p=l.kind,g=p==="getter"?"get":p==="setter"?"set":"value",v=!n&&o?l.static?o:o.prototype:null,k=n||(v?Object.getOwnPropertyDescriptor(v,l.name):{}),T,E=!1,S=s.length-1;S>=0;S--){var C={};for(var b in l)C[b]=b==="access"?{}:l[b];for(var b in l.access)C.access[b]=l.access[b];C.addInitializer=function(L){if(E)throw new TypeError("Cannot add initializers after decoration has completed");c.push(u(L||null))};var N=(0,s[S])(p==="accessor"?{get:k.get,set:k.set}:k[g],C);if(p==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(T=u(N.get))&&(k.get=T),(T=u(N.set))&&(k.set=T),(T=u(N.init))&&d.unshift(T)}else(T=u(N))&&(p==="field"?d.unshift(T):k[g]=T)}v&&Object.defineProperty(v,l.name,k),E=!0}function Rg(o,n,s){for(var l=arguments.length>2,d=0;d<n.length;d++)s=l?n[d].call(o,s):n[d].call(o);return l?s:void 0}function Og(o){return typeof o=="symbol"?o:"".concat(o)}function Ng(o,n,s){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:s?"".concat(s," ",n):n})}function Ag(o,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,n)}function je(o,n,s,l){function d(c){return c instanceof s?c:new s(function(u){u(c)})}return new(s||(s=Promise))(function(c,u){function p(k){try{v(l.next(k))}catch(T){u(T)}}function g(k){try{v(l.throw(k))}catch(T){u(T)}}function v(k){k.done?c(k.value):d(k.value).then(p,g)}v((l=l.apply(o,n||[])).next())})}function Ig(o,n){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},l,d,c,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=p(0),u.throw=p(1),u.return=p(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function p(v){return function(k){return g([v,k])}}function g(v){if(l)throw new TypeError("Generator is already executing.");for(;u&&(u=0,v[0]&&(s=0)),s;)try{if(l=1,d&&(c=v[0]&2?d.return:v[0]?d.throw||((c=d.return)&&c.call(d),0):d.next)&&!(c=c.call(d,v[1])).done)return c;switch(d=0,c&&(v=[v[0]&2,c.value]),v[0]){case 0:case 1:c=v;break;case 4:return s.label++,{value:v[1],done:!1};case 5:s.label++,d=v[1],v=[0];continue;case 7:v=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(v[0]===6||v[0]===2)){s=0;continue}if(v[0]===3&&(!c||v[1]>c[0]&&v[1]<c[3])){s.label=v[1];break}if(v[0]===6&&s.label<c[1]){s.label=c[1],c=v;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(v);break}c[2]&&s.ops.pop(),s.trys.pop();continue}v=n.call(o,s)}catch(k){v=[6,k],d=0}finally{l=c=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}var Jd=Object.create?(function(o,n,s,l){l===void 0&&(l=s);var d=Object.getOwnPropertyDescriptor(n,s);(!d||("get"in d?!n.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(o,l,d)}):(function(o,n,s,l){l===void 0&&(l=s),o[l]=n[s]});function Lg(o,n){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&Jd(n,o,s)}function Wd(o){var n=typeof Symbol=="function"&&Symbol.iterator,s=n&&o[n],l=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Af(o,n){var s=typeof Symbol=="function"&&o[Symbol.iterator];if(!s)return o;var l=s.call(o),d,c=[],u;try{for(;(n===void 0||n-- >0)&&!(d=l.next()).done;)c.push(d.value)}catch(p){u={error:p}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(u)throw u.error}}return c}function jg(){for(var o=[],n=0;n<arguments.length;n++)o=o.concat(Af(arguments[n]));return o}function Fg(){for(var o=0,n=0,s=arguments.length;n<s;n++)o+=arguments[n].length;for(var l=Array(o),d=0,n=0;n<s;n++)for(var c=arguments[n],u=0,p=c.length;u<p;u++,d++)l[d]=c[u];return l}function Dg(o,n,s){if(s||arguments.length===2)for(var l=0,d=n.length,c;l<d;l++)(c||!(l in n))&&(c||(c=Array.prototype.slice.call(n,0,l)),c[l]=n[l]);return o.concat(c||Array.prototype.slice.call(n))}function wl(o){return this instanceof wl?(this.v=o,this):new wl(o)}function Mg(o,n,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=s.apply(o,n||[]),d,c=[];return d=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",u),d[Symbol.asyncIterator]=function(){return this},d;function u(S){return function(C){return Promise.resolve(C).then(S,T)}}function p(S,C){l[S]&&(d[S]=function(b){return new Promise(function(N,L){c.push([S,b,N,L])>1||g(S,b)})},C&&(d[S]=C(d[S])))}function g(S,C){try{v(l[S](C))}catch(b){E(c[0][3],b)}}function v(S){S.value instanceof wl?Promise.resolve(S.value.v).then(k,T):E(c[0][2],S)}function k(S){g("next",S)}function T(S){g("throw",S)}function E(S,C){S(C),c.shift(),c.length&&g(c[0][0],c[0][1])}}function Ug(o){var n,s;return n={},l("next"),l("throw",function(d){throw d}),l("return"),n[Symbol.iterator]=function(){return this},n;function l(d,c){n[d]=o[d]?function(u){return(s=!s)?{value:wl(o[d](u)),done:!1}:c?c(u):u}:c}}function zg(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],s;return n?n.call(o):(o=typeof Wd=="function"?Wd(o):o[Symbol.iterator](),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(c){s[c]=o[c]&&function(u){return new Promise(function(p,g){u=o[c](u),d(p,g,u.done,u.value)})}}function d(c,u,p,g){Promise.resolve(g).then(function(v){c({value:v,done:p})},u)}}function Bg(o,n){return Object.defineProperty?Object.defineProperty(o,"raw",{value:n}):o.raw=n,o}var f1=Object.create?(function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}):function(o,n){o.default=n},vf=function(o){return vf=Object.getOwnPropertyNames||function(n){var s=[];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(s[s.length]=l);return s},vf(o)};function Gg(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var s=vf(o),l=0;l<s.length;l++)s[l]!=="default"&&Jd(n,o,s[l]);return f1(n,o),n}function qg(o){return o&&o.__esModule?o:{default:o}}function Vg(o,n,s,l){if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?o!==n||!l:!n.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?l:s==="a"?l.call(o):l?l.value:n.get(o)}function Hg(o,n,s,l,d){if(l==="m")throw new TypeError("Private method is not writable");if(l==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?o!==n||!d:!n.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l==="a"?d.call(o,s):d?d.value=s:n.set(o,s),s}function Wg(o,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?n===o:o.has(n)}function $g(o,n,s){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var l,d;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");l=n[Symbol.asyncDispose]}if(l===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");l=n[Symbol.dispose],s&&(d=l)}if(typeof l!="function")throw new TypeError("Object not disposable.");d&&(l=function(){try{d.call(this)}catch(c){return Promise.reject(c)}}),o.stack.push({value:n,dispose:l,async:s})}else s&&o.stack.push({async:!0});return n}var p1=typeof SuppressedError=="function"?SuppressedError:function(o,n,s){var l=new Error(s);return l.name="SuppressedError",l.error=o,l.suppressed=n,l};function Kg(o){function n(c){o.error=o.hasError?new p1(c,o.error,"An error was suppressed during disposal."):c,o.hasError=!0}var s,l=0;function d(){for(;s=o.stack.pop();)try{if(!s.async&&l===1)return l=0,o.stack.push(s),Promise.resolve().then(d);if(s.dispose){var c=s.dispose.call(s.value);if(s.async)return l|=2,Promise.resolve(c).then(d,function(u){return n(u),d()})}else l|=1}catch(u){n(u)}if(l===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return d()}function Yg(o,n){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,l,d,c,u){return l?n?".jsx":".js":d&&(!c||!u)?s:d+c+"."+u.toLowerCase()+"js"}):o}const g1={__extends:xg,__assign:Hd,__rest:kl,__decorate:Pg,__param:bg,__esDecorate:Tg,__runInitializers:Rg,__propKey:Og,__setFunctionName:Ng,__metadata:Ag,__awaiter:je,__generator:Ig,__createBinding:Jd,__exportStar:Lg,__values:Wd,__read:Af,__spread:jg,__spreadArrays:Fg,__spreadArray:Dg,__await:wl,__asyncGenerator:Mg,__asyncDelegator:Ug,__asyncValues:zg,__makeTemplateObject:Bg,__importStar:Gg,__importDefault:qg,__classPrivateFieldGet:Vg,__classPrivateFieldSet:Hg,__classPrivateFieldIn:Wg,__addDisposableResource:$g,__disposeResources:Kg,__rewriteRelativeImportExtension:Yg},m1=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$g,get __assign(){return Hd},__asyncDelegator:Ug,__asyncGenerator:Mg,__asyncValues:zg,__await:wl,__awaiter:je,__classPrivateFieldGet:Vg,__classPrivateFieldIn:Wg,__classPrivateFieldSet:Hg,__createBinding:Jd,__decorate:Pg,__disposeResources:Kg,__esDecorate:Tg,__exportStar:Lg,__extends:xg,__generator:Ig,__importDefault:qg,__importStar:Gg,__makeTemplateObject:Bg,__metadata:Ag,__param:bg,__propKey:Og,__read:Af,__rest:kl,__rewriteRelativeImportExtension:Yg,__runInitializers:Rg,__setFunctionName:Ng,__spread:jg,__spreadArray:Dg,__spreadArrays:Fg,__values:Wd,default:g1},Symbol.toStringTag,{value:"Module"})),v1="modulepreload",y1=function(o){return"/CelPhone/"+o},A0={},sa=function(n,s,l){let d=Promise.resolve();if(s&&s.length>0){let g=function(v){return Promise.all(v.map(k=>Promise.resolve(k).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),p=u?.nonce||u?.getAttribute("nonce");d=g(s.map(v=>{if(v=y1(v),v in A0)return;A0[v]=!0;const k=v.endsWith(".css"),T=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${T}`))return;const E=document.createElement("link");if(E.rel=k?"stylesheet":v1,k||(E.as="script"),E.crossOrigin="",E.href=v,p&&E.setAttribute("nonce",p),document.head.appendChild(E),k)return new Promise((S,C)=>{E.addEventListener("load",S),E.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return d.then(u=>{for(const p of u||[])p.status==="rejected"&&c(p.reason);return n().catch(c)})},_1=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>sa(async()=>{const{default:l}=await Promise.resolve().then(()=>oa);return{default:l}},void 0).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)};class If extends Error{constructor(n,s="FunctionsError",l){super(n),this.name=s,this.context=l}}class I0 extends If{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class L0 extends If{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class j0 extends If{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var yf;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(yf||(yf={}));class w1{constructor(n,{headers:s={},customFetch:l,region:d=yf.Any}={}){this.url=n,this.headers=s,this.region=d,this.fetch=_1(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return je(this,arguments,void 0,function*(s,l={}){var d;try{const{headers:c,method:u,body:p,signal:g}=l;let v={},{region:k}=l;k||(k=this.region);const T=new URL(`${this.url}/${s}`);k&&k!=="any"&&(v["x-region"]=k,T.searchParams.set("forceFunctionRegion",k));let E;p&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",E=p):typeof p=="string"?(v["Content-Type"]="text/plain",E=p):typeof FormData<"u"&&p instanceof FormData?E=p:(v["Content-Type"]="application/json",E=JSON.stringify(p)):E=p;const S=yield this.fetch(T.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),c),body:E,signal:g}).catch(L=>{throw L.name==="AbortError"?L:new I0(L)}),C=S.headers.get("x-relay-error");if(C&&C==="true")throw new L0(S);if(!S.ok)throw new j0(S);let b=((d=S.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),N;return b==="application/json"?N=yield S.json():b==="application/octet-stream"||b==="application/pdf"?N=yield S.blob():b==="text/event-stream"?N=S:b==="multipart/form-data"?N=yield S.formData():N=yield S.text(),{data:N,error:null,response:S}}catch(c){return c instanceof Error&&c.name==="AbortError"?{data:null,error:new I0(c)}:{data:null,error:c,response:c instanceof j0||c instanceof L0?c.context:void 0}}})}}var $n={};const El=Cg(m1);var Ld={},jd={},Fd={},Dd={},Md={},S1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sl=S1();const k1=Sl.fetch,Qg=Sl.fetch.bind(Sl),Xg=Sl.Headers,E1=Sl.Request,C1=Sl.Response,oa=Object.freeze(Object.defineProperty({__proto__:null,Headers:Xg,Request:E1,Response:C1,default:Qg,fetch:k1},Symbol.toStringTag,{value:"Module"})),x1=Cg(oa);var Ud={},F0;function Jg(){if(F0)return Ud;F0=1,Object.defineProperty(Ud,"__esModule",{value:!0});class o extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Ud.default=o,Ud}var D0;function Zg(){if(D0)return Md;D0=1,Object.defineProperty(Md,"__esModule",{value:!0});const o=El,n=o.__importDefault(x1),s=o.__importDefault(Jg());class l{constructor(c){var u,p;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(p=c.isMaybeSingle)!==null&&p!==void 0?p:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async v=>{var k,T,E,S;let C=null,b=null,N=null,L=v.status,x=v.statusText;if(v.ok){if(this.method!=="HEAD"){const U=await v.text();U===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((k=this.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?b=U:b=JSON.parse(U))}const R=(T=this.headers.get("Prefer"))===null||T===void 0?void 0:T.match(/count=(exact|planned|estimated)/),I=(E=v.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");R&&I&&I.length>1&&(N=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(C={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,N=null,L=406,x="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const R=await v.text();try{C=JSON.parse(R),Array.isArray(C)&&v.status===404&&(b=[],C=null,L=200,x="OK")}catch{v.status===404&&R===""?(L=204,x="No Content"):C={message:R}}if(C&&this.isMaybeSingle&&(!((S=C?.details)===null||S===void 0)&&S.includes("0 rows"))&&(C=null,L=200,x="OK"),C&&this.shouldThrowOnError)throw new s.default(C)}return{error:C,data:b,count:N,status:L,statusText:x}});return this.shouldThrowOnError||(g=g.catch(v=>{var k,T,E;return{error:{message:`${(k=v?.name)!==null&&k!==void 0?k:"FetchError"}: ${v?.message}`,details:`${(T=v?.stack)!==null&&T!==void 0?T:""}`,hint:"",code:`${(E=v?.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),g.then(c,u)}returns(){return this}overrideTypes(){return this}}return Md.default=l,Md}var M0;function em(){if(M0)return Dd;M0=1,Object.defineProperty(Dd,"__esModule",{value:!0});const n=El.__importDefault(Zg());class s extends n.default{select(d){let c=!1;const u=(d??"*").split("").map(p=>/\s/.test(p)&&!c?"":(p==='"'&&(c=!c),p)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:c=!0,nullsFirst:u,foreignTable:p,referencedTable:g=p}={}){const v=g?`${g}.order`:"order",k=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${k?`${k},`:""}${d}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(d,{foreignTable:c,referencedTable:u=c}={}){const p=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(p,`${d}`),this}range(d,c,{foreignTable:u,referencedTable:p=u}={}){const g=typeof p>"u"?"offset":`${p}.offset`,v=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${d}`),this.url.searchParams.set(v,`${c-d+1}`),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:c=!1,settings:u=!1,buffers:p=!1,wal:g=!1,format:v="text"}={}){var k;const T=[d?"analyze":null,c?"verbose":null,u?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),E=(k=this.headers.get("Accept"))!==null&&k!==void 0?k:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${E}"; options=${T};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${d}`),this}}return Dd.default=s,Dd}var U0;function Lf(){if(U0)return Fd;U0=1,Object.defineProperty(Fd,"__esModule",{value:!0});const n=El.__importDefault(em()),s=new RegExp("[,()]");class l extends n.default{eq(c,u){return this.url.searchParams.append(c,`eq.${u}`),this}neq(c,u){return this.url.searchParams.append(c,`neq.${u}`),this}gt(c,u){return this.url.searchParams.append(c,`gt.${u}`),this}gte(c,u){return this.url.searchParams.append(c,`gte.${u}`),this}lt(c,u){return this.url.searchParams.append(c,`lt.${u}`),this}lte(c,u){return this.url.searchParams.append(c,`lte.${u}`),this}like(c,u){return this.url.searchParams.append(c,`like.${u}`),this}likeAllOf(c,u){return this.url.searchParams.append(c,`like(all).{${u.join(",")}}`),this}likeAnyOf(c,u){return this.url.searchParams.append(c,`like(any).{${u.join(",")}}`),this}ilike(c,u){return this.url.searchParams.append(c,`ilike.${u}`),this}ilikeAllOf(c,u){return this.url.searchParams.append(c,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(c,u){return this.url.searchParams.append(c,`ilike(any).{${u.join(",")}}`),this}is(c,u){return this.url.searchParams.append(c,`is.${u}`),this}in(c,u){const p=Array.from(new Set(u)).map(g=>typeof g=="string"&&s.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(c,`in.(${p})`),this}contains(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cs.{${u.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(u)}`),this}containedBy(c,u){return typeof u=="string"?this.url.searchParams.append(c,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(c,`cd.{${u.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(u)}`),this}rangeGt(c,u){return this.url.searchParams.append(c,`sr.${u}`),this}rangeGte(c,u){return this.url.searchParams.append(c,`nxl.${u}`),this}rangeLt(c,u){return this.url.searchParams.append(c,`sl.${u}`),this}rangeLte(c,u){return this.url.searchParams.append(c,`nxr.${u}`),this}rangeAdjacent(c,u){return this.url.searchParams.append(c,`adj.${u}`),this}overlaps(c,u){return typeof u=="string"?this.url.searchParams.append(c,`ov.${u}`):this.url.searchParams.append(c,`ov.{${u.join(",")}}`),this}textSearch(c,u,{config:p,type:g}={}){let v="";g==="plain"?v="pl":g==="phrase"?v="ph":g==="websearch"&&(v="w");const k=p===void 0?"":`(${p})`;return this.url.searchParams.append(c,`${v}fts${k}.${u}`),this}match(c){return Object.entries(c).forEach(([u,p])=>{this.url.searchParams.append(u,`eq.${p}`)}),this}not(c,u,p){return this.url.searchParams.append(c,`not.${u}.${p}`),this}or(c,{foreignTable:u,referencedTable:p=u}={}){const g=p?`${p}.or`:"or";return this.url.searchParams.append(g,`(${c})`),this}filter(c,u,p){return this.url.searchParams.append(c,`${u}.${p}`),this}}return Fd.default=l,Fd}var z0;function tm(){if(z0)return jd;z0=1,Object.defineProperty(jd,"__esModule",{value:!0});const n=El.__importDefault(Lf());class s{constructor(d,{headers:c={},schema:u,fetch:p}){this.url=d,this.headers=new Headers(c),this.schema=u,this.fetch=p}select(d,c){const{head:u=!1,count:p}=c??{},g=u?"HEAD":"GET";let v=!1;const k=(d??"*").split("").map(T=>/\s/.test(T)&&!v?"":(T==='"'&&(v=!v),T)).join("");return this.url.searchParams.set("select",k),p&&this.headers.append("Prefer",`count=${p}`),new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:c,defaultToNull:u=!0}={}){var p;const g="POST";if(c&&this.headers.append("Prefer",`count=${c}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const v=d.reduce((k,T)=>k.concat(Object.keys(T)),[]);if(v.length>0){const k=[...new Set(v)].map(T=>`"${T}"`);this.url.searchParams.set("columns",k.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(d,{onConflict:c,ignoreDuplicates:u=!1,count:p,defaultToNull:g=!0}={}){var v;const k="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const T=d.reduce((E,S)=>E.concat(Object.keys(S)),[]);if(T.length>0){const E=[...new Set(T)].map(S=>`"${S}"`);this.url.searchParams.set("columns",E.join(","))}}return new n.default({method:k,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(d,{count:c}={}){var u;const p="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:d}={}){var c;const u="DELETE";return d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return jd.default=s,jd}var B0;function P1(){if(B0)return Ld;B0=1,Object.defineProperty(Ld,"__esModule",{value:!0});const o=El,n=o.__importDefault(tm()),s=o.__importDefault(Lf());class l{constructor(c,{headers:u={},schema:p,fetch:g}={}){this.url=c,this.headers=new Headers(u),this.schemaName=p,this.fetch=g}from(c){const u=new URL(`${this.url}/${c}`);return new n.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new l(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:p=!1,get:g=!1,count:v}={}){var k;let T;const E=new URL(`${this.url}/rpc/${c}`);let S;p||g?(T=p?"HEAD":"GET",Object.entries(u).filter(([b,N])=>N!==void 0).map(([b,N])=>[b,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([b,N])=>{E.searchParams.append(b,N)})):(T="POST",S=u);const C=new Headers(this.headers);return v&&C.set("Prefer",`count=${v}`),new s.default({method:T,url:E,headers:C,schema:this.schemaName,body:S,fetch:(k=this.fetch)!==null&&k!==void 0?k:fetch})}}return Ld.default=l,Ld}var G0;function b1(){if(G0)return $n;G0=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.PostgrestError=$n.PostgrestBuilder=$n.PostgrestTransformBuilder=$n.PostgrestFilterBuilder=$n.PostgrestQueryBuilder=$n.PostgrestClient=void 0;const o=El,n=o.__importDefault(P1());$n.PostgrestClient=n.default;const s=o.__importDefault(tm());$n.PostgrestQueryBuilder=s.default;const l=o.__importDefault(Lf());$n.PostgrestFilterBuilder=l.default;const d=o.__importDefault(em());$n.PostgrestTransformBuilder=d.default;const c=o.__importDefault(Zg());$n.PostgrestBuilder=c.default;const u=o.__importDefault(Jg());return $n.PostgrestError=u.default,$n.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:c.default,PostgrestError:u.default},$n}var nm=b1();const rm=Qd(nm),T1=i1({__proto__:null,default:rm},[nm]),{PostgrestClient:R1,PostgrestQueryBuilder:rw,PostgrestFilterBuilder:iw,PostgrestTransformBuilder:sw,PostgrestBuilder:ow,PostgrestError:aw}=rm||T1;class O1{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const l=s.node,d=parseInt(l.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const l=this.getWebSocketConstructor();return new l(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const N1="2.78.0",A1=`realtime-js/${N1}`,I1="1.0.0",_f=1e4,L1=1e3,j1=100;var pc;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(pc||(pc={}));var vn;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(vn||(vn={}));var pi;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(pi||(pi={}));var wf;(function(o){o.websocket="websocket"})(wf||(wf={}));var na;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(na||(na={}));class F1{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),l=new TextDecoder;return this._decodeBroadcast(n,s,l)}_decodeBroadcast(n,s,l){const d=s.getUint8(1),c=s.getUint8(2);let u=this.HEADER_LENGTH+2;const p=l.decode(n.slice(u,u+d));u=u+d;const g=l.decode(n.slice(u,u+c));u=u+c;const v=JSON.parse(l.decode(n.slice(u,n.byteLength)));return{ref:null,topic:p,event:g,payload:v}}}class im{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tt;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Tt||(Tt={}));const q0=(o,n,s={})=>{var l;const d=(l=s.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((c,u)=>(c[u]=D1(u,o,n,d),c),{}):{}},D1=(o,n,s,l)=>{const d=n.find(p=>p.name===o),c=d?.type,u=s[o];return c&&!l.includes(c)?sm(c,u):Sf(u)},sm=(o,n)=>{if(o.charAt(0)==="_"){const s=o.slice(1,o.length);return B1(n,s)}switch(o){case Tt.bool:return M1(n);case Tt.float4:case Tt.float8:case Tt.int2:case Tt.int4:case Tt.int8:case Tt.numeric:case Tt.oid:return U1(n);case Tt.json:case Tt.jsonb:return z1(n);case Tt.timestamp:return G1(n);case Tt.abstime:case Tt.date:case Tt.daterange:case Tt.int4range:case Tt.int8range:case Tt.money:case Tt.reltime:case Tt.text:case Tt.time:case Tt.timestamptz:case Tt.timetz:case Tt.tsrange:case Tt.tstzrange:return Sf(n);default:return Sf(n)}},Sf=o=>o,M1=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},U1=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},z1=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},B1=(o,n)=>{if(typeof o!="string")return o;const s=o.length-1,l=o[s];if(o[0]==="{"&&l==="}"){let c;const u=o.slice(1,s);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(p=>sm(n,p))}return o},G1=o=>typeof o=="string"?o.replace(" ","T"):o,om=o=>{const n=new URL(o);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class $h{constructor(n,s,l={},d=_f){this.channel=n,this.event=s,this.payload=l,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var l;return this._hasReceived(n)&&s((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var V0;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(V0||(V0={}));class gc{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},d=>{const{onJoin:c,onLeave:u,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gc.syncState(this.state,d,c,u),this.pendingDiffs.forEach(g=>{this.state=gc.syncDiff(this.state,g,c,u)}),this.pendingDiffs=[],p()}),this.channel._on(l.diff,{},d=>{const{onJoin:c,onLeave:u,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=gc.syncDiff(this.state,d,c,u),p())}),this.onJoin((d,c,u)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:c,newPresences:u})}),this.onLeave((d,c,u)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,l,d){const c=this.cloneDeep(n),u=this.transformState(s),p={},g={};return this.map(c,(v,k)=>{u[v]||(g[v]=k)}),this.map(u,(v,k)=>{const T=c[v];if(T){const E=k.map(N=>N.presence_ref),S=T.map(N=>N.presence_ref),C=k.filter(N=>S.indexOf(N.presence_ref)<0),b=T.filter(N=>E.indexOf(N.presence_ref)<0);C.length>0&&(p[v]=C),b.length>0&&(g[v]=b)}else p[v]=k}),this.syncDiff(c,{joins:p,leaves:g},l,d)}static syncDiff(n,s,l,d){const{joins:c,leaves:u}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return l||(l=()=>{}),d||(d=()=>{}),this.map(c,(p,g)=>{var v;const k=(v=n[p])!==null&&v!==void 0?v:[];if(n[p]=this.cloneDeep(g),k.length>0){const T=n[p].map(S=>S.presence_ref),E=k.filter(S=>T.indexOf(S.presence_ref)<0);n[p].unshift(...E)}l(p,k,g)}),this.map(u,(p,g)=>{let v=n[p];if(!v)return;const k=g.map(T=>T.presence_ref);v=v.filter(T=>k.indexOf(T.presence_ref)<0),n[p]=v,d(p,v,g),v.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(l=>s(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,l)=>{const d=n[l];return"metas"in d?s[l]=d.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):s[l]=d,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var H0;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(H0||(H0={}));var mc;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(mc||(mc={}));var ys;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(ys||(ys={}));class jf{constructor(n,s={config:{}},l){var d,c;if(this.topic=n,this.params=s,this.socket=l,this.bindings={},this.state=vn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new $h(this,pi.join,this.params,this.timeout),this.rejoinTimer=new im(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pi.reply,{},(u,p)=>{this._trigger(this._replyEventName(p),u)}),this.presence=new gc(this),this.broadcastEndpointURL=om(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,s=this.timeout){var l,d,c;if(this.socket.isConnected()||this.socket.connect(),this.state==vn.closed){const{config:{broadcast:u,presence:p,private:g}}=this.params,v=(d=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(S=>S.filter))!==null&&d!==void 0?d:[],k=!!this.bindings[mc.PRESENCE]&&this.bindings[mc.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,T={},E={broadcast:u,presence:Object.assign(Object.assign({},p),{enabled:k}),postgres_changes:v,private:g};this.socket.accessTokenValue&&(T.access_token=this.socket.accessTokenValue),this._onError(S=>n?.(ys.CHANNEL_ERROR,S)),this._onClose(()=>n?.(ys.CLOSED)),this.updateJoinPayload(Object.assign({config:E},T)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:S})=>{var C;if(this.socket.setAuth(),S===void 0){n?.(ys.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,N=(C=b?.length)!==null&&C!==void 0?C:0,L=[];for(let x=0;x<N;x++){const _=b[x],{filter:{event:R,schema:I,table:U,filter:W}}=_,j=S&&S[x];if(j&&j.event===R&&j.schema===I&&j.table===U&&j.filter===W)L.push(Object.assign(Object.assign({},_),{id:j.id}));else{this.unsubscribe(),this.state=vn.errored,n?.(ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,n&&n(ys.SUBSCRIBED);return}}).receive("error",S=>{this.state=vn.errored,n?.(ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{n?.(ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,l){return this.state===vn.joined&&n===mc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,l)}async httpSend(n,s,l={}){var d;const c=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:c,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const v=await p.json();g=v.error||v.message||g}catch{}return Promise.reject(new Error(g))}async send(n,s={}){var l,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(l=s.timeout)!==null&&l!==void 0?l:this.timeout);return await((d=v.body)===null||d===void 0?void 0:d.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,p,g;const v=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(u=this.params)===null||u===void 0?void 0:u.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),v.receive("ok",()=>c("ok")),v.receive("error",()=>c("error")),v.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=vn.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pi.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(d=>{l=new $h(this,pi.leave,{},n),l.receive("ok",()=>{s(),d("ok")}).receive("timeout",()=>{s(),d("timed out")}).receive("error",()=>{d("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vn.closed,this.bindings={}}async _fetchWithTimeout(n,s,l){const d=new AbortController,c=setTimeout(()=>d.abort(),l),u=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:d.signal}));return clearTimeout(c),u}_push(n,s,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new $h(this,n,s,l);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>j1){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,l){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,l){var d,c;const u=n.toLocaleLowerCase(),{close:p,error:g,leave:v,join:k}=pi;if(l&&[p,g,v,k].indexOf(u)>=0&&l!==this._joinRef())return;let E=this._onMessage(u,s,l);if(s&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(S=>{var C,b,N;return((C=S.filter)===null||C===void 0?void 0:C.event)==="*"||((N=(b=S.filter)===null||b===void 0?void 0:b.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===u}).map(S=>S.callback(E,l)):(c=this.bindings[u])===null||c===void 0||c.filter(S=>{var C,b,N,L,x,_;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const R=S.id,I=(C=S.filter)===null||C===void 0?void 0:C.event;return R&&((b=s.ids)===null||b===void 0?void 0:b.includes(R))&&(I==="*"||I?.toLocaleLowerCase()===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const R=(x=(L=S?.filter)===null||L===void 0?void 0:L.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return R==="*"||R===((_=s?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof E=="object"&&"ids"in E){const C=E.data,{schema:b,table:N,commit_timestamp:L,type:x,errors:_}=C;E=Object.assign(Object.assign({},{schema:b,table:N,commit_timestamp:L,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(C))}S.callback(E,l)})}_isClosed(){return this.state===vn.closed}_isJoined(){return this.state===vn.joined}_isJoining(){return this.state===vn.joining}_isLeaving(){return this.state===vn.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,l){const d=n.toLocaleLowerCase(),c={type:d,filter:s,callback:l};return this.bindings[d]?this.bindings[d].push(c):this.bindings[d]=[c],this}_off(n,s){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(d=>{var c;return!(((c=d.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===l&&jf.isEqual(d.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const l in n)if(n[l]!==s[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(pi.close,{},n)}_onError(n){this._on(pi.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vn.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=q0(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=q0(n.columns,n.old_record)),s}}const Kh=()=>{},zd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},q1=[1e3,2e3,5e3,1e4],V1=1e4,H1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class W1{constructor(n,s){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_f,this.transport=null,this.heartbeatIntervalMs=zd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Kh,this.ref=0,this.reconnectTimer=null,this.logger=Kh,this.conn=null,this.sendBuffer=[],this.serializer=new F1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>{let c;return d?c=d:typeof fetch>"u"?c=(...u)=>sa(async()=>{const{default:p}=await Promise.resolve().then(()=>oa);return{default:p}},void 0).then(({default:p})=>p(...u)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...u)=>c(...u)},!(!((l=s?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${wf.websocket}`,this.httpEndpoint=om(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=O1.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:I1}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,l){this.logger(n,s,l)}connectionState(){switch(this.conn&&this.conn.readyState){case pc.connecting:return na.Connecting;case pc.open:return na.Open;case pc.closing:return na.Closing;default:return na.Closed}}isConnected(){return this.connectionState()===na.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const l=`realtime:${n}`,d=this.getChannels().find(c=>c.topic===l);if(d)return d;{const c=new jf(`realtime:${n}`,s,this);return this.channels.push(c),c}}push(n){const{topic:s,event:l,payload:d,ref:c}=n,u=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${s} ${l} (${c})`,d),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(L1,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},zd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:d,payload:c,ref:u}=s,p=u?`(${u})`:"",g=c.status||"";this.log("receive",`${g} ${l} ${d} ${p}`.trim(),c),this.channels.filter(v=>v._isMember(l)).forEach(v=>v._trigger(d,c,u)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(pi.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const l=n.match(/\?/)?"&":"?",d=new URLSearchParams(s);return`${n}${l}${d}`}_workerObjectUrl(n){let s;if(n)s=n;else{const l=new Blob([H1],{type:"application/javascript"});s=URL.createObjectURL(l)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(l=>{const d={access_token:s,version:A1};s&&l.updateJoinPayload(d),l.joinedOnce&&l._isJoined()&&l._push(pi.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(s)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new im(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,l,d,c,u,p,g,v,k;if(this.transport=(s=n?.transport)!==null&&s!==void 0?s:null,this.timeout=(l=n?.timeout)!==null&&l!==void 0?l:_f,this.heartbeatIntervalMs=(d=n?.heartbeatIntervalMs)!==null&&d!==void 0?d:zd.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=n?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(p=n?.heartbeatCallback)!==null&&p!==void 0?p:Kh,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n?.reconnectAfterMs)!==null&&g!==void 0?g:(T=>q1[T-1]||V1),this.encode=(v=n?.encode)!==null&&v!==void 0?v:((T,E)=>E(JSON.stringify(T))),this.decode=(k=n?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}class Ff extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Ft(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class $1 extends Ff{constructor(n,s,l){super(n),this.name="StorageApiError",this.status=s,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kf extends Ff{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}const Df=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>sa(async()=>{const{default:l}=await Promise.resolve().then(()=>oa);return{default:l}},void 0).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)},K1=()=>je(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sa(()=>Promise.resolve().then(()=>oa),void 0)).Response:Response}),Ef=o=>{if(Array.isArray(o))return o.map(s=>Ef(s));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([s,l])=>{const d=s.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[d]=Ef(l)}),n},Y1=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},Yh=o=>{var n;return o.msg||o.message||o.error_description||(typeof o.error=="string"?o.error:(n=o.error)===null||n===void 0?void 0:n.message)||JSON.stringify(o)},Q1=(o,n,s)=>je(void 0,void 0,void 0,function*(){const l=yield K1();o instanceof l&&!s?.noResolveJson?o.json().then(d=>{const c=o.status||500,u=d?.statusCode||c+"";n(new $1(Yh(d),c,u))}).catch(d=>{n(new kf(Yh(d),d))}):n(new kf(Yh(o),o))}),X1=(o,n,s,l)=>{const d={method:o,headers:n?.headers||{}};return o==="GET"||!l?d:(Y1(l)?(d.headers=Object.assign({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(l)):d.body=l,n?.duplex&&(d.duplex=n.duplex),Object.assign(Object.assign({},d),s))};function Sc(o,n,s,l,d,c){return je(this,void 0,void 0,function*(){return new Promise((u,p)=>{o(s,X1(n,l,d,c)).then(g=>{if(!g.ok)throw g;return l?.noResolveJson?g:g.json()}).then(g=>u(g)).catch(g=>Q1(g,p,l))})})}function vc(o,n,s,l){return je(this,void 0,void 0,function*(){return Sc(o,"GET",n,s,l)})}function fi(o,n,s,l,d){return je(this,void 0,void 0,function*(){return Sc(o,"POST",n,l,d,s)})}function Cf(o,n,s,l,d){return je(this,void 0,void 0,function*(){return Sc(o,"PUT",n,l,d,s)})}function J1(o,n,s,l){return je(this,void 0,void 0,function*(){return Sc(o,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),l)})}function Mf(o,n,s,l,d){return je(this,void 0,void 0,function*(){return Sc(o,"DELETE",n,l,d,s)})}class Z1{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s}then(n,s){return this.execute().then(n,s)}execute(){return je(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}}var am;class ev{constructor(n,s){this.downloadFn=n,this.shouldThrowOnError=s,this[am]="BlobDownloadBuilder",this.promise=null}asStream(){return new Z1(this.downloadFn,this.shouldThrowOnError)}then(n,s){return this.getPromise().then(n,s)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return je(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}})}}am=Symbol.toStringTag;const tv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},W0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nv{constructor(n,s={},l,d){this.shouldThrowOnError=!1,this.url=n,this.headers=s,this.bucketId=l,this.fetch=Df(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,s,l,d){return je(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},W0),d);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&l instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",this.encodeMetadata(g)),c.append("",l)):typeof FormData<"u"&&l instanceof FormData?(c=l,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",this.encodeMetadata(g))):(c=l,p["cache-control"]=`max-age=${u.cacheControl}`,p["content-type"]=u.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),d?.headers&&(p=Object.assign(Object.assign({},p),d.headers));const v=this._removeEmptyFolders(s),k=this._getFinalPath(v),T=yield(n=="PUT"?Cf:fi)(this.fetch,`${this.url}/object/${k}`,c,Object.assign({headers:p},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:v,id:T.Id,fullPath:T.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ft(c))return{data:null,error:c};throw c}})}upload(n,s,l){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,l)})}uploadToSignedUrl(n,s,l,d){return je(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),p=new URL(this.url+`/object/upload/sign/${u}`);p.searchParams.set("token",s);try{let g;const v=Object.assign({upsert:W0.upsert},d),k=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&l instanceof Blob?(g=new FormData,g.append("cacheControl",v.cacheControl),g.append("",l)):typeof FormData<"u"&&l instanceof FormData?(g=l,g.append("cacheControl",v.cacheControl)):(g=l,k["cache-control"]=`max-age=${v.cacheControl}`,k["content-type"]=v.contentType);const T=yield Cf(this.fetch,p.toString(),g,{headers:k});return{data:{path:c,fullPath:T.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Ft(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,s){return je(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n);const d=Object.assign({},this.headers);s?.upsert&&(d["x-upsert"]="true");const c=yield fi(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:d}),u=new URL(this.url+c.url),p=u.searchParams.get("token");if(!p)throw new Ff("No token returned by API");return{data:{signedUrl:u.toString(),path:n,token:p},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ft(l))return{data:null,error:l};throw l}})}update(n,s,l){return je(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,l)})}move(n,s,l){return je(this,void 0,void 0,function*(){try{return{data:yield fi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ft(d))return{data:null,error:d};throw d}})}copy(n,s,l){return je(this,void 0,void 0,function*(){try{return{data:{path:(yield fi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ft(d))return{data:null,error:d};throw d}})}createSignedUrl(n,s,l){return je(this,void 0,void 0,function*(){try{let d=this._getFinalPath(n),c=yield fi(this.fetch,`${this.url}/object/sign/${d}`,Object.assign({expiresIn:s},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const u=l?.download?`&download=${l.download===!0?"":l.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ft(d))return{data:null,error:d};throw d}})}createSignedUrls(n,s,l){return je(this,void 0,void 0,function*(){try{const d=yield fi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),c=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:d.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ft(d))return{data:null,error:d};throw d}})}download(n,s){const d=typeof s?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(s?.transform||{}),u=c?`?${c}`:"",p=this._getFinalPath(n),g=()=>vc(this.fetch,`${this.url}/${d}/${p}${u}`,{headers:this.headers,noResolveJson:!0});return new ev(g,this.shouldThrowOnError)}info(n){return je(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const l=yield vc(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Ef(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ft(l))return{data:null,error:l};throw l}})}exists(n){return je(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield J1(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ft(l)&&l instanceof kf){const d=l.originalError;if([400,404].includes(d?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(n,s){const l=this._getFinalPath(n),d=[],c=s?.download?`download=${s.download===!0?"":s.download}`:"";c!==""&&d.push(c);const p=typeof s?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(s?.transform||{});g!==""&&d.push(g);let v=d.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${l}${v}`)}}}remove(n){return je(this,void 0,void 0,function*(){try{return{data:yield Mf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}list(n,s,l){return je(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},tv),s),{prefix:n||""});return{data:yield fi(this.fetch,`${this.url}/object/list/${this.bucketId}`,d,{headers:this.headers},l),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ft(d))return{data:null,error:d};throw d}})}listV2(n,s){return je(this,void 0,void 0,function*(){try{const l=Object.assign({},n);return{data:yield fi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},s),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ft(l))return{data:null,error:l};throw l}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const lm="2.78.0",um={"X-Client-Info":`storage-js/${lm}`};class rv{constructor(n,s={},l,d){this.shouldThrowOnError=!1;const c=new URL(n);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},um),s),this.fetch=Df(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return je(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(n);return{data:yield vc(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}getBucket(n){return je(this,void 0,void 0,function*(){try{return{data:yield vc(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}createBucket(n){return je(this,arguments,void 0,function*(s,l={public:!1}){try{return{data:yield fi(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ft(d))return{data:null,error:d};throw d}})}updateBucket(n,s){return je(this,void 0,void 0,function*(){try{return{data:yield Cf(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ft(l))return{data:null,error:l};throw l}})}emptyBucket(n){return je(this,void 0,void 0,function*(){try{return{data:yield fi(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}deleteBucket(n){return je(this,void 0,void 0,function*(){try{return{data:yield Mf(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(n){const s={};return n&&("limit"in n&&(s.limit=String(n.limit)),"offset"in n&&(s.offset=String(n.offset)),n.search&&(s.search=n.search),n.sortColumn&&(s.sortColumn=n.sortColumn),n.sortOrder&&(s.sortOrder=n.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class iv{constructor(n,s={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},um),s),this.fetch=Df(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return je(this,void 0,void 0,function*(){try{return{data:yield fi(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}listBuckets(n){return je(this,void 0,void 0,function*(){try{const s=new URLSearchParams;n?.limit!==void 0&&s.set("limit",n.limit.toString()),n?.offset!==void 0&&s.set("offset",n.offset.toString()),n?.sortColumn&&s.set("sortColumn",n.sortColumn),n?.sortOrder&&s.set("sortOrder",n.sortOrder),n?.search&&s.set("search",n.search);const l=s.toString(),d=l?`${this.url}/bucket?${l}`:`${this.url}/bucket`;return{data:yield vc(this.fetch,d,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}deleteBucket(n){return je(this,void 0,void 0,function*(){try{return{data:yield Mf(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}}const Uf={"X-Client-Info":`storage-js/${lm}`,"Content-Type":"application/json"};class cm extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Nr(o){return typeof o=="object"&&o!==null&&"__isStorageVectorsError"in o}class Qh extends cm{constructor(n,s,l){super(n),this.name="StorageVectorsApiError",this.status=s,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sv extends cm{constructor(n,s){super(n),this.name="StorageVectorsUnknownError",this.originalError=s}}var $0;(function(o){o.InternalError="InternalError",o.S3VectorConflictException="S3VectorConflictException",o.S3VectorNotFoundException="S3VectorNotFoundException",o.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",o.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",o.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})($0||($0={}));const zf=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>sa(async()=>{const{default:l}=await Promise.resolve().then(()=>oa);return{default:l}},void 0).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)},ov=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},K0=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),av=(o,n,s)=>je(void 0,void 0,void 0,function*(){if(o&&typeof o=="object"&&"status"in o&&"ok"in o&&typeof o.status=="number"&&!s?.noResolveJson){const d=o.status||500,c=o;if(typeof c.json=="function")c.json().then(u=>{const p=u?.statusCode||u?.code||d+"";n(new Qh(K0(u),d,p))}).catch(()=>{const u=d+"",p=c.statusText||`HTTP ${d} error`;n(new Qh(p,d,u))});else{const u=d+"",p=c.statusText||`HTTP ${d} error`;n(new Qh(p,d,u))}}else n(new sv(K0(o),o))}),lv=(o,n,s,l)=>{const d={method:o,headers:n?.headers||{}};return l?(ov(l)?(d.headers=Object.assign({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(l)):d.body=l,Object.assign(Object.assign({},d),s)):d};function uv(o,n,s,l,d,c){return je(this,void 0,void 0,function*(){return new Promise((u,p)=>{o(s,lv(n,l,d,c)).then(g=>{if(!g.ok)throw g;if(l?.noResolveJson)return g;const v=g.headers.get("content-type");return!v||!v.includes("application/json")?{}:g.json()}).then(g=>u(g)).catch(g=>av(g,p,l))})})}function Ar(o,n,s,l,d){return je(this,void 0,void 0,function*(){return uv(o,"POST",n,l,d,s)})}class cv{constructor(n,s={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uf),s),this.fetch=zf(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return je(this,void 0,void 0,function*(){try{return{data:(yield Ar(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}getIndex(n,s){return je(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Nr(l))return{data:null,error:l};throw l}})}listIndexes(n){return je(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}deleteIndex(n,s){return je(this,void 0,void 0,function*(){try{return{data:(yield Ar(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:s},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Nr(l))return{data:null,error:l};throw l}})}}class dv{constructor(n,s={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uf),s),this.fetch=zf(l)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return je(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ar(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}getVectors(n){return je(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}listVectors(n){return je(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield Ar(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}queryVectors(n){return je(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}deleteVectors(n){return je(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ar(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}}class hv{constructor(n,s={},l){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uf),s),this.fetch=zf(l)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return je(this,void 0,void 0,function*(){try{return{data:(yield Ar(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}getBucket(n){return je(this,void 0,void 0,function*(){try{return{data:yield Ar(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}listBuckets(){return je(this,arguments,void 0,function*(n={}){try{return{data:yield Ar(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}deleteBucket(n){return je(this,void 0,void 0,function*(){try{return{data:(yield Ar(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nr(s))return{data:null,error:s};throw s}})}}class fv extends hv{constructor(n,s={}){super(n,s.headers||{},s.fetch)}from(n){return new pv(this.url,this.headers,n,this.fetch)}}class pv extends cv{constructor(n,s,l,d){super(n,s,d),this.vectorBucketName=l}createIndex(n){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return je(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return je(this,arguments,void 0,function*(s={}){return n.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return je(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return je(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new gv(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class gv extends dv{constructor(n,s,l,d,c){super(n,s,c),this.vectorBucketName=l,this.indexName=d}putVectors(n){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return je(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return je(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return je(this,arguments,void 0,function*(s={}){return n.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return je(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return je(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class mv extends rv{constructor(n,s={},l,d){super(n,s,l,d)}from(n){return new nv(this.url,this.headers,n,this.fetch)}get vectors(){return new fv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new iv(this.url+"/iceberg",this.headers,this.fetch)}}const vv="2.78.0";let hc="";typeof Deno<"u"?hc="deno":typeof document<"u"?hc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?hc="react-native":hc="node";const yv={"X-Client-Info":`supabase-js-${hc}/${vv}`},_v={headers:yv},wv={schema:"public"},Sv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kv={},Ev=o=>{let n;return o?n=o:typeof fetch>"u"?n=Qg:n=fetch,(...s)=>n(...s)},Cv=()=>typeof Headers>"u"?Xg:Headers,xv=(o,n,s)=>{const l=Ev(s),d=Cv();return async(c,u)=>{var p;const g=(p=await n())!==null&&p!==void 0?p:o;let v=new d(u?.headers);return v.has("apikey")||v.set("apikey",o),v.has("Authorization")||v.set("Authorization",`Bearer ${g}`),l(c,Object.assign(Object.assign({},u),{headers:v}))}};function Pv(o){return o.endsWith("/")?o:o+"/"}function bv(o,n){var s,l;const{db:d,auth:c,realtime:u,global:p}=o,{db:g,auth:v,realtime:k,global:T}=n,E={db:Object.assign(Object.assign({},g),d),auth:Object.assign(Object.assign({},v),c),realtime:Object.assign(Object.assign({},k),u),storage:{},global:Object.assign(Object.assign(Object.assign({},T),p),{headers:Object.assign(Object.assign({},(s=T?.headers)!==null&&s!==void 0?s:{}),(l=p?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return o.accessToken?E.accessToken=o.accessToken:delete E.accessToken,E}function Tv(o){const n=o?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Pv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dm="2.78.0",ml=30*1e3,xf=3,Xh=xf*ml,Rv="http://localhost:9999",Ov="supabase.auth.token",Nv={"X-Client-Info":`gotrue-js/${dm}`},Pf="X-Supabase-Api-Version",hm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Av=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Iv=600*1e3;class yc extends Error{constructor(n,s,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=l}}function Ue(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class Lv extends yc{constructor(n,s,l){super(n,s,l),this.name="AuthApiError",this.status=s,this.code=l}}function jv(o){return Ue(o)&&o.name==="AuthApiError"}class ra extends yc{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class go extends yc{constructor(n,s,l,d){super(n,l,d),this.name=s,this.status=l}}class di extends go{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Fv(o){return Ue(o)&&o.name==="AuthSessionMissingError"}class cl extends go{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bd extends go{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Gd extends go{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Dv(o){return Ue(o)&&o.name==="AuthImplicitGrantRedirectError"}class Y0 extends go{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bf extends go{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function Jh(o){return Ue(o)&&o.name==="AuthRetryableFetchError"}class Q0 extends go{constructor(n,s,l){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=l}}class Tf extends go{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const $d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),X0=` 	
\r=`.split(""),Mv=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<X0.length;n+=1)o[X0[n].charCodeAt(0)]=-2;for(let n=0;n<$d.length;n+=1)o[$d[n].charCodeAt(0)]=n;return o})();function J0(o,n,s){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;s($d[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;s($d[l]),n.queuedBits-=6}}function fm(o,n,s){const l=Mv[o];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function Z0(o){const n=[],s=u=>{n.push(String.fromCodePoint(u))},l={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},c=u=>{Bv(u,l,s)};for(let u=0;u<o.length;u+=1)fm(o.charCodeAt(u),d,c);return n.join("")}function Uv(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function zv(o,n){for(let s=0;s<o.length;s+=1){let l=o.charCodeAt(s);if(l>55295&&l<=56319){const d=(l-55296)*1024&65535;l=(o.charCodeAt(s+1)-56320&65535|d)+65536,s+=1}Uv(l,n)}}function Bv(o,n,s){if(n.utf8seq===0){if(o<=127){s(o);return}for(let l=1;l<6;l+=1)if((o>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function _l(o){const n=[],s={queue:0,queuedBits:0},l=d=>{n.push(d)};for(let d=0;d<o.length;d+=1)fm(o.charCodeAt(d),s,l);return new Uint8Array(n)}function Gv(o){const n=[];return zv(o,s=>n.push(s)),new Uint8Array(n)}function ia(o){const n=[],s={queue:0,queuedBits:0},l=d=>{n.push(d)};return o.forEach(d=>J0(d,s,l)),J0(null,s,l),n.join("")}function qv(o){return Math.round(Date.now()/1e3)+o}function Vv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const lr=()=>typeof window<"u"&&typeof document<"u",Jo={tested:!1,writable:!1},pm=()=>{if(!lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jo.tested)return Jo.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Jo.tested=!0,Jo.writable=!0}catch{Jo.tested=!0,Jo.writable=!1}return Jo.writable};function Hv(o){const n={},s=new URL(o);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((d,c)=>{n[c]=d})}catch{}return s.searchParams.forEach((l,d)=>{n[d]=l}),n}const gm=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>sa(async()=>{const{default:l}=await Promise.resolve().then(()=>oa);return{default:l}},void 0).then(({default:l})=>l(...s)):n=fetch,(...s)=>n(...s)},Wv=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",vl=async(o,n,s)=>{await o.setItem(n,JSON.stringify(s))},Zo=async(o,n)=>{const s=await o.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},co=async(o,n)=>{await o.removeItem(n)};class Zd{constructor(){this.promise=new Zd.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Zd.promiseConstructor=Promise;function Zh(o){const n=o.split(".");if(n.length!==3)throw new Tf("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!Av.test(n[l]))throw new Tf("JWT not in base64url format");return{header:JSON.parse(Z0(n[0])),payload:JSON.parse(Z0(n[1])),signature:_l(n[2]),raw:{header:n[0],payload:n[1]}}}async function $v(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function Kv(o,n){return new Promise((l,d)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await o(c);if(!n(c,null,u)){l(u);return}}catch(u){if(!n(c,u)){d(u);return}}})()})}function Yv(o){return("0"+o.toString(16)).substr(-2)}function Qv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=s.length;let d="";for(let c=0;c<56;c++)d+=s.charAt(Math.floor(Math.random()*l));return d}return crypto.getRandomValues(n),Array.from(n,Yv).join("")}async function Xv(o){const s=new TextEncoder().encode(o),l=await crypto.subtle.digest("SHA-256",s),d=new Uint8Array(l);return Array.from(d).map(c=>String.fromCharCode(c)).join("")}async function Jv(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const s=await Xv(o);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dl(o,n,s=!1){const l=Qv();let d=l;s&&(d+="/PASSWORD_RECOVERY"),await vl(o,`${n}-code-verifier`,d);const c=await Jv(l);return[c,l===c?"plain":"s256"]}const Zv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ey(o){const n=o.headers.get(Pf);if(!n||!n.match(Zv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function ty(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function ny(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ry=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hl(o){if(!ry.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ef(){const o={};return new Proxy(o,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iy(o,n){return new Proxy(o,{get:(s,l,d)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const c=l.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,l,d)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(s,l,d)}})}function ep(o){return JSON.parse(JSON.stringify(o))}const ta=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),sy=[502,503,504];async function tp(o){var n;if(!Wv(o))throw new bf(ta(o),0);if(sy.includes(o.status))throw new bf(ta(o),o.status);let s;try{s=await o.json()}catch(c){throw new ra(ta(c),c)}let l;const d=ey(o);if(d&&d.getTime()>=hm["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?l=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(l=s.error_code),l){if(l==="weak_password")throw new Q0(ta(s),o.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new di}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new Q0(ta(s),o.status,s.weak_password.reasons);throw new Lv(ta(s),o.status||500,l)}const oy=(o,n,s,l)=>{const d={method:o,headers:n?.headers||{}};return o==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),d.body=JSON.stringify(l),Object.assign(Object.assign({},d),s))};async function qe(o,n,s,l){var d;const c=Object.assign({},l?.headers);c[Pf]||(c[Pf]=hm["2024-01-01"].name),l?.jwt&&(c.Authorization=`Bearer ${l.jwt}`);const u=(d=l?.query)!==null&&d!==void 0?d:{};l?.redirectTo&&(u.redirect_to=l.redirectTo);const p=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await ay(o,n,s+p,{headers:c,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(g):{data:Object.assign({},g),error:null}}async function ay(o,n,s,l,d,c){const u=oy(n,l,d,c);let p;try{p=await o(s,Object.assign({},u))}catch(g){throw console.error(g),new bf(ta(g),0)}if(p.ok||await tp(p),l?.noResolveJson)return p;try{return await p.json()}catch(g){await tp(g)}}function hi(o){var n;let s=null;cy(o)&&(s=Object.assign({},o),o.expires_at||(s.expires_at=qv(o.expires_in)));const l=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:s,user:l},error:null}}function np(o){const n=hi(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0)&&(n.data.weak_password=o.weak_password),n}function po(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function ly(o){return{data:o,error:null}}function uy(o){const{action_link:n,email_otp:s,hashed_token:l,redirect_to:d,verification_type:c}=o,u=kl(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:l,redirect_to:d,verification_type:c},g=Object.assign({},u);return{data:{properties:p,user:g},error:null}}function rp(o){return o}function cy(o){return o.access_token&&o.refresh_token&&o.expires_in}const tf=["global","local","others"];class dy{constructor({url:n="",headers:s={},fetch:l}){this.url=n,this.headers=s,this.fetch=gm(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,s=tf[0]){if(tf.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tf.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Ue(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,s={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:po})}catch(l){if(Ue(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:s}=n,l=kl(n,["options"]),d=Object.assign(Object.assign({},l),s);return"newEmail"in l&&(d.new_email=l?.newEmail,delete d.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:uy,redirectTo:s?.redirectTo})}catch(s){if(Ue(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:po})}catch(s){if(Ue(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,l,d,c,u,p,g;try{const v={nextPage:null,lastPage:0,total:0},k=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(c=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&c!==void 0?c:""},xform:rp});if(k.error)throw k.error;const T=await k.json(),E=(u=k.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(g=(p=k.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(C=>{const b=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);v[`${N}Page`]=b}),v.total=parseInt(E)),{data:Object.assign(Object.assign({},T),v),error:null}}catch(v){if(Ue(v))return{data:{users:[]},error:v};throw v}}async getUserById(n){hl(n);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:po})}catch(s){if(Ue(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){hl(n);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:po})}catch(l){if(Ue(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,s=!1){hl(n);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:po})}catch(l){if(Ue(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){hl(n.userId);try{const{data:s,error:l}=await qe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:s,error:l}}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _deleteFactor(n){hl(n.userId),hl(n.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _listOAuthClients(n){var s,l,d,c,u,p,g;try{const v={nextPage:null,lastPage:0,total:0},k=await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(s=n?.page)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:"",per_page:(c=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&c!==void 0?c:""},xform:rp});if(k.error)throw k.error;const T=await k.json(),E=(u=k.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(g=(p=k.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(C=>{const b=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);v[`${N}Page`]=b}),v.total=parseInt(E)),{data:Object.assign(Object.assign({},T),v),error:null}}catch(v){if(Ue(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(n){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _getOAuthClient(n){try{return await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _updateOAuthClient(n,s){try{return await qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Ue(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(n){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}}function ip(o={}){return{getItem:n=>o[n]||null,setItem:(n,s)=>{o[n]=s},removeItem:n=>{delete o[n]}}}const fl={debug:!!(globalThis&&pm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mm extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class hy extends mm{}async function fy(o,n,s){fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),fl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async d=>{if(d){fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,d.name);try{return await s()}finally{fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,d.name)}}else{if(n===0)throw fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new hy(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(fl.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function py(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function vm(o){if(!/^0x[a-fA-F0-9]{40}$/.test(o))throw new Error(`@supabase/auth-js: Address "${o}" is invalid.`);return o.toLowerCase()}function gy(o){return parseInt(o,16)}function my(o){const n=new TextEncoder().encode(o);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function vy(o){var n;const{chainId:s,domain:l,expirationTime:d,issuedAt:c=new Date,nonce:u,notBefore:p,requestId:g,resources:v,scheme:k,uri:T,version:E}=o;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!T)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((n=o.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${o.statement}`)}const S=vm(o.address),C=k?`${k}://${l}`:l,b=o.statement?`${o.statement}
`:"",N=`${C} wants you to sign in with your Ethereum account:
${S}

${b}`;let L=`URI: ${T}
Version: ${E}
Chain ID: ${s}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(d&&(L+=`
Expiration Time: ${d.toISOString()}`),p&&(L+=`
Not Before: ${p.toISOString()}`),g&&(L+=`
Request ID: ${g}`),v){let x=`
Resources:`;for(const _ of v){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);x+=`
- ${_}`}L+=x}return`${N}
${L}`}class an extends Error{constructor({message:n,code:s,cause:l,name:d}){var c;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(c=d??(l instanceof Error?l.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=s}}class Kd extends an{constructor(n,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:n}),this.name="WebAuthnUnknownError",this.originalError=s}}function yy({error:o,options:n}){var s,l,d;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new an({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else if(o.name==="ConstraintError"){if(((s=c.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new an({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:o});if(n.mediation==="conditional"&&((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new an({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:o});if(((d=c.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new an({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:o})}else{if(o.name==="InvalidStateError")return new an({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:o});if(o.name==="NotAllowedError")return new an({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="NotSupportedError")return c.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new an({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:o}):new an({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:o});if(o.name==="SecurityError"){const u=window.location.hostname;if(ym(u)){if(c.rp.id!==u)return new an({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new an({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new an({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:o})}else if(o.name==="UnknownError")return new an({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new an({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}function _y({error:o,options:n}){const{publicKey:s}=n;if(!s)throw Error("options was missing required publicKey property");if(o.name==="AbortError"){if(n.signal instanceof AbortSignal)return new an({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:o})}else{if(o.name==="NotAllowedError")return new an({message:o.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o});if(o.name==="SecurityError"){const l=window.location.hostname;if(ym(l)){if(s.rpId!==l)return new an({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:o})}else return new an({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:o})}else if(o.name==="UnknownError")return new an({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:o})}return new an({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o})}class wy{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Sy=new wy;function ky(o){if(!o)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(o);const{challenge:n,user:s,excludeCredentials:l}=o,d=kl(o,["challenge","user","excludeCredentials"]),c=_l(n).buffer,u=Object.assign(Object.assign({},s),{id:_l(s.id).buffer}),p=Object.assign(Object.assign({},d),{challenge:c,user:u});if(l&&l.length>0){p.excludeCredentials=new Array(l.length);for(let g=0;g<l.length;g++){const v=l[g];p.excludeCredentials[g]=Object.assign(Object.assign({},v),{id:_l(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return p}function Ey(o){if(!o)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(o);const{challenge:n,allowCredentials:s}=o,l=kl(o,["challenge","allowCredentials"]),d=_l(n).buffer,c=Object.assign(Object.assign({},l),{challenge:d});if(s&&s.length>0){c.allowCredentials=new Array(s.length);for(let u=0;u<s.length;u++){const p=s[u];c.allowCredentials[u]=Object.assign(Object.assign({},p),{id:_l(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function Cy(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const s=o;return{id:o.id,rawId:o.id,response:{attestationObject:ia(new Uint8Array(o.response.attestationObject)),clientDataJSON:ia(new Uint8Array(o.response.clientDataJSON))},type:"public-key",clientExtensionResults:o.getClientExtensionResults(),authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function xy(o){var n;if("toJSON"in o&&typeof o.toJSON=="function")return o.toJSON();const s=o,l=o.getClientExtensionResults(),d=o.response;return{id:o.id,rawId:o.id,response:{authenticatorData:ia(new Uint8Array(d.authenticatorData)),clientDataJSON:ia(new Uint8Array(d.clientDataJSON)),signature:ia(new Uint8Array(d.signature)),userHandle:d.userHandle?ia(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=s.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function ym(o){return o==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(o)}function sp(){var o,n;return!!(lr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((o=navigator?.credentials)===null||o===void 0?void 0:o.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Py(o){try{const n=await navigator.credentials.create(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Kd("Browser returned unexpected credential type",n)}:{data:null,error:new Kd("Empty credential response",n)}}catch(n){return{data:null,error:yy({error:n,options:o})}}}async function by(o){try{const n=await navigator.credentials.get(o);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Kd("Browser returned unexpected credential type",n)}:{data:null,error:new Kd("Empty credential response",n)}}catch(n){return{data:null,error:_y({error:n,options:o})}}}const Ty={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Ry={userVerification:"preferred",hints:["security-key"]};function Yd(...o){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),s=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),l={};for(const d of o)if(d)for(const c in d){const u=d[c];if(u!==void 0)if(Array.isArray(u))l[c]=u;else if(s(u))l[c]=u;else if(n(u)){const p=l[c];n(p)?l[c]=Yd(p,u):l[c]=Yd(u)}else l[c]=u}return l}function Oy(o,n){return Yd(Ty,o,n||{})}function Ny(o,n){return Yd(Ry,o,n||{})}class Ay{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:s,friendlyName:l,signal:d},c){try{const{data:u,error:p}=await this.client.mfa.challenge({factorId:n,webauthn:s});if(!u)return{data:null,error:p};const g=d??Sy.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:v}=u.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${l}`),v.displayName||(v.displayName=v.name)}switch(u.webauthn.type){case"create":{const v=Oy(u.webauthn.credential_options.publicKey,c?.create),{data:k,error:T}=await Py({publicKey:v,signal:g});return k?{data:{factorId:n,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:k}},error:null}:{data:null,error:T}}case"request":{const v=Ny(u.webauthn.credential_options.publicKey,c?.request),{data:k,error:T}=await by(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:v,signal:g}));return k?{data:{factorId:n,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:k}},error:null}:{data:null,error:T}}}}catch(u){return Ue(u)?{data:null,error:u}:{data:null,error:new ra("Unexpected error in challenge",u)}}}async _verify({challengeId:n,factorId:s,webauthn:l}){return this.client.mfa.verify({factorId:s,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}},c){if(!s)return{data:null,error:new yc("rpId is required for WebAuthn authentication")};try{if(!sp())return{data:null,error:new ra("Browser does not support WebAuthn",null)};const{data:u,error:p}=await this.challenge({factorId:n,webauthn:{rpId:s,rpOrigins:l},signal:d},{request:c});if(!u)return{data:null,error:p};const{webauthn:g}=u;return this._verify({factorId:n,challengeId:u.challengeId,webauthn:{type:g.type,rpId:s,rpOrigins:l,credential_response:g.credential_response}})}catch(u){return Ue(u)?{data:null,error:u}:{data:null,error:new ra("Unexpected error in authenticate",u)}}}async _register({friendlyName:n,rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d},c){if(!s)return{data:null,error:new yc("rpId is required for WebAuthn registration")};try{if(!sp())return{data:null,error:new ra("Browser does not support WebAuthn",null)};const{data:u,error:p}=await this._enroll({friendlyName:n});if(!u)return await this.client.mfa.listFactors().then(k=>{var T;return(T=k.data)===null||T===void 0?void 0:T.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===n&&E.status!=="unverified")}).then(k=>k?this.client.mfa.unenroll({factorId:k?.id}):void 0),{data:null,error:p};const{data:g,error:v}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:s,rpOrigins:l},signal:d},{create:c});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:s,rpOrigins:l,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:v}}catch(u){return Ue(u)?{data:null,error:u}:{data:null,error:new ra("Unexpected error in register",u)}}}}py();const Iy={url:Rv,storageKey:Ov,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Nv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function op(o,n,s){return await s()}const pl={};class _c{get jwks(){var n,s;return(s=(n=pl[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){pl[this.storageKey]=Object.assign(Object.assign({},pl[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=pl[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){pl[this.storageKey]=Object.assign(Object.assign({},pl[this.storageKey]),{cachedAt:n})}constructor(n){var s,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_c.nextInstanceID,_c.nextInstanceID+=1,this.instanceID>0&&lr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const d=Object.assign(Object.assign({},Iy),n);if(this.logDebugMessages=!!d.debug,typeof d.debug=="function"&&(this.logger=d.debug),this.persistSession=d.persistSession,this.storageKey=d.storageKey,this.autoRefreshToken=d.autoRefreshToken,this.admin=new dy({url:d.url,headers:d.headers,fetch:d.fetch}),this.url=d.url,this.headers=d.headers,this.fetch=gm(d.fetch),this.lock=d.lock||op,this.detectSessionInUrl=d.detectSessionInUrl,this.flowType=d.flowType,this.hasCustomAuthorizationHeader=d.hasCustomAuthorizationHeader,d.lock?this.lock=d.lock:lr()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=fy:this.lock=op,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ay(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(d.storage?this.storage=d.storage:pm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ip(this.memoryStorage)),d.userStorage&&(this.userStorage=d.userStorage)):(this.memoryStorage={},this.storage=ip(this.memoryStorage)),lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dm}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=Hv(window.location.href);let l="none";if(this._isImplicitGrantCallback(s)?l="implicit":await this._isPKCECallback(s)&&(l="pkce"),lr()&&this.detectSessionInUrl&&l!=="none"){const{data:d,error:c}=await this._getSessionFromURL(s,l);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Dv(c)){const g=(n=c.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:p}=d;return this._debug("#_initialize()","detected session in URL",u,"redirect type",p),await this._saveSession(u),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Ue(s)?{error:s}:{error:new ra("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,l,d;try{const c=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(s=n?.options)===null||s===void 0?void 0:s.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(d=n?.options)===null||d===void 0?void 0:d.captchaToken}},xform:hi}),{data:u,error:p}=c;if(p||!u)return{data:{user:null,session:null},error:p};const g=u.session,v=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(c){if(Ue(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(n){var s,l,d;try{let c;if("email"in n){const{email:k,password:T,options:E}=n;let S=null,C=null;this.flowType==="pkce"&&([S,C]=await dl(this.storage,this.storageKey)),c=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E?.emailRedirectTo,body:{email:k,password:T,data:(s=E?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:S,code_challenge_method:C},xform:hi})}else if("phone"in n){const{phone:k,password:T,options:E}=n;c=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:k,password:T,data:(l=E?.data)!==null&&l!==void 0?l:{},channel:(d=E?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:hi})}else throw new Bd("You must provide either an email or phone number and a password");const{data:u,error:p}=c;if(p||!u)return{data:{user:null,session:null},error:p};const g=u.session,v=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(c){if(Ue(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(n){try{let s;if("email"in n){const{email:c,password:u,options:p}=n;s=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:np})}else if("phone"in n){const{phone:c,password:u,options:p}=n;s=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:np})}else throw new Bd("You must provide either an email or phone number and a password");const{data:l,error:d}=s;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new cl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:d})}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,l,d,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;switch(s){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(n){var s,l,d,c,u,p,g,v,k,T,E;let S,C;if("message"in n)S=n.message,C=n.signature;else{const{chain:b,wallet:N,statement:L,options:x}=n;let _;if(lr())if(typeof N=="object")_=N;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")_=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=N}const R=new URL((s=x?.url)!==null&&s!==void 0?s:window.location.href),I=await _.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=vm(I[0]);let W=(l=x?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!W){const F=await _.request({method:"eth_chainId"});W=gy(F)}const j={domain:R.host,address:U,statement:L,uri:R.href,version:"1",chainId:W,nonce:(d=x?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(u=(c=x?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(p=x?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=x?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(v=x?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(k=x?.signInWithEthereum)===null||k===void 0?void 0:k.resources};S=vy(j),C=await _.request({method:"personal_sign",params:[my(S),U]})}try{const{data:b,error:N}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:C},!((T=n.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(E=n.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:hi});if(N)throw N;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new cl}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:N})}catch(b){if(Ue(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(n){var s,l,d,c,u,p,g,v,k,T,E,S;let C,b;if("message"in n)C=n.message,b=n.signature;else{const{chain:N,wallet:L,statement:x,options:_}=n;let R;if(lr())if(typeof L=="object")R=L;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))R=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=L}const I=new URL((s=_?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in R&&R.signIn){const U=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),x?{statement:x}:null));let W;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")W=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)W=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)C=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),b=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${I.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(d=(l=_?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((c=_?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((u=_?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((p=_?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((g=_?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((v=_?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((T=(k=_?.signInWithSolana)===null||k===void 0?void 0:k.resources)===null||T===void 0)&&T.length?["Resources",..._.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const U=await R.signMessage(new TextEncoder().encode(C),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=U}}try{const{data:N,error:L}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:ia(b)},!((E=n.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:hi});if(L)throw L;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new cl}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:L})}catch(N){if(Ue(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(n){const s=await Zo(this.storage,`${this.storageKey}-code-verifier`),[l,d]=(s??"").split("/");try{const{data:c,error:u}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:hi});if(await co(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new cl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:d??null}),error:u})}catch(c){if(Ue(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(n){try{const{options:s,provider:l,token:d,access_token:c,nonce:u}=n,p=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:d,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:hi}),{data:g,error:v}=p;return v?{data:{user:null,session:null},error:v}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new cl}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:v})}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,l,d,c,u;try{if("email"in n){const{email:p,options:g}=n;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await dl(this.storage,this.storageKey));const{error:T}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=g?.data)!==null&&s!==void 0?s:{},create_user:(l=g?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:v,code_challenge_method:k},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in n){const{phone:p,options:g}=n,{data:v,error:k}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(d=g?.data)!==null&&d!==void 0?d:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:v?.message_id},error:k}}throw new Bd("You must provide either an email or phone number.")}catch(p){if(Ue(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var s,l;try{let d,c;"options"in n&&(d=(s=n.options)===null||s===void 0?void 0:s.redirectTo,c=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:u,error:p}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:d,xform:hi});if(p)throw p;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,v=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:v,session:g},error:null}}catch(d){if(Ue(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithSSO(n){var s,l,d;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await dl(this.storage,this.storageKey)),await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&l!==void 0?l:void 0}),!((d=n?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:ly})}catch(c){if(Ue(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:l}=n;if(l)throw l;if(!s)throw new di;const{error:d}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:d}})}catch(n){if(Ue(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:l,type:d,options:c}=n,{error:u}=await qe(this.fetch,"POST",s,{headers:this.headers,body:{email:l,type:d,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in n){const{phone:l,type:d,options:c}=n,{data:u,error:p}=await qe(this.fetch,"POST",s,{headers:this.headers,body:{phone:l,type:d,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:p}}throw new Bd("You must provide either an email or phone number and a type")}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await l,await s()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=s();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await Zo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<Xh:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const u=await Zo(this.userStorage,this.storageKey+"-user");u?.user?n.user=u.user:n.user=ef()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};n.user=iy(n.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{session:null},error:c}:{data:{session:d},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:po}):await this._useSession(async s=>{var l,d,c;const{data:u,error:p}=s;if(p)throw p;return!(!((l=u.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new di}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&c!==void 0?c:void 0,xform:po})})}catch(s){if(Ue(s))return Fv(s)&&(await this._removeSession(),await co(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async l=>{const{data:d,error:c}=l;if(c)throw c;if(!d.session)throw new di;const u=d.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await dl(this.storage,this.storageKey));const{data:v,error:k}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:u.access_token,xform:po});if(k)throw k;return u.user=v.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(l){if(Ue(l))return{data:{user:null},error:l};throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new di;const s=Date.now()/1e3;let l=s,d=!0,c=null;const{payload:u}=Zh(n.access_token);if(u.exp&&(l=u.exp,d=l<=s),d){const{data:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};c=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;c={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:l-s,expires_at:l},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(s){if(Ue(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var l;if(!n){const{data:u,error:p}=s;if(p)throw p;n=(l=u.session)!==null&&l!==void 0?l:void 0}if(!n?.refresh_token)throw new di;const{data:d,error:c}=await this._callRefreshToken(n.refresh_token);return c?{data:{user:null,session:null},error:c}:d?{data:{user:d.user,session:d},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!lr())throw new Gd("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Gd(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Y0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gd("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Y0("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(n.code);if(_)throw _;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:d,access_token:c,refresh_token:u,expires_in:p,expires_at:g,token_type:v}=n;if(!c||!p||!u||!v)throw new Gd("No session defined in URL");const k=Math.round(Date.now()/1e3),T=parseInt(p);let E=k+T;g&&(E=parseInt(g));const S=E-k;S*1e3<=ml&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${T}s`);const C=E-T;k-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,E,k):k-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,E,k);const{data:b,error:N}=await this._getUser(c);if(N)throw N;const L={provider_token:l,provider_refresh_token:d,access_token:c,expires_in:T,expires_at:E,refresh_token:u,token_type:v,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:L,redirectType:n.type},error:null}}catch(l){if(Ue(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await Zo(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var l;const{data:d,error:c}=s;if(c)return{error:c};const u=(l=d.session)===null||l===void 0?void 0:l.access_token;if(u){const{error:p}=await this.admin.signOut(u,n);if(p&&!(jv(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await co(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=Vv(),l={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async s=>{var l,d;try{const{data:{session:c},error:u}=s;if(u)throw u;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,s={}){let l=null,d=null;this.flowType==="pkce"&&([l,d]=await dl(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:d,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(c){if(Ue(c))return{data:null,error:c};throw c}}async getUserIdentities(){var n;try{const{data:s,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var s;try{const{data:l,error:d}=await this._useSession(async c=>{var u,p,g,v,k;const{data:T,error:E}=c;if(E)throw E;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(u=n.options)===null||u===void 0?void 0:u.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",S,{headers:this.headers,jwt:(k=(v=T.session)===null||v===void 0?void 0:v.access_token)!==null&&k!==void 0?k:void 0})});if(d)throw d;return lr()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(l?.url),{data:{provider:n.provider,url:l?.url},error:null}}catch(l){if(Ue(l))return{data:{provider:n.provider,url:null},error:l};throw l}}async linkIdentityIdToken(n){return await this._useSession(async s=>{var l;try{const{error:d,data:{session:c}}=s;if(d)throw d;const{options:u,provider:p,token:g,access_token:v,nonce:k}=n,T=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=c?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:p,id_token:g,access_token:v,nonce:k,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:hi}),{data:E,error:S}=T;return S?{data:{user:null,session:null},error:S}:!E||!E.session||!E.user?{data:{user:null,session:null},error:new cl}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),{data:E,error:S})}catch(d){if(Ue(d))return{data:{user:null,session:null},error:d};throw d}})}async unlinkIdentity(n){try{return await this._useSession(async s=>{var l,d;const{data:c,error:u}=s;if(u)throw u;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(l=c.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const l=Date.now();return await Kv(async d=>(d>0&&await $v(200*Math.pow(2,d-1)),this._debug(s,"refreshing attempt",d),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:hi})),(d,c)=>{const u=200*Math.pow(2,d);return c&&Jh(c)&&Date.now()+u-l<ml})}catch(l){if(this._debug(s,"error",l),Ue(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",l),lr()&&!s.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,s;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const d=await Zo(this.storage,this.storageKey);if(d&&this.userStorage){let u=await Zo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:d.user},await vl(this.userStorage,this.storageKey+"-user",u)),d.user=(n=u?.user)!==null&&n!==void 0?n:ef()}else if(d&&!d.user&&!d.user){const u=await Zo(this.storage,this.storageKey+"-user");u&&u?.user?(d.user=u.user,await co(this.storage,this.storageKey+"-user"),await vl(this.storage,this.storageKey,d)):d.user=ef()}if(this._debug(l,"session from storage",d),!this._isValidSession(d)){this._debug(l,"session is not valid"),d!==null&&await this._removeSession();return}const c=((s=d.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Xh;if(this._debug(l,`session has${c?"":" not"} expired with margin of ${Xh}s`),c){if(this.autoRefreshToken&&d.refresh_token){const{error:u}=await this._callRefreshToken(d.refresh_token);u&&(console.error(u),Jh(u)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:p}=await this._getUser(d.access_token);!p&&u?.user?(d.user=u.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(l,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(l,"error",d),console.error(d);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var s,l;if(!n)throw new di;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Zd;const{data:c,error:u}=await this._refreshAccessToken(n);if(u)throw u;if(!c.session)throw new di;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const p={data:c.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(c){if(this._debug(d,"error",c),Ue(c)){const u={data:null,error:c};return Jh(c)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(u),u}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(c),c}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,s,l=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",s,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:s});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(g){c.push(g)}});if(await Promise.all(u),c.length>0){for(let p=0;p<c.length;p+=1)console.error(c[p]);throw c[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),l=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&s.user&&await vl(this.userStorage,this.storageKey+"-user",{user:s.user});const d=Object.assign({},s);delete d.user;const c=ep(d);await vl(this.storage,this.storageKey,c)}else{const d=ep(s);await vl(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),await co(this.storage,this.storageKey),await co(this.storage,this.storageKey+"-code-verifier"),await co(this.storage,this.storageKey+"-user"),this.userStorage&&await co(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&lr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ml);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:l}}=s;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((l.expires_at*1e3-n)/ml);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${ml}ms, refresh threshold is ${xf} ticks`),d<=xf&&await this._callRefreshToken(l.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof mm)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,l){const d=[`provider=${encodeURIComponent(s)}`];if(l?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&d.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[c,u]=await dl(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});d.push(p.toString())}if(l?.queryParams){const c=new URLSearchParams(l.queryParams);d.push(c.toString())}return l?.skipBrowserRedirect&&d.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var l;const{data:d,error:c}=s;return c?{data:null,error:c}:await qe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token})})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var l,d;const{data:c,error:u}=s;if(u)return{data:null,error:u};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:g,error:v}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});return v?{data:null,error:v}:(n.factorType==="totp"&&g.type==="totp"&&(!((d=g?.totp)===null||d===void 0)&&d.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:d,error:c}=s;if(c)return{data:null,error:c};const u=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Cy(n.webauthn.credential_response):xy(n.webauthn.credential_response)})}:{code:n.code}),{data:p,error:g}=await qe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:u,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),{data:p,error:g})})}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var l;const{data:d,error:c}=s;if(c)return{data:null,error:c};const u=await qe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});if(u.error)return u;const{data:p}=u;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:ky(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Ey(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:l}=await this._challenge({factorId:n.factorId});return l?{data:null,error:l}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){var n;const{data:{user:s},error:l}=await this.getUser();if(l)return{data:null,error:l};const d={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=s?.factors)!==null&&n!==void 0?n:[])d.all.push(c),c.status==="verified"&&d[c.factor_type].push(c);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var n,s;const{data:{session:l},error:d}=await this.getSession();if(d)return{data:null,error:d};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Zh(l.access_token);let u=null;c.aal&&(u=c.aal);let p=u;((s=(n=l.user.factors)===null||n===void 0?void 0:n.filter(k=>k.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const v=c.amr||[];return{data:{currentLevel:u,nextLevel:p,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async s=>{const{data:{session:l},error:d}=s;return d?{data:null,error:d}:l?await qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:c=>({data:c,error:null})}):{data:null,error:new di}})}catch(s){if(Ue(s))return{data:null,error:s};throw s}}async _approveAuthorization(n,s){try{return await this._useSession(async l=>{const{data:{session:d},error:c}=l;if(c)return{data:null,error:c};if(!d)return{data:null,error:new di};const u=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return u.data&&u.data.redirect_url&&lr()&&!s?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(l){if(Ue(l))return{data:null,error:l};throw l}}async _denyAuthorization(n,s){try{return await this._useSession(async l=>{const{data:{session:d},error:c}=l;if(c)return{data:null,error:c};if(!d)return{data:null,error:new di};const u=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return u.data&&u.data.redirect_url&&lr()&&!s?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(l){if(Ue(l))return{data:null,error:l};throw l}}async fetchJwk(n,s={keys:[]}){let l=s.keys.find(p=>p.kid===n);if(l)return l;const d=Date.now();if(l=this.jwks.keys.find(p=>p.kid===n),l&&this.jwks_cached_at+Iv>d)return l;const{data:c,error:u}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=d,l=c.keys.find(p=>p.kid===n),!l)?null:l}async getClaims(n,s={}){try{let l=n;if(!l){const{data:S,error:C}=await this.getSession();if(C||!S.session)return{data:null,error:C};l=S.session.access_token}const{header:d,payload:c,signature:u,raw:{header:p,payload:g}}=Zh(l);s?.allowExpired||ty(c.exp);const v=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!v){const{error:S}=await this.getUser(l);if(S)throw S;return{data:{claims:c,header:d,signature:u},error:null}}const k=ny(d.alg),T=await crypto.subtle.importKey("jwk",v,k,!0,["verify"]);if(!await crypto.subtle.verify(k,T,u,Gv(`${p}.${g}`)))throw new Tf("Invalid JWT signature");return{data:{claims:c,header:d,signature:u},error:null}}catch(l){if(Ue(l))return{data:null,error:l};throw l}}}_c.nextInstanceID=0;const Ly=_c;class jy extends Ly{constructor(n){super(n)}}class Fy{constructor(n,s,l){var d,c,u;this.supabaseUrl=n,this.supabaseKey=s;const p=Tv(n);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,v={db:wv,realtime:kv,auth:Object.assign(Object.assign({},Sv),{storageKey:g}),global:_v},k=bv(l??{},v);this.storageKey=(d=k.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(c=k.global.headers)!==null&&c!==void 0?c:{},k.accessToken?(this.accessToken=k.accessToken,this.auth=new Proxy({},{get:(T,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=k.auth)!==null&&u!==void 0?u:{},this.headers,k.global.fetch),this.fetch=xv(s,this._getAccessToken.bind(this),k.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},k.realtime)),this.rest=new R1(new URL("rest/v1",p).href,{headers:this.headers,schema:k.db.schema,fetch:this.fetch}),this.storage=new mv(this.storageUrl.href,this.headers,this.fetch,l?.storage),k.accessToken||this._listenForAuthEvents()}get functions(){return new w1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,s,l)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n,s;if(this.accessToken)return await this.accessToken();const{data:l}=await this.auth.getSession();return(s=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:l,storage:d,userStorage:c,storageKey:u,flowType:p,lock:g,debug:v},k,T){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jy({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),k),storageKey:u,autoRefreshToken:n,persistSession:s,detectSessionInUrl:l,storage:d,userStorage:c,flowType:p,lock:g,debug:v,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new W1(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,l)=>{this._handleTokenChanged(s,"CLIENT",l?.access_token)})}_handleTokenChanged(n,s,l){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dy=(o,n,s)=>new Fy(o,n,s);function My(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}My()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Uy="",zy="";console.warn("Supabase environment variables are not set. Please configure VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY");const Re=Dy(Uy,zy,{realtime:{params:{eventsPerSecond:10}}});function By(){const o=["sunny","cozy","happy","quiet","bright","warm","cool","wild","calm","sweet","tiny","huge","soft","bold","neat","keen","fresh","brave","wise","kind","lucky","magic","dreamy","snug","peaceful","joyful","cheerful","gentle","merry","lively"],n=["cat","dog","bee","fox","owl","bunny","bird","fish","deer","bear","creek","brook","grove","lane","path","trail","ridge","hill","dale","vale","cottage","cabin","lodge","villa","manor","house","place","corner","nook","spot","garden","meadow","forest","river","lake","pond","ocean","beach","island","shore"],s=["inn","bnb","retreat","haven","hideaway","sanctuary","cove","nest","den","roost","lodge","cabin","cottage","villa","manor","estate","house","home","place","spot"],l=o[Math.floor(Math.random()*o.length)],d=n[Math.floor(Math.random()*n.length)],c=s[Math.floor(Math.random()*s.length)];return Math.random()>.5?`${l} ${d} ${c}`:`${l} ${d}`}function Gy(o,n){let s;return function(...l){s||(o.apply(this,l),s=!0,setTimeout(()=>s=!1,n))}}function qy({onGameCreated:o}){const[n,s]=ye.useState(""),[l,d]=ye.useState(3),[c,u]=ye.useState(!1),[p,g]=ye.useState(null),v=async()=>{if(!n.trim()){g("Please enter a nickname");return}u(!0),g(null);try{const k=By(),T=crypto.randomUUID(),{data:E,error:S}=await Re.from("games").insert({room_code:k,host_id:T,frames_per_round:l,current_round:0,total_rounds:1,status:"lobby"}).select().single();if(S)throw S;const{data:C,error:b}=await Re.from("players").insert({game_id:E.id,user_id:T,nickname:n.trim(),turn_order:1,is_host:!0}).select().single();if(b)throw b;o(E.id,C.id)}catch(k){g(k instanceof Error?k.message:"Failed to create game")}finally{u(!1)}};return re.jsx("div",{className:"create-game-modal",children:re.jsxs("div",{className:"modal-content",children:[re.jsx("h2",{children:"Create Game"}),re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"nickname",children:"Nickname"}),re.jsx("input",{id:"nickname",type:"text",value:n,onChange:k=>s(k.target.value),placeholder:"Enter your nickname",maxLength:20})]}),re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"frames",children:"Frames per Round"}),re.jsxs("div",{className:"radio-group",children:[re.jsxs("label",{children:[re.jsx("input",{type:"radio",value:"3",checked:l===3,onChange:()=>d(3)}),"3 Frames"]}),re.jsxs("label",{children:[re.jsx("input",{type:"radio",value:"5",checked:l===5,onChange:()=>d(5)}),"5 Frames"]}),re.jsxs("label",{children:[re.jsx("input",{type:"radio",value:"8",checked:l===8,onChange:()=>d(8)}),"8 Frames"]})]})]}),p&&re.jsx("div",{className:"error-message",children:p}),re.jsx("button",{className:"btn btn-primary",onClick:v,disabled:c||!n.trim(),children:c?"Creating...":"Create Game"})]})})}function Vy({onGameJoined:o}){const s=new URLSearchParams(window.location.search).get("room"),[l,d]=ye.useState(s||""),[c,u]=ye.useState(""),[p,g]=ye.useState(!1),[v,k]=ye.useState(null),T=async()=>{if(!l.trim()||!c.trim()){k("Please enter both room code and nickname");return}g(!0),k(null);try{const{data:E,error:S}=await Re.from("games").select("*").ilike("room_code",l.trim()).eq("status","lobby").single();if(S||!E)throw new Error("Game not found or already started");const{count:C}=await Re.from("players").select("*",{count:"exact",head:!0}).eq("game_id",E.id);if((C||0)>=10)throw new Error("Game is full (10 players max)");const b=crypto.randomUUID(),{data:N,error:L}=await Re.from("players").insert({game_id:E.id,user_id:b,nickname:c.trim(),turn_order:(C||0)+1,is_host:!1}).select().single();if(L)throw L;o(E.id,N.id)}catch(E){k(E instanceof Error?E.message:"Failed to join game")}finally{g(!1)}};return re.jsx("div",{className:"join-game-modal",children:re.jsxs("div",{className:"modal-content",children:[re.jsx("h2",{children:"Join Game"}),re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"room-code",children:"Room Code"}),re.jsx("input",{id:"room-code",type:"text",value:l,onChange:E=>d(E.target.value),placeholder:"Enter room code (e.g. sunny creek inn)"})]}),re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"nickname-join",children:"Nickname"}),re.jsx("input",{id:"nickname-join",type:"text",value:c,onChange:E=>u(E.target.value),placeholder:"Enter your nickname",maxLength:20})]}),v&&re.jsx("div",{className:"error-message",children:v}),re.jsx("button",{className:"btn btn-primary",onClick:T,disabled:p||!l.trim()||!c.trim(),children:p?"Joining...":"Join Game"})]})})}function Hy({gameId:o,playerId:n}){const[s,l]=ye.useState([]),[d,c]=ye.useState(!0),u=ye.useCallback(async()=>{try{const{data:p,error:g}=await Re.from("players").select("*").eq("game_id",o).order("turn_order",{ascending:!0});if(g)throw g;l(p||[])}catch(p){console.error("Error fetching players:",p)}finally{c(!1)}},[o]);return ye.useEffect(()=>{if(!o)return;u();let p=null,g=null;g=setInterval(()=>{console.log("Polling for player updates..."),u()},1e3);try{p=Re.channel(`players-realtime:${o}`).on("postgres_changes",{event:"*",schema:"public",table:"players",filter:`game_id=eq.${o}`},v=>{console.log("Player list update received via realtime:",v.eventType,v),u()}).subscribe(v=>{console.log("Player list subscription status:",v),v==="SUBSCRIBED"?(console.log("Successfully subscribed to player updates - realtime active"),g&&(clearInterval(g),g=setInterval(()=>{u()},2e3))):(v==="CHANNEL_ERROR"||v==="TIMED_OUT")&&(console.warn("Realtime subscription failed, using polling only"),g||(g=setInterval(()=>{u()},1e3)))})}catch(v){console.warn("Realtime not available, using polling only:",v)}return()=>{p&&Re.removeChannel(p),g&&clearInterval(g)}},[o,u]),re.jsxs("div",{className:"player-list-panel",children:[re.jsx("h2",{children:"PLAYERS"}),re.jsx("div",{className:"player-list",children:d?re.jsx("p",{children:"Loading players..."}):s.length===0?re.jsx("p",{children:"No players yet"}):s.map(p=>re.jsxs("div",{className:`player-item ${p.id===n?"current-player":""}`,children:[re.jsx("div",{className:"player-avatar"}),re.jsx("span",{className:"player-name",children:p.nickname}),p.is_host&&re.jsx("span",{className:"host-badge",children:"HOST"})]},p.id))}),re.jsx("button",{className:"btn btn-secondary btn-small",children:"LOAD MORE"})]})}function eh(o){const[n,s]=ye.useState(null),[l,d]=ye.useState(!0),[c,u]=ye.useState(null);async function p(){try{d(!0);const{data:g,error:v}=await Re.from("games").select("*").eq("id",o).single();if(v)throw v;s(g)}catch(g){u(g instanceof Error?g:new Error("Failed to fetch game"))}finally{d(!1)}}return ye.useEffect(()=>{if(!o){s(null),d(!1);return}p();let g=null;g=setInterval(()=>{p()},1e3);let v=null;try{v=Re.channel(`game:${o}`).on("postgres_changes",{event:"*",schema:"public",table:"games",filter:`id=eq.${o}`},k=>{(k.eventType==="UPDATE"||k.eventType==="INSERT")&&(console.log("Game update received via realtime:",k),s(k.new))}).subscribe(k=>{k==="SUBSCRIBED"&&(console.log("Game hook: Successfully subscribed to realtime updates"),g&&(clearInterval(g),g=setInterval(()=>{p()},2e3)))})}catch{console.warn("Game hook: Realtime not available, using polling only")}return()=>{g&&clearInterval(g),v&&Re.removeChannel(v)}},[o]),{game:n,loading:l,error:c,refetch:p}}class Wy{audioContext=null;constructor(){typeof window<"u"&&(document.addEventListener("click",this.initAudioContext,{once:!0}),document.addEventListener("keydown",this.initAudioContext,{once:!0}))}initAudioContext=()=>{this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext))};playTone(n,s,l="square",d=.1){if(this.audioContext||this.initAudioContext(),!this.audioContext)return;const c=this.audioContext.createOscillator(),u=this.audioContext.createGain();c.connect(u),u.connect(this.audioContext.destination),c.frequency.value=n,c.type=l,u.gain.setValueAtTime(d,this.audioContext.currentTime),u.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s),c.start(this.audioContext.currentTime),c.stop(this.audioContext.currentTime+s)}playClick(){this.playTone(800,.1,"square",.15)}playHover(){this.playTone(600,.05,"square",.08)}playDraw(){this.playTone(400,.05,"sawtooth",.1)}playSuccess(){this.playTone(600,.1,"square",.15),setTimeout(()=>{this.playTone(800,.15,"square",.15)},100)}playError(){this.playTone(200,.2,"sawtooth",.2)}playSubmit(){this.playTone(400,.1,"square",.15),setTimeout(()=>{this.playTone(600,.1,"square",.15)},100),setTimeout(()=>{this.playTone(800,.15,"square",.15)},200)}playTransition(){this.playTone(800,.1,"square",.15),setTimeout(()=>{this.playTone(600,.1,"square",.15)},100),setTimeout(()=>{this.playTone(400,.15,"square",.15)},200)}playWarning(){this.playTone(300,.2,"square",.2),setTimeout(()=>{this.playTone(300,.2,"square",.2)},200)}playTick(){this.playTone(500,.05,"square",.08)}playFrameComplete(){this.playTone(700,.1,"square",.12)}playPlayerJoin(){this.playTone(400,.08,"square",.12),setTimeout(()=>{this.playTone(500,.08,"square",.12)},80),setTimeout(()=>{this.playTone(600,.08,"square",.12)},160)}playGameStart(){this.playTone(600,.1,"square",.15),setTimeout(()=>{this.playTone(700,.1,"square",.15)},100),setTimeout(()=>{this.playTone(800,.1,"square",.15)},200),setTimeout(()=>{this.playTone(1e3,.2,"square",.15)},300)}playTimerLow(){this.playTone(250,.15,"sawtooth",.15)}playDrawingComplete(){this.playTone(500,.1,"square",.15),setTimeout(()=>{this.playTone(600,.1,"square",.15)},100),setTimeout(()=>{this.playTone(700,.15,"square",.15)},200)}playDownload(){this.playTone(600,.1,"square",.15),setTimeout(()=>{this.playTone(800,.15,"square",.15)},100)}}const Vt=new Wy;function $y({gameId:o,playerId:n,onGameJoined:s,onGameStatusChange:l}){const{game:d}=eh(o),[c,u]=ye.useState(!1),[p,g]=ye.useState(!1),[v,k]=ye.useState(!1),[T,E]=ye.useState(!1);ye.useEffect(()=>{d?.status&&d.status!=="lobby"&&(console.log("Game status changed via useGame hook:",d.status),l(d.status))},[d?.status,l]);const S=ye.useRef(null);ye.useEffect(()=>{if(!o)return;let L=null,x=null;d?.status?S.current=d.status:Re.from("games").select("status").eq("id",o).single().then(({data:_,error:R})=>{!R&&_&&(S.current=_.status)}),x=setInterval(async()=>{try{const{data:_,error:R}=await Re.from("games").select("status").eq("id",o).single();if(!R&&_){const I=_.status,U=S.current;U!==null&&I!==U&&(console.log("Game status changed via polling:",U,"->",I),I!=="lobby"&&l(I)),S.current=I}}catch(_){console.error("Error polling game status:",_)}},1e3);try{L=Re.channel(`game-status-sync:${o}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"games",filter:`id=eq.${o}`},_=>{console.log("Game status update received via realtime:",_);const R=_.new,I=S.current;S.current=R.status,R.status!=="lobby"&&I!==R.status&&l(R.status)}).subscribe(_=>{console.log("Game status subscription status:",_),_==="SUBSCRIBED"&&console.log("Successfully subscribed to game status updates - realtime active")})}catch(_){console.warn("Realtime not available for game status, using polling only:",_)}return()=>{L&&Re.removeChannel(L),x&&clearInterval(x)}},[o,d?.status,l]),ye.useEffect(()=>{d&&n&&o&&Re.from("players").select("is_host").eq("id",n).eq("game_id",d.id).single().then(({data:L,error:x})=>{!x&&L&&E(L.is_host)})},[d,n,o]);const C=(L,x)=>{s(L,x),u(!1),g(!1)},b=(L,x)=>{s(L,x),u(!1),g(!1)},N=async()=>{if(!o||!d){console.error("Cannot start game: missing gameId or game");return}k(!0);try{const{data:L,error:x}=await Re.from("players").select("id").eq("game_id",o);if(x)throw console.error("Error fetching players:",x),x;const R=L?.length||1,{error:I}=await Re.from("games").update({total_rounds:R}).eq("id",o);if(I)throw console.error("Error updating total_rounds:",I),I;const{data:U,error:W}=await Re.from("rounds").insert({game_id:o,round_number:1,prompt:""}).select().single();if(W)throw console.error("Error creating round:",W),W;const{error:j}=await Re.from("games").update({status:"prompt",current_round:1}).eq("id",o);if(j)throw console.error("Error updating game status:",j),j.code==="23514"||j.message.includes("check constraint")?new Error(`Database constraint error: Please update the games table to allow "prompt" status. Run: ALTER TABLE games DROP CONSTRAINT IF EXISTS games_status_check; ALTER TABLE games ADD CONSTRAINT games_status_check CHECK (status IN ('lobby', 'drawing', 'viewing', 'prompt', 'complete'));`):j;l("prompt")}catch(L){console.error("Error starting game:",L),alert(`Error starting game: ${L instanceof Error?L.message:"Unknown error"}`)}finally{k(!1)}};return o?re.jsx("div",{className:"lobby-screen",children:re.jsxs("div",{className:"lobby-layout",children:[re.jsx("div",{className:"lobby-left",children:re.jsx(Hy,{gameId:o,playerId:n})}),re.jsxs("div",{className:"lobby-center",children:[re.jsx("h1",{className:"game-title",children:"CEL PHONE"}),d?.status==="lobby"&&re.jsxs("div",{className:"game-info",children:[re.jsxs("div",{className:"room-code-display",children:[re.jsx("p",{className:"room-code-label",children:"Room Code"}),re.jsx("p",{className:"room-code-value",children:d?.room_code})]}),re.jsxs("p",{className:"frames-info",children:["Frames per Round: ",re.jsx("strong",{children:d?.frames_per_round})]}),T&&re.jsx("button",{className:"btn btn-primary btn-large",onClick:()=>{Vt.playSubmit(),N()},onMouseEnter:()=>Vt.playHover(),disabled:v,children:v?"Starting...":"PLAY"}),!T&&re.jsx("p",{className:"waiting-text",children:"Waiting for host to start the game..."})]})]})]})}):re.jsxs("div",{className:"lobby-screen",children:[re.jsxs("div",{className:"lobby-header",children:[re.jsx("h1",{className:"game-title",children:"CEL PHONE"}),re.jsx("p",{className:"game-subtitle",children:"Create or join an animation game"}),re.jsxs("div",{className:"lobby-actions",children:[re.jsx("button",{className:"btn btn-primary btn-large",onClick:()=>{Vt.playClick(),u(!0),g(!1)},onMouseEnter:()=>Vt.playHover(),children:"CREATE GAME"}),re.jsx("button",{className:"btn btn-secondary btn-large",onClick:()=>{Vt.playClick(),g(!0),u(!1)},onMouseEnter:()=>Vt.playHover(),children:"JOIN GAME"})]})]}),c&&re.jsx(qy,{onGameCreated:C}),p&&re.jsx(Vy,{onGameJoined:b})]})}var Vd={exports:{}},xu={},nf={},rf={},ap;function Qe(){return ap||(ap=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const n=Math.PI/180;function s(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof k0<"u"?k0:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.22",isBrowser:s(),isUnminified:/param/.test((function(d){}).toString()),dblClickWindow:400,getAngle(d){return o.Konva.angleDeg?d*n:d},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var d;return(d=o.Konva.Transformer)===null||d===void 0?void 0:d.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(d){o.glob.Konva=d}};const l=d=>{o.Konva[d.prototype.getClassName()]=d};o._registerNode=l,o.Konva._injectGlobal(o.Konva)})(rf)),rf}var sf={},lp;function Ht(){return lp||(lp=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const n=Qe();class s{constructor(R=[1,0,0,1,0,0]){this.dirty=!1,this.m=R&&R.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new s(this.m)}copyInto(R){R.m[0]=this.m[0],R.m[1]=this.m[1],R.m[2]=this.m[2],R.m[3]=this.m[3],R.m[4]=this.m[4],R.m[5]=this.m[5]}point(R){const I=this.m;return{x:I[0]*R.x+I[2]*R.y+I[4],y:I[1]*R.x+I[3]*R.y+I[5]}}translate(R,I){return this.m[4]+=this.m[0]*R+this.m[2]*I,this.m[5]+=this.m[1]*R+this.m[3]*I,this}scale(R,I){return this.m[0]*=R,this.m[1]*=R,this.m[2]*=I,this.m[3]*=I,this}rotate(R){const I=Math.cos(R),U=Math.sin(R),W=this.m[0]*I+this.m[2]*U,j=this.m[1]*I+this.m[3]*U,F=this.m[0]*-U+this.m[2]*I,G=this.m[1]*-U+this.m[3]*I;return this.m[0]=W,this.m[1]=j,this.m[2]=F,this.m[3]=G,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(R,I){const U=this.m[0]+this.m[2]*I,W=this.m[1]+this.m[3]*I,j=this.m[2]+this.m[0]*R,F=this.m[3]+this.m[1]*R;return this.m[0]=U,this.m[1]=W,this.m[2]=j,this.m[3]=F,this}multiply(R){const I=this.m[0]*R.m[0]+this.m[2]*R.m[1],U=this.m[1]*R.m[0]+this.m[3]*R.m[1],W=this.m[0]*R.m[2]+this.m[2]*R.m[3],j=this.m[1]*R.m[2]+this.m[3]*R.m[3],F=this.m[0]*R.m[4]+this.m[2]*R.m[5]+this.m[4],G=this.m[1]*R.m[4]+this.m[3]*R.m[5]+this.m[5];return this.m[0]=I,this.m[1]=U,this.m[2]=W,this.m[3]=j,this.m[4]=F,this.m[5]=G,this}invert(){const R=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),I=this.m[3]*R,U=-this.m[1]*R,W=-this.m[2]*R,j=this.m[0]*R,F=R*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),G=R*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=I,this.m[1]=U,this.m[2]=W,this.m[3]=j,this.m[4]=F,this.m[5]=G,this}getMatrix(){return this.m}decompose(){const R=this.m[0],I=this.m[1],U=this.m[2],W=this.m[3],j=this.m[4],F=this.m[5],G=R*W-I*U,B={x:j,y:F,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(R!=0||I!=0){const K=Math.sqrt(R*R+I*I);B.rotation=I>0?Math.acos(R/K):-Math.acos(R/K),B.scaleX=K,B.scaleY=G/K,B.skewX=(R*U+I*W)/G,B.skewY=0}else if(U!=0||W!=0){const K=Math.sqrt(U*U+W*W);B.rotation=Math.PI/2-(W>0?Math.acos(-U/K):-Math.acos(U/K)),B.scaleX=G/K,B.scaleY=K,B.skewX=0,B.skewY=(R*U+I*W)/G}return B.rotation=o.Util._getRotation(B.rotation),B}}o.Transform=s;const l="[object Array]",d="[object Number]",c="[object String]",u="[object Boolean]",p=Math.PI/180,g=180/Math.PI,v="#",k="",T="0",E="Konva warning: ",S="Konva error: ",C="rgb(",b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},N=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let L=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(_){setTimeout(_,60)};o.Util={_isElement(_){return!!(_&&_.nodeType==1)},_isFunction(_){return!!(_&&_.constructor&&_.call&&_.apply)},_isPlainObject(_){return!!_&&_.constructor===Object},_isArray(_){return Object.prototype.toString.call(_)===l},_isNumber(_){return Object.prototype.toString.call(_)===d&&!isNaN(_)&&isFinite(_)},_isString(_){return Object.prototype.toString.call(_)===c},_isBoolean(_){return Object.prototype.toString.call(_)===u},isObject(_){return _ instanceof Object},isValidSelector(_){if(typeof _!="string")return!1;const R=_[0];return R==="#"||R==="."||R===R.toUpperCase()},_sign(_){return _===0||_>0?1:-1},requestAnimFrame(_){L.push(_),L.length===1&&x(function(){const R=L;L=[],R.forEach(function(I){I()})})},createCanvasElement(){const _=document.createElement("canvas");try{_.style=_.style||{}}catch{}return _},createImageElement(){return document.createElement("img")},_isInDocument(_){for(;_=_.parentNode;)if(_==document)return!0;return!1},_urlToImage(_,R){const I=o.Util.createImageElement();I.onload=function(){R(I)},I.src=_},_rgbToHex(_,R,I){return((1<<24)+(_<<16)+(R<<8)+I).toString(16).slice(1)},_hexToRgb(_){_=_.replace(v,k);const R=parseInt(_,16);return{r:R>>16&255,g:R>>8&255,b:R&255}},getRandomColor(){let _=(Math.random()*16777215<<0).toString(16);for(;_.length<6;)_=T+_;return v+_},getRGB(_){let R;return _ in b?(R=b[_],{r:R[0],g:R[1],b:R[2]}):_[0]===v?this._hexToRgb(_.substring(1)):_.substr(0,4)===C?(R=N.exec(_.replace(/ /g,"")),{r:parseInt(R[1],10),g:parseInt(R[2],10),b:parseInt(R[3],10)}):{r:0,g:0,b:0}},colorToRGBA(_){return _=_||"black",o.Util._namedColorToRBA(_)||o.Util._hex3ColorToRGBA(_)||o.Util._hex4ColorToRGBA(_)||o.Util._hex6ColorToRGBA(_)||o.Util._hex8ColorToRGBA(_)||o.Util._rgbColorToRGBA(_)||o.Util._rgbaColorToRGBA(_)||o.Util._hslColorToRGBA(_)},_namedColorToRBA(_){const R=b[_.toLowerCase()];return R?{r:R[0],g:R[1],b:R[2],a:1}:null},_rgbColorToRGBA(_){if(_.indexOf("rgb(")===0){_=_.match(/rgb\(([^)]+)\)/)[1];const R=_.split(/ *, */).map(Number);return{r:R[0],g:R[1],b:R[2],a:1}}},_rgbaColorToRGBA(_){if(_.indexOf("rgba(")===0){_=_.match(/rgba\(([^)]+)\)/)[1];const R=_.split(/ *, */).map((I,U)=>I.slice(-1)==="%"?U===3?parseInt(I)/100:parseInt(I)/100*255:Number(I));return{r:R[0],g:R[1],b:R[2],a:R[3]}}},_hex8ColorToRGBA(_){if(_[0]==="#"&&_.length===9)return{r:parseInt(_.slice(1,3),16),g:parseInt(_.slice(3,5),16),b:parseInt(_.slice(5,7),16),a:parseInt(_.slice(7,9),16)/255}},_hex6ColorToRGBA(_){if(_[0]==="#"&&_.length===7)return{r:parseInt(_.slice(1,3),16),g:parseInt(_.slice(3,5),16),b:parseInt(_.slice(5,7),16),a:1}},_hex4ColorToRGBA(_){if(_[0]==="#"&&_.length===5)return{r:parseInt(_[1]+_[1],16),g:parseInt(_[2]+_[2],16),b:parseInt(_[3]+_[3],16),a:parseInt(_[4]+_[4],16)/255}},_hex3ColorToRGBA(_){if(_[0]==="#"&&_.length===4)return{r:parseInt(_[1]+_[1],16),g:parseInt(_[2]+_[2],16),b:parseInt(_[3]+_[3],16),a:1}},_hslColorToRGBA(_){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(_)){const[R,...I]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_),U=Number(I[0])/360,W=Number(I[1])/100,j=Number(I[2])/100;let F,G,B;if(W===0)return B=j*255,{r:Math.round(B),g:Math.round(B),b:Math.round(B),a:1};j<.5?F=j*(1+W):F=j+W-j*W;const K=2*j-F,$=[0,0,0];for(let J=0;J<3;J++)G=U+1/3*-(J-1),G<0&&G++,G>1&&G--,6*G<1?B=K+(F-K)*6*G:2*G<1?B=F:3*G<2?B=K+(F-K)*(2/3-G)*6:B=K,$[J]=B*255;return{r:Math.round($[0]),g:Math.round($[1]),b:Math.round($[2]),a:1}}},haveIntersection(_,R){return!(R.x>_.x+_.width||R.x+R.width<_.x||R.y>_.y+_.height||R.y+R.height<_.y)},cloneObject(_){const R={};for(const I in _)this._isPlainObject(_[I])?R[I]=this.cloneObject(_[I]):this._isArray(_[I])?R[I]=this.cloneArray(_[I]):R[I]=_[I];return R},cloneArray(_){return _.slice(0)},degToRad(_){return _*p},radToDeg(_){return _*g},_degToRad(_){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad(_)},_radToDeg(_){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg(_)},_getRotation(_){return n.Konva.angleDeg?o.Util.radToDeg(_):_},_capitalize(_){return _.charAt(0).toUpperCase()+_.slice(1)},throw(_){throw new Error(S+_)},error(_){console.error(S+_)},warn(_){n.Konva.showWarnings&&console.warn(E+_)},each(_,R){for(const I in _)R(I,_[I])},_inRange(_,R,I){return R<=_&&_<I},_getProjectionToSegment(_,R,I,U,W,j){let F,G,B;const K=(_-I)*(_-I)+(R-U)*(R-U);if(K==0)F=_,G=R,B=(W-I)*(W-I)+(j-U)*(j-U);else{const $=((W-_)*(I-_)+(j-R)*(U-R))/K;$<0?(F=_,G=R,B=(_-W)*(_-W)+(R-j)*(R-j)):$>1?(F=I,G=U,B=(I-W)*(I-W)+(U-j)*(U-j)):(F=_+$*(I-_),G=R+$*(U-R),B=(F-W)*(F-W)+(G-j)*(G-j))}return[F,G,B]},_getProjectionToLine(_,R,I){const U=o.Util.cloneObject(_);let W=Number.MAX_VALUE;return R.forEach(function(j,F){if(!I&&F===R.length-1)return;const G=R[(F+1)%R.length],B=o.Util._getProjectionToSegment(j.x,j.y,G.x,G.y,_.x,_.y),K=B[0],$=B[1],J=B[2];J<W&&(U.x=K,U.y=$,W=J)}),U},_prepareArrayForTween(_,R,I){const U=[],W=[];if(_.length>R.length){const F=R;R=_,_=F}for(let F=0;F<_.length;F+=2)U.push({x:_[F],y:_[F+1]});for(let F=0;F<R.length;F+=2)W.push({x:R[F],y:R[F+1]});const j=[];return W.forEach(function(F){const G=o.Util._getProjectionToLine(F,U,I);j.push(G.x),j.push(G.y)}),j},_prepareToStringify(_){let R;_.visitedByCircularReferenceRemoval=!0;for(const I in _)if(_.hasOwnProperty(I)&&_[I]&&typeof _[I]=="object"){if(R=Object.getOwnPropertyDescriptor(_,I),_[I].visitedByCircularReferenceRemoval||o.Util._isElement(_[I]))if(R.configurable)delete _[I];else return null;else if(o.Util._prepareToStringify(_[I])===null)if(R.configurable)delete _[I];else return null}return delete _.visitedByCircularReferenceRemoval,_},_assign(_,R){for(const I in R)_[I]=R[I];return _},_getFirstPointerId(_){return _.touches?_.changedTouches[0].identifier:_.pointerId||999},releaseCanvas(..._){n.Konva.releaseCanvasOnDestroy&&_.forEach(R=>{R.width=0,R.height=0})},drawRoundedRectPath(_,R,I,U){let W=0,j=0,F=0,G=0;typeof U=="number"?W=j=F=G=Math.min(U,R/2,I/2):(W=Math.min(U[0]||0,R/2,I/2),j=Math.min(U[1]||0,R/2,I/2),G=Math.min(U[2]||0,R/2,I/2),F=Math.min(U[3]||0,R/2,I/2)),_.moveTo(W,0),_.lineTo(R-j,0),_.arc(R-j,j,j,Math.PI*3/2,0,!1),_.lineTo(R,I-G),_.arc(R-G,I-G,G,0,Math.PI/2,!1),_.lineTo(F,I),_.arc(F,I-F,F,Math.PI/2,Math.PI,!1),_.lineTo(0,W),_.arc(W,W,W,Math.PI,Math.PI*3/2,!1)}}})(sf)),sf}var Pu={},ms={},vs={},up;function _m(){if(up)return vs;up=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.HitContext=vs.SceneContext=vs.Context=void 0;const o=Ht(),n=Qe();function s(L){const x=[],_=L.length,R=o.Util;for(let I=0;I<_;I++){let U=L[I];R._isNumber(U)?U=Math.round(U*1e3)/1e3:R._isString(U)||(U=U+""),x.push(U)}return x}const l=",",d="(",c=")",u="([",p="])",g=";",v="()",k="=",T=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],E=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],S=100;let C=class{constructor(x){this.canvas=x,n.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(x){x.fillEnabled()&&this._fill(x)}_fill(x){}strokeShape(x){x.hasStroke()&&this._stroke(x)}_stroke(x){}fillStrokeShape(x){x.attrs.fillAfterStrokeEnabled?(this.strokeShape(x),this.fillShape(x)):(this.fillShape(x),this.strokeShape(x))}getTrace(x,_){let R=this.traceArr,I=R.length,U="",W,j,F,G;for(W=0;W<I;W++)j=R[W],F=j.method,F?(G=j.args,U+=F,x?U+=v:o.Util._isArray(G[0])?U+=u+G.join(l)+p:(_&&(G=G.map(B=>typeof B=="number"?Math.floor(B):B)),U+=d+G.join(l)+c)):(U+=j.property,x||(U+=k+j.val)),U+=g;return U}clearTrace(){this.traceArr=[]}_trace(x){let _=this.traceArr,R;_.push(x),R=_.length,R>=S&&_.shift()}reset(){const x=this.getCanvas().getPixelRatio();this.setTransform(1*x,0,0,1*x,0,0)}getCanvas(){return this.canvas}clear(x){const _=this.getCanvas();x?this.clearRect(x.x||0,x.y||0,x.width||0,x.height||0):this.clearRect(0,0,_.getWidth()/_.pixelRatio,_.getHeight()/_.pixelRatio)}_applyLineCap(x){const _=x.attrs.lineCap;_&&this.setAttr("lineCap",_)}_applyOpacity(x){const _=x.getAbsoluteOpacity();_!==1&&this.setAttr("globalAlpha",_)}_applyLineJoin(x){const _=x.attrs.lineJoin;_&&this.setAttr("lineJoin",_)}setAttr(x,_){this._context[x]=_}arc(x,_,R,I,U,W){this._context.arc(x,_,R,I,U,W)}arcTo(x,_,R,I,U){this._context.arcTo(x,_,R,I,U)}beginPath(){this._context.beginPath()}bezierCurveTo(x,_,R,I,U,W){this._context.bezierCurveTo(x,_,R,I,U,W)}clearRect(x,_,R,I){this._context.clearRect(x,_,R,I)}clip(...x){this._context.clip.apply(this._context,x)}closePath(){this._context.closePath()}createImageData(x,_){const R=arguments;if(R.length===2)return this._context.createImageData(x,_);if(R.length===1)return this._context.createImageData(x)}createLinearGradient(x,_,R,I){return this._context.createLinearGradient(x,_,R,I)}createPattern(x,_){return this._context.createPattern(x,_)}createRadialGradient(x,_,R,I,U,W){return this._context.createRadialGradient(x,_,R,I,U,W)}drawImage(x,_,R,I,U,W,j,F,G){const B=arguments,K=this._context;B.length===3?K.drawImage(x,_,R):B.length===5?K.drawImage(x,_,R,I,U):B.length===9&&K.drawImage(x,_,R,I,U,W,j,F,G)}ellipse(x,_,R,I,U,W,j,F){this._context.ellipse(x,_,R,I,U,W,j,F)}isPointInPath(x,_,R,I){return R?this._context.isPointInPath(R,x,_,I):this._context.isPointInPath(x,_,I)}fill(...x){this._context.fill.apply(this._context,x)}fillRect(x,_,R,I){this._context.fillRect(x,_,R,I)}strokeRect(x,_,R,I){this._context.strokeRect(x,_,R,I)}fillText(x,_,R,I){I?this._context.fillText(x,_,R,I):this._context.fillText(x,_,R)}measureText(x){return this._context.measureText(x)}getImageData(x,_,R,I){return this._context.getImageData(x,_,R,I)}lineTo(x,_){this._context.lineTo(x,_)}moveTo(x,_){this._context.moveTo(x,_)}rect(x,_,R,I){this._context.rect(x,_,R,I)}roundRect(x,_,R,I,U){this._context.roundRect(x,_,R,I,U)}putImageData(x,_,R){this._context.putImageData(x,_,R)}quadraticCurveTo(x,_,R,I){this._context.quadraticCurveTo(x,_,R,I)}restore(){this._context.restore()}rotate(x){this._context.rotate(x)}save(){this._context.save()}scale(x,_){this._context.scale(x,_)}setLineDash(x){this._context.setLineDash?this._context.setLineDash(x):"mozDash"in this._context?this._context.mozDash=x:"webkitLineDash"in this._context&&(this._context.webkitLineDash=x)}getLineDash(){return this._context.getLineDash()}setTransform(x,_,R,I,U,W){this._context.setTransform(x,_,R,I,U,W)}stroke(x){x?this._context.stroke(x):this._context.stroke()}strokeText(x,_,R,I){this._context.strokeText(x,_,R,I)}transform(x,_,R,I,U,W){this._context.transform(x,_,R,I,U,W)}translate(x,_){this._context.translate(x,_)}_enableTrace(){let x=this,_=T.length,R=this.setAttr,I,U;const W=function(j){let F=x[j],G;x[j]=function(){return U=s(Array.prototype.slice.call(arguments,0)),G=F.apply(x,arguments),x._trace({method:j,args:U}),G}};for(I=0;I<_;I++)W(T[I]);x.setAttr=function(){R.apply(x,arguments);const j=arguments[0];let F=arguments[1];(j==="shadowOffsetX"||j==="shadowOffsetY"||j==="shadowBlur")&&(F=F/this.canvas.getPixelRatio()),x._trace({property:j,val:F})}}_applyGlobalCompositeOperation(x){const _=x.attrs.globalCompositeOperation;!_||_==="source-over"||this.setAttr("globalCompositeOperation",_)}};vs.Context=C,E.forEach(function(L){Object.defineProperty(C.prototype,L,{get(){return this._context[L]},set(x){this._context[L]=x}})});class b extends C{constructor(x,{willReadFrequently:_=!1}={}){super(x),this._context=x._canvas.getContext("2d",{willReadFrequently:_})}_fillColor(x){const _=x.fill();this.setAttr("fillStyle",_),x._fillFunc(this)}_fillPattern(x){this.setAttr("fillStyle",x._getFillPattern()),x._fillFunc(this)}_fillLinearGradient(x){const _=x._getLinearGradient();_&&(this.setAttr("fillStyle",_),x._fillFunc(this))}_fillRadialGradient(x){const _=x._getRadialGradient();_&&(this.setAttr("fillStyle",_),x._fillFunc(this))}_fill(x){const _=x.fill(),R=x.getFillPriority();if(_&&R==="color"){this._fillColor(x);return}const I=x.getFillPatternImage();if(I&&R==="pattern"){this._fillPattern(x);return}const U=x.getFillLinearGradientColorStops();if(U&&R==="linear-gradient"){this._fillLinearGradient(x);return}const W=x.getFillRadialGradientColorStops();if(W&&R==="radial-gradient"){this._fillRadialGradient(x);return}_?this._fillColor(x):I?this._fillPattern(x):U?this._fillLinearGradient(x):W&&this._fillRadialGradient(x)}_strokeLinearGradient(x){const _=x.getStrokeLinearGradientStartPoint(),R=x.getStrokeLinearGradientEndPoint(),I=x.getStrokeLinearGradientColorStops(),U=this.createLinearGradient(_.x,_.y,R.x,R.y);if(I){for(let W=0;W<I.length;W+=2)U.addColorStop(I[W],I[W+1]);this.setAttr("strokeStyle",U)}}_stroke(x){const _=x.dash(),R=x.getStrokeScaleEnabled();if(x.hasStroke()){if(!R){this.save();const U=this.getCanvas().getPixelRatio();this.setTransform(U,0,0,U,0,0)}this._applyLineCap(x),_&&x.dashEnabled()&&(this.setLineDash(_),this.setAttr("lineDashOffset",x.dashOffset())),this.setAttr("lineWidth",x.strokeWidth()),x.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),x.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(x):this.setAttr("strokeStyle",x.stroke()),x._strokeFunc(this),R||this.restore()}}_applyShadow(x){var _,R,I;const U=(_=x.getShadowRGBA())!==null&&_!==void 0?_:"black",W=(R=x.getShadowBlur())!==null&&R!==void 0?R:5,j=(I=x.getShadowOffset())!==null&&I!==void 0?I:{x:0,y:0},F=x.getAbsoluteScale(),G=this.canvas.getPixelRatio(),B=F.x*G,K=F.y*G;this.setAttr("shadowColor",U),this.setAttr("shadowBlur",W*Math.min(Math.abs(B),Math.abs(K))),this.setAttr("shadowOffsetX",j.x*B),this.setAttr("shadowOffsetY",j.y*K)}}vs.SceneContext=b;class N extends C{constructor(x){super(x),this._context=x._canvas.getContext("2d",{willReadFrequently:!0})}_fill(x){this.save(),this.setAttr("fillStyle",x.colorKey),x._fillFuncHit(this),this.restore()}strokeShape(x){x.hasHitStroke()&&this._stroke(x)}_stroke(x){if(x.hasHitStroke()){const _=x.getStrokeScaleEnabled();if(!_){this.save();const U=this.getCanvas().getPixelRatio();this.setTransform(U,0,0,U,0,0)}this._applyLineCap(x);const R=x.hitStrokeWidth(),I=R==="auto"?x.strokeWidth():R;this.setAttr("lineWidth",I),this.setAttr("strokeStyle",x.colorKey),x._strokeFuncHit(this),_||this.restore()}}}return vs.HitContext=N,vs}var cp;function th(){if(cp)return ms;cp=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.HitCanvas=ms.SceneCanvas=ms.Canvas=void 0;const o=Ht(),n=_m(),s=Qe();let l;function d(){if(l)return l;const g=o.Util.createCanvasElement(),v=g.getContext("2d");return l=(function(){const k=s.Konva._global.devicePixelRatio||1,T=v.webkitBackingStorePixelRatio||v.mozBackingStorePixelRatio||v.msBackingStorePixelRatio||v.oBackingStorePixelRatio||v.backingStorePixelRatio||1;return k/T})(),o.Util.releaseCanvas(g),l}let c=class{constructor(v){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const T=(v||{}).pixelRatio||s.Konva.pixelRatio||d();this.pixelRatio=T,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(v){const k=this.pixelRatio;this.pixelRatio=v,this.setSize(this.getWidth()/k,this.getHeight()/k)}setWidth(v){this.width=this._canvas.width=v*this.pixelRatio,this._canvas.style.width=v+"px";const k=this.pixelRatio;this.getContext()._context.scale(k,k)}setHeight(v){this.height=this._canvas.height=v*this.pixelRatio,this._canvas.style.height=v+"px";const k=this.pixelRatio;this.getContext()._context.scale(k,k)}getWidth(){return this.width}getHeight(){return this.height}setSize(v,k){this.setWidth(v||0),this.setHeight(k||0)}toDataURL(v,k){try{return this._canvas.toDataURL(v,k)}catch{try{return this._canvas.toDataURL()}catch(E){return o.Util.error("Unable to get data URL. "+E.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ms.Canvas=c;class u extends c{constructor(v={width:0,height:0,willReadFrequently:!1}){super(v),this.context=new n.SceneContext(this,{willReadFrequently:v.willReadFrequently}),this.setSize(v.width,v.height)}}ms.SceneCanvas=u;class p extends c{constructor(v={width:0,height:0}){super(v),this.hitCanvas=!0,this.context=new n.HitContext(this),this.setSize(v.width,v.height)}}return ms.HitCanvas=p,ms}var of={},dp;function Bf(){return dp||(dp=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const n=Qe(),s=Ht();o.DD={get isDragging(){let l=!1;return o.DD._dragElements.forEach(d=>{d.dragStatus==="dragging"&&(l=!0)}),l},justDragged:!1,get node(){let l;return o.DD._dragElements.forEach(d=>{l=d.node}),l},_dragElements:new Map,_drag(l){const d=[];o.DD._dragElements.forEach((c,u)=>{const{node:p}=c,g=p.getStage();g.setPointersPositions(l),c.pointerId===void 0&&(c.pointerId=s.Util._getFirstPointerId(l));const v=g._changedPointerPositions.find(k=>k.id===c.pointerId);if(v){if(c.dragStatus!=="dragging"){const k=p.dragDistance();if(Math.max(Math.abs(v.x-c.startPointerPos.x),Math.abs(v.y-c.startPointerPos.y))<k||(p.startDrag({evt:l}),!p.isDragging()))return}p._setDragPosition(l,c),d.push(p)}}),d.forEach(c=>{c.fire("dragmove",{type:"dragmove",target:c,evt:l},!0)})},_endDragBefore(l){const d=[];o.DD._dragElements.forEach(c=>{const{node:u}=c,p=u.getStage();if(l&&p.setPointersPositions(l),!p._changedPointerPositions.find(k=>k.id===c.pointerId))return;(c.dragStatus==="dragging"||c.dragStatus==="stopped")&&(o.DD.justDragged=!0,n.Konva._mouseListenClick=!1,n.Konva._touchListenClick=!1,n.Konva._pointerListenClick=!1,c.dragStatus="stopped");const v=c.node.getLayer()||c.node instanceof n.Konva.Stage&&c.node;v&&d.indexOf(v)===-1&&d.push(v)}),d.forEach(c=>{c.draw()})},_endDragAfter(l){o.DD._dragElements.forEach((d,c)=>{d.dragStatus==="stopped"&&d.node.fire("dragend",{type:"dragend",target:d.node,evt:l},!0),d.dragStatus!=="dragging"&&o.DD._dragElements.delete(c)})}},n.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))})(of)),of}var af={},Sr={},hp;function rt(){if(hp)return Sr;hp=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.RGBComponent=l,Sr.alphaComponent=d,Sr.getNumberValidator=c,Sr.getNumberOrArrayOfNumbersValidator=u,Sr.getNumberOrAutoValidator=p,Sr.getStringValidator=g,Sr.getStringOrGradientValidator=v,Sr.getFunctionValidator=k,Sr.getNumberArrayValidator=T,Sr.getBooleanValidator=E,Sr.getComponentValidator=S;const o=Qe(),n=Ht();function s(C){return n.Util._isString(C)?'"'+C+'"':Object.prototype.toString.call(C)==="[object Number]"||n.Util._isBoolean(C)?C:Object.prototype.toString.call(C)}function l(C){return C>255?255:C<0?0:Math.round(C)}function d(C){return C>1?1:C<1e-4?1e-4:C}function c(){if(o.Konva.isUnminified)return function(C,b){return n.Util._isNumber(C)||n.Util.warn(s(C)+' is a not valid value for "'+b+'" attribute. The value should be a number.'),C}}function u(C){if(o.Konva.isUnminified)return function(b,N){let L=n.Util._isNumber(b),x=n.Util._isArray(b)&&b.length==C;return!L&&!x&&n.Util.warn(s(b)+' is a not valid value for "'+N+'" attribute. The value should be a number or Array<number>('+C+")"),b}}function p(){if(o.Konva.isUnminified)return function(C,b){return n.Util._isNumber(C)||C==="auto"||n.Util.warn(s(C)+' is a not valid value for "'+b+'" attribute. The value should be a number or "auto".'),C}}function g(){if(o.Konva.isUnminified)return function(C,b){return n.Util._isString(C)||n.Util.warn(s(C)+' is a not valid value for "'+b+'" attribute. The value should be a string.'),C}}function v(){if(o.Konva.isUnminified)return function(C,b){const N=n.Util._isString(C),L=Object.prototype.toString.call(C)==="[object CanvasGradient]"||C&&C.addColorStop;return N||L||n.Util.warn(s(C)+' is a not valid value for "'+b+'" attribute. The value should be a string or a native gradient.'),C}}function k(){if(o.Konva.isUnminified)return function(C,b){return n.Util._isFunction(C)||n.Util.warn(s(C)+' is a not valid value for "'+b+'" attribute. The value should be a function.'),C}}function T(){if(o.Konva.isUnminified)return function(C,b){const N=Int8Array?Object.getPrototypeOf(Int8Array):null;return N&&C instanceof N||(n.Util._isArray(C)?C.forEach(function(L){n.Util._isNumber(L)||n.Util.warn('"'+b+'" attribute has non numeric element '+L+". Make sure that all elements are numbers.")}):n.Util.warn(s(C)+' is a not valid value for "'+b+'" attribute. The value should be a array of numbers.')),C}}function E(){if(o.Konva.isUnminified)return function(C,b){return C===!0||C===!1||n.Util.warn(s(C)+' is a not valid value for "'+b+'" attribute. The value should be a boolean.'),C}}function S(C){if(o.Konva.isUnminified)return function(b,N){return b==null||n.Util.isObject(b)||n.Util.warn(s(b)+' is a not valid value for "'+N+'" attribute. The value should be an object with properties '+C),b}}return Sr}var fp;function tt(){return fp||(fp=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const n=Ht(),s=rt(),l="get",d="set";o.Factory={addGetterSetter(c,u,p,g,v){o.Factory.addGetter(c,u,p),o.Factory.addSetter(c,u,g,v),o.Factory.addOverloadedGetterSetter(c,u)},addGetter(c,u,p){const g=l+n.Util._capitalize(u);c.prototype[g]=c.prototype[g]||function(){const v=this.attrs[u];return v===void 0?p:v}},addSetter(c,u,p,g){const v=d+n.Util._capitalize(u);c.prototype[v]||o.Factory.overWriteSetter(c,u,p,g)},overWriteSetter(c,u,p,g){const v=d+n.Util._capitalize(u);c.prototype[v]=function(k){return p&&k!==void 0&&k!==null&&(k=p.call(this,k,u)),this._setAttr(u,k),g&&g.call(this),this}},addComponentsGetterSetter(c,u,p,g,v){const k=p.length,T=n.Util._capitalize,E=l+T(u),S=d+T(u);c.prototype[E]=function(){const b={};for(let N=0;N<k;N++){const L=p[N];b[L]=this.getAttr(u+T(L))}return b};const C=(0,s.getComponentValidator)(p);c.prototype[S]=function(b){const N=this.attrs[u];g&&(b=g.call(this,b,u)),C&&C.call(this,b,u);for(const L in b)b.hasOwnProperty(L)&&this._setAttr(u+T(L),b[L]);return b||p.forEach(L=>{this._setAttr(u+T(L),void 0)}),this._fireChangeEvent(u,N,b),v&&v.call(this),this},o.Factory.addOverloadedGetterSetter(c,u)},addOverloadedGetterSetter(c,u){const p=n.Util._capitalize(u),g=d+p,v=l+p;c.prototype[u]=function(){return arguments.length?(this[g](arguments[0]),this):this[v]()}},addDeprecatedGetterSetter(c,u,p,g){n.Util.error("Adding deprecated "+u);const v=l+n.Util._capitalize(u),k=u+" property is deprecated and will be removed soon. Look at Konva change log for more information.";c.prototype[v]=function(){n.Util.error(k);const T=this.attrs[u];return T===void 0?p:T},o.Factory.addSetter(c,u,g,function(){n.Util.error(k)}),o.Factory.addOverloadedGetterSetter(c,u)},backCompat(c,u){n.Util.each(u,function(p,g){const v=c.prototype[g],k=l+n.Util._capitalize(p),T=d+n.Util._capitalize(p);function E(){v.apply(this,arguments),n.Util.error('"'+p+'" method is deprecated and will be removed soon. Use ""'+g+'" instead.')}c.prototype[p]=E,c.prototype[k]=E,c.prototype[T]=E})},afterSetFilter(){this._filterUpToDate=!1}}})(af)),af}var pp;function Zt(){if(pp)return Pu;pp=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.Node=void 0;const o=th(),n=Bf(),s=tt(),l=Qe(),d=Ht(),c=rt(),u="absoluteOpacity",p="allEventListeners",g="absoluteTransform",v="absoluteScale",k="canvas",T="Change",E="children",S="konva",C="listening",b="mouseenter",N="mouseleave",L="pointerenter",x="pointerleave",_="touchenter",R="touchleave",I="set",U="Shape",W=" ",j="stage",F="transform",G="Stage",B="visible",K=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(W);let $=1,J=class Rf{constructor(A){this._id=$++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(A),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(A){(A===F||A===g)&&this._cache.get(A)?this._cache.get(A).dirty=!0:A?this._cache.delete(A):this._cache.clear()}_getCache(A,D){let V=this._cache.get(A);return(V===void 0||(A===F||A===g)&&V.dirty===!0)&&(V=D.call(this),this._cache.set(A,V)),V}_calculate(A,D,V){if(!this._attachedDepsListeners.get(A)){const q=D.map(M=>M+"Change.konva").join(W);this.on(q,()=>{this._clearCache(A)}),this._attachedDepsListeners.set(A,!0)}return this._getCache(A,V)}_getCanvasCache(){return this._cache.get(k)}_clearSelfAndDescendantCache(A){this._clearCache(A),A===g&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(k)){const{scene:A,filter:D,hit:V,buffer:q}=this._cache.get(k);d.Util.releaseCanvas(A,D,V,q),this._cache.delete(k)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(A){const D=A||{};let V={};(D.x===void 0||D.y===void 0||D.width===void 0||D.height===void 0)&&(V=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let q=Math.ceil(D.width||V.width),M=Math.ceil(D.height||V.height),X=D.pixelRatio,ee=D.x===void 0?Math.floor(V.x):D.x,ce=D.y===void 0?Math.floor(V.y):D.y,me=D.offset||0,ae=D.drawBorder||!1,Q=D.hitCanvasPixelRatio||1;if(!q||!M){d.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ie=Math.abs(Math.round(V.x)-ee)>.5?1:0,ve=Math.abs(Math.round(V.y)-ce)>.5?1:0;q+=me*2+ie,M+=me*2+ve,ee-=me,ce-=me;const Se=new o.SceneCanvas({pixelRatio:X,width:q,height:M}),xe=new o.SceneCanvas({pixelRatio:X,width:0,height:0,willReadFrequently:!0}),ze=new o.HitCanvas({pixelRatio:Q,width:q,height:M}),De=Se.getContext(),it=ze.getContext(),Ve=new o.SceneCanvas({width:Se.width/Se.pixelRatio+Math.abs(ee),height:Se.height/Se.pixelRatio+Math.abs(ce),pixelRatio:Se.pixelRatio}),Dt=Ve.getContext();return ze.isCache=!0,Se.isCache=!0,this._cache.delete(k),this._filterUpToDate=!1,D.imageSmoothingEnabled===!1&&(Se.getContext()._context.imageSmoothingEnabled=!1,xe.getContext()._context.imageSmoothingEnabled=!1),De.save(),it.save(),Dt.save(),De.translate(-ee,-ce),it.translate(-ee,-ce),Dt.translate(-ee,-ce),Ve.x=ee,Ve.y=ce,this._isUnderCache=!0,this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(v),this.drawScene(Se,this,Ve),this.drawHit(ze,this),this._isUnderCache=!1,De.restore(),it.restore(),ae&&(De.save(),De.beginPath(),De.rect(0,0,q,M),De.closePath(),De.setAttr("strokeStyle","red"),De.setAttr("lineWidth",5),De.stroke(),De.restore()),this._cache.set(k,{scene:Se,filter:xe,hit:ze,buffer:Ve,x:ee,y:ce}),this._requestDraw(),this}isCached(){return this._cache.has(k)}getClientRect(A){throw new Error('abstract "getClientRect" method call')}_transformedRect(A,D){const V=[{x:A.x,y:A.y},{x:A.x+A.width,y:A.y},{x:A.x+A.width,y:A.y+A.height},{x:A.x,y:A.y+A.height}];let q=1/0,M=1/0,X=-1/0,ee=-1/0;const ce=this.getAbsoluteTransform(D);return V.forEach(function(me){const ae=ce.point(me);q===void 0&&(q=X=ae.x,M=ee=ae.y),q=Math.min(q,ae.x),M=Math.min(M,ae.y),X=Math.max(X,ae.x),ee=Math.max(ee,ae.y)}),{x:q,y:M,width:X-q,height:ee-M}}_drawCachedSceneCanvas(A){A.save(),A._applyOpacity(this),A._applyGlobalCompositeOperation(this);const D=this._getCanvasCache();A.translate(D.x,D.y);const V=this._getCachedSceneCanvas(),q=V.pixelRatio;A.drawImage(V._canvas,0,0,V.width/q,V.height/q),A.restore()}_drawCachedHitCanvas(A){const D=this._getCanvasCache(),V=D.hit;A.save(),A.translate(D.x,D.y),A.drawImage(V._canvas,0,0,V.width/V.pixelRatio,V.height/V.pixelRatio),A.restore()}_getCachedSceneCanvas(){let A=this.filters(),D=this._getCanvasCache(),V=D.scene,q=D.filter,M=q.getContext(),X,ee,ce,me;if(A){if(!this._filterUpToDate){const ae=V.pixelRatio;q.setSize(V.width/V.pixelRatio,V.height/V.pixelRatio);try{for(X=A.length,M.clear(),M.drawImage(V._canvas,0,0,V.getWidth()/ae,V.getHeight()/ae),ee=M.getImageData(0,0,q.getWidth(),q.getHeight()),ce=0;ce<X;ce++){if(me=A[ce],typeof me!="function"){d.Util.error("Filter should be type of function, but got "+typeof me+" instead. Please check correct filters");continue}me.call(this,ee),M.putImageData(ee,0,0)}}catch(Q){d.Util.error("Unable to apply filter. "+Q.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return q}return V}on(A,D){if(this._cache&&this._cache.delete(p),arguments.length===3)return this._delegate.apply(this,arguments);const V=A.split(W);for(let q=0;q<V.length;q++){const X=V[q].split("."),ee=X[0],ce=X[1]||"";this.eventListeners[ee]||(this.eventListeners[ee]=[]),this.eventListeners[ee].push({name:ce,handler:D})}return this}off(A,D){let V=(A||"").split(W),q=V.length,M,X,ee,ce,me,ae;if(this._cache&&this._cache.delete(p),!A)for(X in this.eventListeners)this._off(X);for(M=0;M<q;M++)if(ee=V[M],ce=ee.split("."),me=ce[0],ae=ce[1],me)this.eventListeners[me]&&this._off(me,ae,D);else for(X in this.eventListeners)this._off(X,ae,D);return this}dispatchEvent(A){const D={target:this,type:A.type,evt:A};return this.fire(A.type,D),this}addEventListener(A,D){return this.on(A,function(V){D.call(this,V.evt)}),this}removeEventListener(A){return this.off(A),this}_delegate(A,D,V){const q=this;this.on(A,function(M){const X=M.target.findAncestors(D,!0,q);for(let ee=0;ee<X.length;ee++)M=d.Util.cloneObject(M),M.currentTarget=X[ee],V.call(X[ee],M)})}remove(){return this.isDragging()&&this.stopDrag(),n.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(B),this._clearSelfAndDescendantCache(C)}_remove(){this._clearCaches();const A=this.getParent();A&&A.children&&(A.children.splice(this.index,1),A._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(A){const D="get"+d.Util._capitalize(A);return d.Util._isFunction(this[D])?this[D]():this.attrs[A]}getAncestors(){let A=this.getParent(),D=[];for(;A;)D.push(A),A=A.getParent();return D}getAttrs(){return this.attrs||{}}setAttrs(A){return this._batchTransformChanges(()=>{let D,V;if(!A)return this;for(D in A)D!==E&&(V=I+d.Util._capitalize(D),d.Util._isFunction(this[V])?this[V](A[D]):this._setAttr(D,A[D]))}),this}isListening(){return this._getCache(C,this._isListening)}_isListening(A){if(!this.listening())return!1;const V=this.getParent();return V&&V!==A&&this!==A?V._isListening(A):!0}isVisible(){return this._getCache(B,this._isVisible)}_isVisible(A){if(!this.visible())return!1;const V=this.getParent();return V&&V!==A&&this!==A?V._isVisible(A):!0}shouldDrawHit(A,D=!1){if(A)return this._isVisible(A)&&this._isListening(A);const V=this.getLayer();let q=!1;n.DD._dragElements.forEach(X=>{X.dragStatus==="dragging"&&(X.node.nodeType==="Stage"||X.node.getLayer()===V)&&(q=!0)});const M=!D&&!l.Konva.hitOnDragEnabled&&(q||l.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!M}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let A=this.getDepth(),D=this,V=0,q,M,X,ee;function ce(ae){for(q=[],M=ae.length,X=0;X<M;X++)ee=ae[X],V++,ee.nodeType!==U&&(q=q.concat(ee.getChildren().slice())),ee._id===D._id&&(X=M);q.length>0&&q[0].getDepth()<=A&&ce(q)}const me=this.getStage();return D.nodeType!==G&&me&&ce(me.getChildren()),V}getDepth(){let A=0,D=this.parent;for(;D;)A++,D=D.parent;return A}_batchTransformChanges(A){this._batchingTransformChange=!0,A(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(F),this._clearSelfAndDescendantCache(g)),this._needClearTransformCache=!1}setPosition(A){return this._batchTransformChanges(()=>{this.x(A.x),this.y(A.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const A=this.getStage();if(!A)return null;const D=A.getPointerPosition();if(!D)return null;const V=this.getAbsoluteTransform().copy();return V.invert(),V.point(D)}getAbsolutePosition(A){let D=!1,V=this.parent;for(;V;){if(V.isCached()){D=!0;break}V=V.parent}D&&!A&&(A=!0);const q=this.getAbsoluteTransform(A).getMatrix(),M=new d.Transform,X=this.offset();return M.m=q.slice(),M.translate(X.x,X.y),M.getTranslation()}setAbsolutePosition(A){const{x:D,y:V,...q}=this._clearTransform();this.attrs.x=D,this.attrs.y=V,this._clearCache(F);const M=this._getAbsoluteTransform().copy();return M.invert(),M.translate(A.x,A.y),A={x:this.attrs.x+M.getTranslation().x,y:this.attrs.y+M.getTranslation().y},this._setTransform(q),this.setPosition({x:A.x,y:A.y}),this._clearCache(F),this._clearSelfAndDescendantCache(g),this}_setTransform(A){let D;for(D in A)this.attrs[D]=A[D]}_clearTransform(){const A={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,A}move(A){let D=A.x,V=A.y,q=this.x(),M=this.y();return D!==void 0&&(q+=D),V!==void 0&&(M+=V),this.setPosition({x:q,y:M}),this}_eachAncestorReverse(A,D){let V=[],q=this.getParent(),M,X;if(!(D&&D._id===this._id)){for(V.unshift(this);q&&(!D||q._id!==D._id);)V.unshift(q),q=q.parent;for(M=V.length,X=0;X<M;X++)A(V[X])}}rotate(A){return this.rotation(this.rotation()+A),this}moveToTop(){if(!this.parent)return d.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const A=this.index,D=this.parent.getChildren().length;return A<D-1?(this.parent.children.splice(A,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return d.Util.warn("Node has no parent. moveUp function is ignored."),!1;const A=this.index,D=this.parent.getChildren().length;return A<D-1?(this.parent.children.splice(A,1),this.parent.children.splice(A+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return d.Util.warn("Node has no parent. moveDown function is ignored."),!1;const A=this.index;return A>0?(this.parent.children.splice(A,1),this.parent.children.splice(A-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return d.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const A=this.index;return A>0?(this.parent.children.splice(A,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(A){if(!this.parent)return d.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(A<0||A>=this.parent.children.length)&&d.Util.warn("Unexpected value "+A+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const D=this.index;return this.parent.children.splice(D,1),this.parent.children.splice(A,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(u,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let A=this.opacity();const D=this.getParent();return D&&!D._isUnderCache&&(A*=D.getAbsoluteOpacity()),A}moveTo(A){return this.getParent()!==A&&(this._remove(),A.add(this)),this}toObject(){let A=this.getAttrs(),D,V,q,M,X;const ee={attrs:{},className:this.getClassName()};for(D in A)V=A[D],X=d.Util.isObject(V)&&!d.Util._isPlainObject(V)&&!d.Util._isArray(V),!X&&(q=typeof this[D]=="function"&&this[D],delete A[D],M=q?q.call(this):null,A[D]=V,M!==V&&(ee.attrs[D]=V));return d.Util._prepareToStringify(ee)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(A,D,V){const q=[];D&&this._isMatch(A)&&q.push(this);let M=this.parent;for(;M;){if(M===V)return q;M._isMatch(A)&&q.push(M),M=M.parent}return q}isAncestorOf(A){return!1}findAncestor(A,D,V){return this.findAncestors(A,D,V)[0]}_isMatch(A){if(!A)return!1;if(typeof A=="function")return A(this);let D=A.replace(/ /g,"").split(","),V=D.length,q,M;for(q=0;q<V;q++)if(M=D[q],d.Util.isValidSelector(M)||(d.Util.warn('Selector "'+M+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),d.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),d.Util.warn("Konva is awesome, right?")),M.charAt(0)==="#"){if(this.id()===M.slice(1))return!0}else if(M.charAt(0)==="."){if(this.hasName(M.slice(1)))return!0}else if(this.className===M||this.nodeType===M)return!0;return!1}getLayer(){const A=this.getParent();return A?A.getLayer():null}getStage(){return this._getCache(j,this._getStage)}_getStage(){const A=this.getParent();return A?A.getStage():null}fire(A,D={},V){return D.target=D.target||this,V?this._fireAndBubble(A,D):this._fire(A,D),this}getAbsoluteTransform(A){return A?this._getAbsoluteTransform(A):this._getCache(g,this._getAbsoluteTransform)}_getAbsoluteTransform(A){let D;if(A)return D=new d.Transform,this._eachAncestorReverse(function(V){const q=V.transformsEnabled();q==="all"?D.multiply(V.getTransform()):q==="position"&&D.translate(V.x()-V.offsetX(),V.y()-V.offsetY())},A),D;{D=this._cache.get(g)||new d.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(D):D.reset();const V=this.transformsEnabled();if(V==="all")D.multiply(this.getTransform());else if(V==="position"){const q=this.attrs.x||0,M=this.attrs.y||0,X=this.attrs.offsetX||0,ee=this.attrs.offsetY||0;D.translate(q-X,M-ee)}return D.dirty=!1,D}}getAbsoluteScale(A){let D=this;for(;D;)D._isUnderCache&&(A=D),D=D.getParent();const q=this.getAbsoluteTransform(A).decompose();return{x:q.scaleX,y:q.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(F,this._getTransform)}_getTransform(){var A,D;const V=this._cache.get(F)||new d.Transform;V.reset();const q=this.x(),M=this.y(),X=l.Konva.getAngle(this.rotation()),ee=(A=this.attrs.scaleX)!==null&&A!==void 0?A:1,ce=(D=this.attrs.scaleY)!==null&&D!==void 0?D:1,me=this.attrs.skewX||0,ae=this.attrs.skewY||0,Q=this.attrs.offsetX||0,ie=this.attrs.offsetY||0;return(q!==0||M!==0)&&V.translate(q,M),X!==0&&V.rotate(X),(me!==0||ae!==0)&&V.skew(me,ae),(ee!==1||ce!==1)&&V.scale(ee,ce),(Q!==0||ie!==0)&&V.translate(-1*Q,-1*ie),V.dirty=!1,V}clone(A){let D=d.Util.cloneObject(this.attrs),V,q,M,X,ee;for(V in A)D[V]=A[V];const ce=new this.constructor(D);for(V in this.eventListeners)for(q=this.eventListeners[V],M=q.length,X=0;X<M;X++)ee=q[X],ee.name.indexOf(S)<0&&(ce.eventListeners[V]||(ce.eventListeners[V]=[]),ce.eventListeners[V].push(ee));return ce}_toKonvaCanvas(A){A=A||{};const D=this.getClientRect(),V=this.getStage(),q=A.x!==void 0?A.x:Math.floor(D.x),M=A.y!==void 0?A.y:Math.floor(D.y),X=A.pixelRatio||1,ee=new o.SceneCanvas({width:A.width||Math.ceil(D.width)||(V?V.width():0),height:A.height||Math.ceil(D.height)||(V?V.height():0),pixelRatio:X}),ce=ee.getContext(),me=new o.SceneCanvas({width:ee.width/ee.pixelRatio+Math.abs(q),height:ee.height/ee.pixelRatio+Math.abs(M),pixelRatio:ee.pixelRatio});return A.imageSmoothingEnabled===!1&&(ce._context.imageSmoothingEnabled=!1),ce.save(),(q||M)&&ce.translate(-1*q,-1*M),this.drawScene(ee,void 0,me),ce.restore(),ee}toCanvas(A){return this._toKonvaCanvas(A)._canvas}toDataURL(A){A=A||{};const D=A.mimeType||null,V=A.quality||null,q=this._toKonvaCanvas(A).toDataURL(D,V);return A.callback&&A.callback(q),q}toImage(A){return new Promise((D,V)=>{try{const q=A?.callback;q&&delete A.callback,d.Util._urlToImage(this.toDataURL(A),function(M){D(M),q?.(M)})}catch(q){V(q)}})}toBlob(A){return new Promise((D,V)=>{try{const q=A?.callback;q&&delete A.callback,this.toCanvas(A).toBlob(M=>{D(M),q?.(M)},A?.mimeType,A?.quality)}catch(q){V(q)}})}setSize(A){return this.width(A.width),this.height(A.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():l.Konva.dragDistance}_off(A,D,V){let q=this.eventListeners[A],M,X,ee;for(M=0;M<q.length;M++)if(X=q[M].name,ee=q[M].handler,(X!=="konva"||D==="konva")&&(!D||X===D)&&(!V||V===ee)){if(q.splice(M,1),q.length===0){delete this.eventListeners[A];break}M--}}_fireChangeEvent(A,D,V){this._fire(A+T,{oldVal:D,newVal:V})}addName(A){if(!this.hasName(A)){const D=this.name(),V=D?D+" "+A:A;this.name(V)}return this}hasName(A){if(!A)return!1;const D=this.name();return D?(D||"").split(/\s/g).indexOf(A)!==-1:!1}removeName(A){const D=(this.name()||"").split(/\s/g),V=D.indexOf(A);return V!==-1&&(D.splice(V,1),this.name(D.join(" "))),this}setAttr(A,D){const V=this[I+d.Util._capitalize(A)];return d.Util._isFunction(V)?V.call(this,D):this._setAttr(A,D),this}_requestDraw(){if(l.Konva.autoDrawEnabled){const A=this.getLayer()||this.getStage();A?.batchDraw()}}_setAttr(A,D){const V=this.attrs[A];V===D&&!d.Util.isObject(D)||(D==null?delete this.attrs[A]:this.attrs[A]=D,this._shouldFireChangeEvents&&this._fireChangeEvent(A,V,D),this._requestDraw())}_setComponentAttr(A,D,V){let q;V!==void 0&&(q=this.attrs[A],q||(this.attrs[A]=this.getAttr(A)),this.attrs[A][D]=V,this._fireChangeEvent(A,q,V))}_fireAndBubble(A,D,V){D&&this.nodeType===U&&(D.target=this);const q=[b,N,L,x,_,R];if(!(q.indexOf(A)!==-1&&(V&&(this===V||this.isAncestorOf&&this.isAncestorOf(V))||this.nodeType==="Stage"&&!V))){this._fire(A,D);const X=q.indexOf(A)!==-1&&V&&V.isAncestorOf&&V.isAncestorOf(this)&&!V.isAncestorOf(this.parent);(D&&!D.cancelBubble||!D)&&this.parent&&this.parent.isListening()&&!X&&(V&&V.parent?this._fireAndBubble.call(this.parent,A,D,V):this._fireAndBubble.call(this.parent,A,D))}}_getProtoListeners(A){var D,V,q;const M=(D=this._cache.get(p))!==null&&D!==void 0?D:{};let X=M?.[A];if(X===void 0){X=[];let ee=Object.getPrototypeOf(this);for(;ee;){const ce=(q=(V=ee.eventListeners)===null||V===void 0?void 0:V[A])!==null&&q!==void 0?q:[];X.push(...ce),ee=Object.getPrototypeOf(ee)}M[A]=X,this._cache.set(p,M)}return X}_fire(A,D){D=D||{},D.currentTarget=this,D.type=A;const V=this._getProtoListeners(A);if(V)for(let M=0;M<V.length;M++)V[M].handler.call(this,D);const q=this.eventListeners[A];if(q)for(let M=0;M<q.length;M++)q[M].handler.call(this,D)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(A){const D=A?A.pointerId:void 0,V=this.getStage(),q=this.getAbsolutePosition();if(!V)return;const M=V._getPointerById(D)||V._changedPointerPositions[0]||q;n.DD._dragElements.set(this._id,{node:this,startPointerPos:M,offset:{x:M.x-q.x,y:M.y-q.y},dragStatus:"ready",pointerId:D})}startDrag(A,D=!0){n.DD._dragElements.has(this._id)||this._createDragElement(A);const V=n.DD._dragElements.get(this._id);V.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:A&&A.evt},D)}_setDragPosition(A,D){const V=this.getStage()._getPointerById(D.pointerId);if(!V)return;let q={x:V.x-D.offset.x,y:V.y-D.offset.y};const M=this.dragBoundFunc();if(M!==void 0){const X=M.call(this,q,A);X?q=X:d.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==q.x||this._lastPos.y!==q.y)&&(this.setAbsolutePosition(q),this._requestDraw()),this._lastPos=q}stopDrag(A){const D=n.DD._dragElements.get(this._id);D&&(D.dragStatus="stopped"),n.DD._endDragBefore(A),n.DD._endDragAfter(A)}setDraggable(A){this._setAttr("draggable",A),this._dragChange()}isDragging(){const A=n.DD._dragElements.get(this._id);return A?A.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(A){if(!(!(A.evt.button!==void 0)||l.Konva.dragButtons.indexOf(A.evt.button)>=0)||this.isDragging())return;let q=!1;n.DD._dragElements.forEach(M=>{this.isAncestorOf(M.node)&&(q=!0)}),q||this._createDragElement(A)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const D=n.DD._dragElements.get(this._id),V=D&&D.dragStatus==="dragging",q=D&&D.dragStatus==="ready";V?this.stopDrag():q&&n.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(A={x:0,y:0}){const D=this.getStage();if(!D)return!1;const V={x:-A.x,y:-A.y,width:D.width()+2*A.x,height:D.height()+2*A.y};return d.Util.haveIntersection(V,this.getClientRect())}static create(A,D){return d.Util._isString(A)&&(A=JSON.parse(A)),this._createNode(A,D)}static _createNode(A,D){let V=Rf.prototype.getClassName.call(A),q=A.children,M,X,ee;D&&(A.attrs.container=D),l.Konva[V]||(d.Util.warn('Can not find a node with class name "'+V+'". Fallback to "Shape".'),V="Shape");const ce=l.Konva[V];if(M=new ce(A.attrs),q)for(X=q.length,ee=0;ee<X;ee++)M.add(Rf._createNode(q[ee]));return M}};Pu.Node=J,J.prototype.nodeType="Node",J.prototype._attrsAffectingSize=[],J.prototype.eventListeners={},J.prototype.on.call(J.prototype,K,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(F),this._clearSelfAndDescendantCache(g)}),J.prototype.on.call(J.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(B)}),J.prototype.on.call(J.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(C)}),J.prototype.on.call(J.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(u)});const Y=s.Factory.addGetterSetter;return Y(J,"zIndex"),Y(J,"absolutePosition"),Y(J,"position"),Y(J,"x",0,(0,c.getNumberValidator)()),Y(J,"y",0,(0,c.getNumberValidator)()),Y(J,"globalCompositeOperation","source-over",(0,c.getStringValidator)()),Y(J,"opacity",1,(0,c.getNumberValidator)()),Y(J,"name","",(0,c.getStringValidator)()),Y(J,"id","",(0,c.getStringValidator)()),Y(J,"rotation",0,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(J,"scale",["x","y"]),Y(J,"scaleX",1,(0,c.getNumberValidator)()),Y(J,"scaleY",1,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(J,"skew",["x","y"]),Y(J,"skewX",0,(0,c.getNumberValidator)()),Y(J,"skewY",0,(0,c.getNumberValidator)()),s.Factory.addComponentsGetterSetter(J,"offset",["x","y"]),Y(J,"offsetX",0,(0,c.getNumberValidator)()),Y(J,"offsetY",0,(0,c.getNumberValidator)()),Y(J,"dragDistance",void 0,(0,c.getNumberValidator)()),Y(J,"width",0,(0,c.getNumberValidator)()),Y(J,"height",0,(0,c.getNumberValidator)()),Y(J,"listening",!0,(0,c.getBooleanValidator)()),Y(J,"preventDefault",!0,(0,c.getBooleanValidator)()),Y(J,"filters",void 0,function(oe){return this._filterUpToDate=!1,oe}),Y(J,"visible",!0,(0,c.getBooleanValidator)()),Y(J,"transformsEnabled","all",(0,c.getStringValidator)()),Y(J,"size"),Y(J,"dragBoundFunc"),Y(J,"draggable",!1,(0,c.getBooleanValidator)()),s.Factory.backCompat(J,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Pu}var bu={},gp;function nh(){if(gp)return bu;gp=1,Object.defineProperty(bu,"__esModule",{value:!0}),bu.Container=void 0;const o=tt(),n=Zt(),s=rt();let l=class extends n.Node{constructor(){super(...arguments),this.children=[]}getChildren(c){const u=this.children||[];return c?u.filter(c):u}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(c=>{c.parent=null,c.index=0,c.destroy()}),this.children=[],this._requestDraw(),this}add(...c){if(c.length===0)return this;if(c.length>1){for(let p=0;p<c.length;p++)this.add(c[p]);return this}const u=c[0];return u.getParent()?(u.moveTo(this),this):(this._validateAdd(u),u.index=this.getChildren().length,u.parent=this,u._clearCaches(),this.getChildren().push(u),this._fire("add",{child:u}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(c){return this._generalFind(c,!1)}findOne(c){const u=this._generalFind(c,!0);return u.length>0?u[0]:void 0}_generalFind(c,u){const p=[];return this._descendants(g=>{const v=g._isMatch(c);return v&&p.push(g),!!(v&&u)}),p}_descendants(c){let u=!1;const p=this.getChildren();for(const g of p){if(u=c(g),u)return!0;if(g.hasChildren()&&(u=g._descendants(c),u))return!0}return!1}toObject(){const c=n.Node.prototype.toObject.call(this);return c.children=[],this.getChildren().forEach(u=>{c.children.push(u.toObject())}),c}isAncestorOf(c){let u=c.getParent();for(;u;){if(u._id===this._id)return!0;u=u.getParent()}return!1}clone(c){const u=n.Node.prototype.clone.call(this,c);return this.getChildren().forEach(function(p){u.add(p.clone())}),u}getAllIntersections(c){const u=[];return this.find("Shape").forEach(p=>{p.isVisible()&&p.intersects(c)&&u.push(p)}),u}_clearSelfAndDescendantCache(c){var u;super._clearSelfAndDescendantCache(c),!this.isCached()&&((u=this.children)===null||u===void 0||u.forEach(function(p){p._clearSelfAndDescendantCache(c)}))}_setChildrenIndices(){var c;(c=this.children)===null||c===void 0||c.forEach(function(u,p){u.index=p}),this._requestDraw()}drawScene(c,u,p){const g=this.getLayer(),v=c||g&&g.getCanvas(),k=v&&v.getContext(),T=this._getCanvasCache(),E=T&&T.scene,S=v&&v.isCache;if(!this.isVisible()&&!S)return this;if(E){k.save();const C=this.getAbsoluteTransform(u).getMatrix();k.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedSceneCanvas(k),k.restore()}else this._drawChildren("drawScene",v,u,p);return this}drawHit(c,u){if(!this.shouldDrawHit(u))return this;const p=this.getLayer(),g=c||p&&p.hitCanvas,v=g&&g.getContext(),k=this._getCanvasCache();if(k&&k.hit){v.save();const E=this.getAbsoluteTransform(u).getMatrix();v.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedHitCanvas(v),v.restore()}else this._drawChildren("drawHit",g,u);return this}_drawChildren(c,u,p,g){var v;const k=u&&u.getContext(),T=this.clipWidth(),E=this.clipHeight(),S=this.clipFunc(),C=typeof T=="number"&&typeof E=="number"||S,b=p===this;if(C){k.save();const L=this.getAbsoluteTransform(p);let x=L.getMatrix();k.transform(x[0],x[1],x[2],x[3],x[4],x[5]),k.beginPath();let _;if(S)_=S.call(this,k,this);else{const R=this.clipX(),I=this.clipY();k.rect(R||0,I||0,T,E)}k.clip.apply(k,_),x=L.copy().invert().getMatrix(),k.transform(x[0],x[1],x[2],x[3],x[4],x[5])}const N=!b&&this.globalCompositeOperation()!=="source-over"&&c==="drawScene";N&&(k.save(),k._applyGlobalCompositeOperation(this)),(v=this.children)===null||v===void 0||v.forEach(function(L){L[c](u,p,g)}),N&&k.restore(),C&&k.restore()}getClientRect(c={}){var u;const p=c.skipTransform,g=c.relativeTo;let v,k,T,E,S={x:1/0,y:1/0,width:0,height:0};const C=this;(u=this.children)===null||u===void 0||u.forEach(function(L){if(!L.visible())return;const x=L.getClientRect({relativeTo:C,skipShadow:c.skipShadow,skipStroke:c.skipStroke});x.width===0&&x.height===0||(v===void 0?(v=x.x,k=x.y,T=x.x+x.width,E=x.y+x.height):(v=Math.min(v,x.x),k=Math.min(k,x.y),T=Math.max(T,x.x+x.width),E=Math.max(E,x.y+x.height)))});const b=this.find("Shape");let N=!1;for(let L=0;L<b.length;L++)if(b[L]._isVisible(this)){N=!0;break}return N&&v!==void 0?S={x:v,y:k,width:T-v,height:E-k}:S={x:0,y:0,width:0,height:0},p?S:this._transformedRect(S,g)}};return bu.Container=l,o.Factory.addComponentsGetterSetter(l,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(l,"clipX",void 0,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(l,"clipY",void 0,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(l,"clipWidth",void 0,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(l,"clipHeight",void 0,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(l,"clipFunc"),bu}var lf={},ho={},mp;function wm(){if(mp)return ho;mp=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.getCapturedShape=l,ho.createEvent=d,ho.hasPointerCapture=c,ho.setPointerCapture=u,ho.releaseCapture=p;const o=Qe(),n=new Map,s=o.Konva._global.PointerEvent!==void 0;function l(g){return n.get(g)}function d(g){return{evt:g,pointerId:g.pointerId}}function c(g,v){return n.get(g)===v}function u(g,v){p(g),v.getStage()&&(n.set(g,v),s&&v._fire("gotpointercapture",d(new PointerEvent("gotpointercapture"))))}function p(g,v){const k=n.get(g);if(!k)return;const T=k.getStage();T&&T.content,n.delete(g),s&&k._fire("lostpointercapture",d(new PointerEvent("lostpointercapture")))}return ho}var vp;function Ky(){return vp||(vp=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const n=Ht(),s=tt(),l=nh(),d=Qe(),c=th(),u=Bf(),p=Qe(),g=wm(),v="Stage",k="string",T="px",E="mouseout",S="mouseleave",C="mouseover",b="mouseenter",N="mousemove",L="mousedown",x="mouseup",_="pointermove",R="pointerdown",I="pointerup",U="pointercancel",W="lostpointercapture",j="pointerout",F="pointerleave",G="pointerover",B="pointerenter",K="contextmenu",$="touchstart",J="touchend",Y="touchmove",oe="touchcancel",A="wheel",D=5,V=[[b,"_pointerenter"],[L,"_pointerdown"],[N,"_pointermove"],[x,"_pointerup"],[S,"_pointerleave"],[$,"_pointerdown"],[Y,"_pointermove"],[J,"_pointerup"],[oe,"_pointercancel"],[C,"_pointerover"],[A,"_wheel"],[K,"_contextmenu"],[R,"_pointerdown"],[_,"_pointermove"],[I,"_pointerup"],[U,"_pointercancel"],[F,"_pointerleave"],[W,"_lostpointercapture"]],q={mouse:{[j]:E,[F]:S,[G]:C,[B]:b,[_]:N,[R]:L,[I]:x,[U]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[j]:"touchout",[F]:"touchleave",[G]:"touchover",[B]:"touchenter",[_]:Y,[R]:$,[I]:J,[U]:oe,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[j]:j,[F]:F,[G]:G,[B]:B,[_]:_,[R]:R,[I]:I,[U]:U,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},M=ae=>ae.indexOf("pointer")>=0?"pointer":ae.indexOf("touch")>=0?"touch":"mouse",X=ae=>{const Q=M(ae);if(Q==="pointer")return d.Konva.pointerEventsEnabled&&q.pointer;if(Q==="touch")return q.touch;if(Q==="mouse")return q.mouse};function ee(ae={}){return(ae.clipFunc||ae.clipWidth||ae.clipHeight)&&n.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ae}const ce="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class me extends l.Container{constructor(Q){super(ee(Q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ee(this.attrs)}),this._checkVisibility()}_validateAdd(Q){const ie=Q.getType()==="Layer",ve=Q.getType()==="FastLayer";ie||ve||n.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const Q=this.visible()?"":"none";this.content.style.display=Q}setContainer(Q){if(typeof Q===k){let ie;if(Q.charAt(0)==="."){const ve=Q.slice(1);Q=document.getElementsByClassName(ve)[0]}else Q.charAt(0)!=="#"?ie=Q:ie=Q.slice(1),Q=document.getElementById(ie);if(!Q)throw"Can not find container in document with id "+ie}return this._setAttr("container",Q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),Q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const Q=this.children,ie=Q.length;for(let ve=0;ve<ie;ve++)Q[ve].clear();return this}clone(Q){return Q||(Q={}),Q.container=typeof document<"u"&&document.createElement("div"),l.Container.prototype.clone.call(this,Q)}destroy(){super.destroy();const Q=this.content;Q&&n.Util._isInDocument(Q)&&this.container().removeChild(Q);const ie=o.stages.indexOf(this);return ie>-1&&o.stages.splice(ie,1),n.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const Q=this._pointerPositions[0]||this._changedPointerPositions[0];return Q?{x:Q.x,y:Q.y}:(n.Util.warn(ce),null)}_getPointerById(Q){return this._pointerPositions.find(ie=>ie.id===Q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(Q){Q=Q||{},Q.x=Q.x||0,Q.y=Q.y||0,Q.width=Q.width||this.width(),Q.height=Q.height||this.height();const ie=new c.SceneCanvas({width:Q.width,height:Q.height,pixelRatio:Q.pixelRatio||1}),ve=ie.getContext()._context,Se=this.children;return(Q.x||Q.y)&&ve.translate(-1*Q.x,-1*Q.y),Se.forEach(function(xe){if(!xe.isVisible())return;const ze=xe._toKonvaCanvas(Q);ve.drawImage(ze._canvas,Q.x,Q.y,ze.getWidth()/ze.getPixelRatio(),ze.getHeight()/ze.getPixelRatio())}),ie}getIntersection(Q){if(!Q)return null;const ie=this.children,ve=ie.length,Se=ve-1;for(let xe=Se;xe>=0;xe--){const ze=ie[xe].getIntersection(Q);if(ze)return ze}return null}_resizeDOM(){const Q=this.width(),ie=this.height();this.content&&(this.content.style.width=Q+T,this.content.style.height=ie+T),this.bufferCanvas.setSize(Q,ie),this.bufferHitCanvas.setSize(Q,ie),this.children.forEach(ve=>{ve.setSize({width:Q,height:ie}),ve.draw()})}add(Q,...ie){if(arguments.length>1){for(let Se=0;Se<arguments.length;Se++)this.add(arguments[Se]);return this}super.add(Q);const ve=this.children.length;return ve>D&&n.Util.warn("The stage has "+ve+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),Q.setSize({width:this.width(),height:this.height()}),Q.draw(),d.Konva.isBrowser&&this.content.appendChild(Q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(Q){return g.hasPointerCapture(Q,this)}setPointerCapture(Q){g.setPointerCapture(Q,this)}releaseCapture(Q){g.releaseCapture(Q,this)}getLayers(){return this.children}_bindContentEvents(){d.Konva.isBrowser&&V.forEach(([Q,ie])=>{this.content.addEventListener(Q,ve=>{this[ie](ve)},{passive:!1})})}_pointerenter(Q){this.setPointersPositions(Q);const ie=X(Q.type);ie&&this._fire(ie.pointerenter,{evt:Q,target:this,currentTarget:this})}_pointerover(Q){this.setPointersPositions(Q);const ie=X(Q.type);ie&&this._fire(ie.pointerover,{evt:Q,target:this,currentTarget:this})}_getTargetShape(Q){let ie=this[Q+"targetShape"];return ie&&!ie.getStage()&&(ie=null),ie}_pointerleave(Q){const ie=X(Q.type),ve=M(Q.type);if(!ie)return;this.setPointersPositions(Q);const Se=this._getTargetShape(ve),xe=!(d.Konva.isDragging()||d.Konva.isTransforming())||d.Konva.hitOnDragEnabled;Se&&xe?(Se._fireAndBubble(ie.pointerout,{evt:Q}),Se._fireAndBubble(ie.pointerleave,{evt:Q}),this._fire(ie.pointerleave,{evt:Q,target:this,currentTarget:this}),this[ve+"targetShape"]=null):xe&&(this._fire(ie.pointerleave,{evt:Q,target:this,currentTarget:this}),this._fire(ie.pointerout,{evt:Q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(Q){const ie=X(Q.type),ve=M(Q.type);if(!ie)return;this.setPointersPositions(Q);let Se=!1;this._changedPointerPositions.forEach(xe=>{const ze=this.getIntersection(xe);if(u.DD.justDragged=!1,d.Konva["_"+ve+"ListenClick"]=!0,!ze||!ze.isListening()){this[ve+"ClickStartShape"]=void 0;return}d.Konva.capturePointerEventsEnabled&&ze.setPointerCapture(xe.id),this[ve+"ClickStartShape"]=ze,ze._fireAndBubble(ie.pointerdown,{evt:Q,pointerId:xe.id}),Se=!0;const De=Q.type.indexOf("touch")>=0;ze.preventDefault()&&Q.cancelable&&De&&Q.preventDefault()}),Se||this._fire(ie.pointerdown,{evt:Q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(Q){const ie=X(Q.type),ve=M(Q.type);if(!ie||(d.Konva.isDragging()&&u.DD.node.preventDefault()&&Q.cancelable&&Q.preventDefault(),this.setPointersPositions(Q),!(!(d.Konva.isDragging()||d.Konva.isTransforming())||d.Konva.hitOnDragEnabled)))return;const xe={};let ze=!1;const De=this._getTargetShape(ve);this._changedPointerPositions.forEach(it=>{const Ve=g.getCapturedShape(it.id)||this.getIntersection(it),Dt=it.id,ot={evt:Q,pointerId:Dt},Et=De!==Ve;if(Et&&De&&(De._fireAndBubble(ie.pointerout,{...ot},Ve),De._fireAndBubble(ie.pointerleave,{...ot},Ve)),Ve){if(xe[Ve._id])return;xe[Ve._id]=!0}Ve&&Ve.isListening()?(ze=!0,Et&&(Ve._fireAndBubble(ie.pointerover,{...ot},De),Ve._fireAndBubble(ie.pointerenter,{...ot},De),this[ve+"targetShape"]=Ve),Ve._fireAndBubble(ie.pointermove,{...ot})):De&&(this._fire(ie.pointerover,{evt:Q,target:this,currentTarget:this,pointerId:Dt}),this[ve+"targetShape"]=null)}),ze||this._fire(ie.pointermove,{evt:Q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(Q){const ie=X(Q.type),ve=M(Q.type);if(!ie)return;this.setPointersPositions(Q);const Se=this[ve+"ClickStartShape"],xe=this[ve+"ClickEndShape"],ze={};let De=!1;this._changedPointerPositions.forEach(it=>{const Ve=g.getCapturedShape(it.id)||this.getIntersection(it);if(Ve){if(Ve.releaseCapture(it.id),ze[Ve._id])return;ze[Ve._id]=!0}const Dt=it.id,ot={evt:Q,pointerId:Dt};let Et=!1;d.Konva["_"+ve+"InDblClickWindow"]?(Et=!0,clearTimeout(this[ve+"DblTimeout"])):u.DD.justDragged||(d.Konva["_"+ve+"InDblClickWindow"]=!0,clearTimeout(this[ve+"DblTimeout"])),this[ve+"DblTimeout"]=setTimeout(function(){d.Konva["_"+ve+"InDblClickWindow"]=!1},d.Konva.dblClickWindow),Ve&&Ve.isListening()?(De=!0,this[ve+"ClickEndShape"]=Ve,Ve._fireAndBubble(ie.pointerup,{...ot}),d.Konva["_"+ve+"ListenClick"]&&Se&&Se===Ve&&(Ve._fireAndBubble(ie.pointerclick,{...ot}),Et&&xe&&xe===Ve&&Ve._fireAndBubble(ie.pointerdblclick,{...ot}))):(this[ve+"ClickEndShape"]=null,d.Konva["_"+ve+"ListenClick"]&&this._fire(ie.pointerclick,{evt:Q,target:this,currentTarget:this,pointerId:Dt}),Et&&this._fire(ie.pointerdblclick,{evt:Q,target:this,currentTarget:this,pointerId:Dt}))}),De||this._fire(ie.pointerup,{evt:Q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),d.Konva["_"+ve+"ListenClick"]=!1,Q.cancelable&&ve!=="touch"&&ve!=="pointer"&&Q.preventDefault()}_contextmenu(Q){this.setPointersPositions(Q);const ie=this.getIntersection(this.getPointerPosition());ie&&ie.isListening()?ie._fireAndBubble(K,{evt:Q}):this._fire(K,{evt:Q,target:this,currentTarget:this})}_wheel(Q){this.setPointersPositions(Q);const ie=this.getIntersection(this.getPointerPosition());ie&&ie.isListening()?ie._fireAndBubble(A,{evt:Q}):this._fire(A,{evt:Q,target:this,currentTarget:this})}_pointercancel(Q){this.setPointersPositions(Q);const ie=g.getCapturedShape(Q.pointerId)||this.getIntersection(this.getPointerPosition());ie&&ie._fireAndBubble(I,g.createEvent(Q)),g.releaseCapture(Q.pointerId)}_lostpointercapture(Q){g.releaseCapture(Q.pointerId)}setPointersPositions(Q){const ie=this._getContentPosition();let ve=null,Se=null;Q=Q||window.event,Q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(Q.touches,xe=>{this._pointerPositions.push({id:xe.identifier,x:(xe.clientX-ie.left)/ie.scaleX,y:(xe.clientY-ie.top)/ie.scaleY})}),Array.prototype.forEach.call(Q.changedTouches||Q.touches,xe=>{this._changedPointerPositions.push({id:xe.identifier,x:(xe.clientX-ie.left)/ie.scaleX,y:(xe.clientY-ie.top)/ie.scaleY})})):(ve=(Q.clientX-ie.left)/ie.scaleX,Se=(Q.clientY-ie.top)/ie.scaleY,this.pointerPos={x:ve,y:Se},this._pointerPositions=[{x:ve,y:Se,id:n.Util._getFirstPointerId(Q)}],this._changedPointerPositions=[{x:ve,y:Se,id:n.Util._getFirstPointerId(Q)}])}_setPointerPosition(Q){n.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(Q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const Q=this.content.getBoundingClientRect();return{top:Q.top,left:Q.left,scaleX:Q.width/this.content.clientWidth||1,scaleY:Q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new c.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!d.Konva.isBrowser)return;const Q=this.container();if(!Q)throw"Stage has no container. A container is required.";Q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),Q.appendChild(this.content),this._resizeDOM()}cache(){return n.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(Q){Q.batchDraw()}),this}}o.Stage=me,me.prototype.nodeType=v,(0,p._registerNode)(me),s.Factory.addGetterSetter(me,"container"),d.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(ae=>{ae.batchDraw()})})})(lf)),lf}var Tu={},uf={},yp;function Tn(){return yp||(yp=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const n=Qe(),s=Ht(),l=tt(),d=Zt(),c=rt(),u=Qe(),p=wm(),g="hasShadow",v="shadowRGBA",k="patternImage",T="linearGradient",E="radialGradient";let S;function C(){return S||(S=s.Util.createCanvasElement().getContext("2d"),S)}o.shapes={};function b(F){const G=this.attrs.fillRule;G?F.fill(G):F.fill()}function N(F){F.stroke()}function L(F){const G=this.attrs.fillRule;G?F.fill(G):F.fill()}function x(F){F.stroke()}function _(){this._clearCache(g)}function R(){this._clearCache(v)}function I(){this._clearCache(k)}function U(){this._clearCache(T)}function W(){this._clearCache(E)}class j extends d.Node{constructor(G){super(G);let B;for(;B=s.Util.getRandomColor(),!(B&&!(B in o.shapes)););this.colorKey=B,o.shapes[B]=this}getContext(){return s.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return s.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(g,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(k,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const B=C().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(B&&B.setTransform){const K=new s.Transform;K.translate(this.fillPatternX(),this.fillPatternY()),K.rotate(n.Konva.getAngle(this.fillPatternRotation())),K.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),K.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const $=K.getMatrix(),J=typeof DOMMatrix>"u"?{a:$[0],b:$[1],c:$[2],d:$[3],e:$[4],f:$[5]}:new DOMMatrix($);B.setTransform(J)}return B}}_getLinearGradient(){return this._getCache(T,this.__getLinearGradient)}__getLinearGradient(){const G=this.fillLinearGradientColorStops();if(G){const B=C(),K=this.fillLinearGradientStartPoint(),$=this.fillLinearGradientEndPoint(),J=B.createLinearGradient(K.x,K.y,$.x,$.y);for(let Y=0;Y<G.length;Y+=2)J.addColorStop(G[Y],G[Y+1]);return J}}_getRadialGradient(){return this._getCache(E,this.__getRadialGradient)}__getRadialGradient(){const G=this.fillRadialGradientColorStops();if(G){const B=C(),K=this.fillRadialGradientStartPoint(),$=this.fillRadialGradientEndPoint(),J=B.createRadialGradient(K.x,K.y,this.fillRadialGradientStartRadius(),$.x,$.y,this.fillRadialGradientEndRadius());for(let Y=0;Y<G.length;Y+=2)J.addColorStop(G[Y],G[Y+1]);return J}}getShadowRGBA(){return this._getCache(v,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const G=s.Util.colorToRGBA(this.shadowColor());if(G)return"rgba("+G.r+","+G.g+","+G.b+","+G.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const G=this.hitStrokeWidth();return G==="auto"?this.hasStroke():this.strokeEnabled()&&!!G}intersects(G){const B=this.getStage();if(!B)return!1;const K=B.bufferHitCanvas;return K.getContext().clear(),this.drawHit(K,void 0,!0),K.context.getImageData(Math.round(G.x),Math.round(G.y),1,1).data[3]>0}destroy(){return d.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(G){var B;if(!((B=this.attrs.perfectDrawEnabled)!==null&&B!==void 0?B:!0))return!1;const $=G||this.hasFill(),J=this.hasStroke(),Y=this.getAbsoluteOpacity()!==1;if($&&J&&Y)return!0;const oe=this.hasShadow(),A=this.shadowForStrokeEnabled();return!!($&&J&&oe&&A)}setStrokeHitEnabled(G){s.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),G?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const G=this.size();return{x:this._centroid?-G.width/2:0,y:this._centroid?-G.height/2:0,width:G.width,height:G.height}}getClientRect(G={}){let B=!1,K=this.getParent();for(;K;){if(K.isCached()){B=!0;break}K=K.getParent()}const $=G.skipTransform,J=G.relativeTo||B&&this.getStage()||void 0,Y=this.getSelfRect(),A=!G.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,D=Y.width+A,V=Y.height+A,q=!G.skipShadow&&this.hasShadow(),M=q?this.shadowOffsetX():0,X=q?this.shadowOffsetY():0,ee=D+Math.abs(M),ce=V+Math.abs(X),me=q&&this.shadowBlur()||0,ae=ee+me*2,Q=ce+me*2,ie={width:ae,height:Q,x:-(A/2+me)+Math.min(M,0)+Y.x,y:-(A/2+me)+Math.min(X,0)+Y.y};return $?ie:this._transformedRect(ie,J)}drawScene(G,B,K){const $=this.getLayer(),J=G||$.getCanvas(),Y=J.getContext(),oe=this._getCanvasCache(),A=this.getSceneFunc(),D=this.hasShadow();let V;const q=B===this;if(!this.isVisible()&&!q)return this;if(oe){Y.save();const M=this.getAbsoluteTransform(B).getMatrix();return Y.transform(M[0],M[1],M[2],M[3],M[4],M[5]),this._drawCachedSceneCanvas(Y),Y.restore(),this}if(!A)return this;if(Y.save(),this._useBufferCanvas()){V=this.getStage();const M=K||V.bufferCanvas,X=M.getContext();X.clear(),X.save(),X._applyLineJoin(this);const ee=this.getAbsoluteTransform(B).getMatrix();X.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),A.call(this,X,this),X.restore();const ce=M.pixelRatio;D&&Y._applyShadow(this),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this),Y.drawImage(M._canvas,M.x||0,M.y||0,M.width/ce,M.height/ce)}else{if(Y._applyLineJoin(this),!q){const M=this.getAbsoluteTransform(B).getMatrix();Y.transform(M[0],M[1],M[2],M[3],M[4],M[5]),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this)}D&&Y._applyShadow(this),A.call(this,Y,this)}return Y.restore(),this}drawHit(G,B,K=!1){if(!this.shouldDrawHit(B,K))return this;const $=this.getLayer(),J=G||$.hitCanvas,Y=J&&J.getContext(),oe=this.hitFunc()||this.sceneFunc(),A=this._getCanvasCache(),D=A&&A.hit;if(this.colorKey||s.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),D){Y.save();const q=this.getAbsoluteTransform(B).getMatrix();return Y.transform(q[0],q[1],q[2],q[3],q[4],q[5]),this._drawCachedHitCanvas(Y),Y.restore(),this}if(!oe)return this;if(Y.save(),Y._applyLineJoin(this),!(this===B)){const q=this.getAbsoluteTransform(B).getMatrix();Y.transform(q[0],q[1],q[2],q[3],q[4],q[5])}return oe.call(this,Y,this),Y.restore(),this}drawHitFromCache(G=0){const B=this._getCanvasCache(),K=this._getCachedSceneCanvas(),$=B.hit,J=$.getContext(),Y=$.getWidth(),oe=$.getHeight();J.clear(),J.drawImage(K._canvas,0,0,Y,oe);try{const A=J.getImageData(0,0,Y,oe),D=A.data,V=D.length,q=s.Util._hexToRgb(this.colorKey);for(let M=0;M<V;M+=4)D[M+3]>G?(D[M]=q.r,D[M+1]=q.g,D[M+2]=q.b,D[M+3]=255):D[M+3]=0;J.putImageData(A,0,0)}catch(A){s.Util.error("Unable to draw hit graph from cached scene canvas. "+A.message)}return this}hasPointerCapture(G){return p.hasPointerCapture(G,this)}setPointerCapture(G){p.setPointerCapture(G,this)}releaseCapture(G){p.releaseCapture(G,this)}}o.Shape=j,j.prototype._fillFunc=b,j.prototype._strokeFunc=N,j.prototype._fillFuncHit=L,j.prototype._strokeFuncHit=x,j.prototype._centroid=!1,j.prototype.nodeType="Shape",(0,u._registerNode)(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",R),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",I),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",U),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",W),l.Factory.addGetterSetter(j,"stroke",void 0,(0,c.getStringOrGradientValidator)()),l.Factory.addGetterSetter(j,"strokeWidth",2,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"fillAfterStrokeEnabled",!1),l.Factory.addGetterSetter(j,"hitStrokeWidth","auto",(0,c.getNumberOrAutoValidator)()),l.Factory.addGetterSetter(j,"strokeHitEnabled",!0,(0,c.getBooleanValidator)()),l.Factory.addGetterSetter(j,"perfectDrawEnabled",!0,(0,c.getBooleanValidator)()),l.Factory.addGetterSetter(j,"shadowForStrokeEnabled",!0,(0,c.getBooleanValidator)()),l.Factory.addGetterSetter(j,"lineJoin"),l.Factory.addGetterSetter(j,"lineCap"),l.Factory.addGetterSetter(j,"sceneFunc"),l.Factory.addGetterSetter(j,"hitFunc"),l.Factory.addGetterSetter(j,"dash"),l.Factory.addGetterSetter(j,"dashOffset",0,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"shadowColor",void 0,(0,c.getStringValidator)()),l.Factory.addGetterSetter(j,"shadowBlur",0,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"shadowOpacity",1,(0,c.getNumberValidator)()),l.Factory.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),l.Factory.addGetterSetter(j,"shadowOffsetX",0,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"shadowOffsetY",0,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"fillPatternImage"),l.Factory.addGetterSetter(j,"fill",void 0,(0,c.getStringOrGradientValidator)()),l.Factory.addGetterSetter(j,"fillPatternX",0,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"fillPatternY",0,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"fillLinearGradientColorStops"),l.Factory.addGetterSetter(j,"strokeLinearGradientColorStops"),l.Factory.addGetterSetter(j,"fillRadialGradientStartRadius",0),l.Factory.addGetterSetter(j,"fillRadialGradientEndRadius",0),l.Factory.addGetterSetter(j,"fillRadialGradientColorStops"),l.Factory.addGetterSetter(j,"fillPatternRepeat","repeat"),l.Factory.addGetterSetter(j,"fillEnabled",!0),l.Factory.addGetterSetter(j,"strokeEnabled",!0),l.Factory.addGetterSetter(j,"shadowEnabled",!0),l.Factory.addGetterSetter(j,"dashEnabled",!0),l.Factory.addGetterSetter(j,"strokeScaleEnabled",!0),l.Factory.addGetterSetter(j,"fillPriority","color"),l.Factory.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),l.Factory.addGetterSetter(j,"fillPatternOffsetX",0,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"fillPatternOffsetY",0,(0,c.getNumberValidator)()),l.Factory.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),l.Factory.addGetterSetter(j,"fillPatternScaleX",1,(0,c.getNumberValidator)()),l.Factory.addGetterSetter(j,"fillPatternScaleY",1,(0,c.getNumberValidator)()),l.Factory.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),l.Factory.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),l.Factory.addGetterSetter(j,"fillLinearGradientStartPointX",0),l.Factory.addGetterSetter(j,"strokeLinearGradientStartPointX",0),l.Factory.addGetterSetter(j,"fillLinearGradientStartPointY",0),l.Factory.addGetterSetter(j,"strokeLinearGradientStartPointY",0),l.Factory.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),l.Factory.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),l.Factory.addGetterSetter(j,"fillLinearGradientEndPointX",0),l.Factory.addGetterSetter(j,"strokeLinearGradientEndPointX",0),l.Factory.addGetterSetter(j,"fillLinearGradientEndPointY",0),l.Factory.addGetterSetter(j,"strokeLinearGradientEndPointY",0),l.Factory.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),l.Factory.addGetterSetter(j,"fillRadialGradientStartPointX",0),l.Factory.addGetterSetter(j,"fillRadialGradientStartPointY",0),l.Factory.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),l.Factory.addGetterSetter(j,"fillRadialGradientEndPointX",0),l.Factory.addGetterSetter(j,"fillRadialGradientEndPointY",0),l.Factory.addGetterSetter(j,"fillPatternRotation",0),l.Factory.addGetterSetter(j,"fillRule",void 0,(0,c.getStringValidator)()),l.Factory.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(uf)),uf}var _p;function Sm(){if(_p)return Tu;_p=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.Layer=void 0;const o=Ht(),n=nh(),s=Zt(),l=tt(),d=th(),c=rt(),u=Tn(),p=Qe(),g="#",v="beforeDraw",k="draw",T=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],E=T.length;class S extends n.Container{constructor(b){super(b),this.canvas=new d.SceneCanvas,this.hitCanvas=new d.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(b){return this.getContext().clear(b),this.getHitCanvas().getContext().clear(b),this}setZIndex(b){super.setZIndex(b);const N=this.getStage();return N&&N.content&&(N.content.removeChild(this.getNativeCanvasElement()),b<N.children.length-1?N.content.insertBefore(this.getNativeCanvasElement(),N.children[b+1].getCanvas()._canvas):N.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){s.Node.prototype.moveToTop.call(this);const b=this.getStage();return b&&b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!s.Node.prototype.moveUp.call(this))return!1;const N=this.getStage();return!N||!N.content?!1:(N.content.removeChild(this.getNativeCanvasElement()),this.index<N.children.length-1?N.content.insertBefore(this.getNativeCanvasElement(),N.children[this.index+1].getCanvas()._canvas):N.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(s.Node.prototype.moveDown.call(this)){const b=this.getStage();if(b){const N=b.children;b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.insertBefore(this.getNativeCanvasElement(),N[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(s.Node.prototype.moveToBottom.call(this)){const b=this.getStage();if(b){const N=b.children;b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.insertBefore(this.getNativeCanvasElement(),N[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const b=this.getNativeCanvasElement();return s.Node.prototype.remove.call(this),b&&b.parentNode&&o.Util._isInDocument(b)&&b.parentNode.removeChild(b),this}getStage(){return this.parent}setSize({width:b,height:N}){return this.canvas.setSize(b,N),this.hitCanvas.setSize(b,N),this._setSmoothEnabled(),this}_validateAdd(b){const N=b.getType();N!=="Group"&&N!=="Shape"&&o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(b){return b=b||{},b.width=b.width||this.getWidth(),b.height=b.height||this.getHeight(),b.x=b.x!==void 0?b.x:this.x(),b.y=b.y!==void 0?b.y:this.y(),s.Node.prototype._toKonvaCanvas.call(this,b)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(b){if(!this.isListening()||!this.isVisible())return null;let N=1,L=!1;for(;;){for(let x=0;x<E;x++){const _=T[x],R=this._getIntersection({x:b.x+_.x*N,y:b.y+_.y*N}),I=R.shape;if(I)return I;if(L=!!R.antialiased,!R.antialiased)break}if(L)N+=1;else return null}}_getIntersection(b){const N=this.hitCanvas.pixelRatio,L=this.hitCanvas.context.getImageData(Math.round(b.x*N),Math.round(b.y*N),1,1).data,x=L[3];if(x===255){const _=o.Util._rgbToHex(L[0],L[1],L[2]),R=u.shapes[g+_];return R?{shape:R}:{antialiased:!0}}else if(x>0)return{antialiased:!0};return{}}drawScene(b,N,L){const x=this.getLayer(),_=b||x&&x.getCanvas();return this._fire(v,{node:this}),this.clearBeforeDraw()&&_.getContext().clear(),n.Container.prototype.drawScene.call(this,_,N,L),this._fire(k,{node:this}),this}drawHit(b,N){const L=this.getLayer(),x=b||L&&L.hitCanvas;return L&&L.clearBeforeDraw()&&L.getHitCanvas().getContext().clear(),n.Container.prototype.drawHit.call(this,x,N),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(b){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(b)}getHitGraphEnabled(b){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const b=this.parent;!!this.hitCanvas._canvas.parentNode?b.content.removeChild(this.hitCanvas._canvas):b.content.appendChild(this.hitCanvas._canvas)}destroy(){return o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Tu.Layer=S,S.prototype.nodeType="Layer",(0,p._registerNode)(S),l.Factory.addGetterSetter(S,"imageSmoothingEnabled",!0),l.Factory.addGetterSetter(S,"clearBeforeDraw",!0),l.Factory.addGetterSetter(S,"hitGraphEnabled",!0,(0,c.getBooleanValidator)()),Tu}var Ru={},wp;function Yy(){if(wp)return Ru;wp=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.FastLayer=void 0;const o=Ht(),n=Sm(),s=Qe();let l=class extends n.Layer{constructor(c){super(c),this.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Ru.FastLayer=l,l.prototype.nodeType="FastLayer",(0,s._registerNode)(l),Ru}var Ou={},Sp;function Gf(){if(Sp)return Ou;Sp=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.Group=void 0;const o=Ht(),n=nh(),s=Qe();let l=class extends n.Container{_validateAdd(c){const u=c.getType();u!=="Group"&&u!=="Shape"&&o.Util.throw("You may only add groups and shapes to groups.")}};return Ou.Group=l,l.prototype.nodeType="Group",(0,s._registerNode)(l),Ou}var Nu={},kp;function qf(){if(kp)return Nu;kp=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.Animation=void 0;const o=Qe(),n=Ht(),s=(function(){return o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return new Date().getTime()}})();let l=class yl{constructor(c,u){this.id=yl.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:s(),frameRate:0},this.func=c,this.setLayers(u)}setLayers(c){let u=[];return c&&(u=Array.isArray(c)?c:[c]),this.layers=u,this}getLayers(){return this.layers}addLayer(c){const u=this.layers,p=u.length;for(let g=0;g<p;g++)if(u[g]._id===c._id)return!1;return this.layers.push(c),!0}isRunning(){const u=yl.animations,p=u.length;for(let g=0;g<p;g++)if(u[g].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=s(),yl._addAnimation(this),this}stop(){return yl._removeAnimation(this),this}_updateFrameObject(c){this.frame.timeDiff=c-this.frame.lastTime,this.frame.lastTime=c,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(c){this.animations.push(c),this._handleAnimation()}static _removeAnimation(c){const u=c.id,p=this.animations,g=p.length;for(let v=0;v<g;v++)if(p[v].id===u){this.animations.splice(v,1);break}}static _runFrames(){const c={},u=this.animations;for(let p=0;p<u.length;p++){const g=u[p],v=g.layers,k=g.func;g._updateFrameObject(s());const T=v.length;let E;if(k?E=k.call(g,g.frame)!==!1:E=!0,!!E)for(let S=0;S<T;S++){const C=v[S];C._id!==void 0&&(c[C._id]=C)}}for(const p in c)c.hasOwnProperty(p)&&c[p].batchDraw()}static _animationLoop(){const c=yl;c.animations.length?(c._runFrames(),n.Util.requestAnimFrame(c._animationLoop)):c.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,n.Util.requestAnimFrame(this._animationLoop))}};return Nu.Animation=l,l.animations=[],l.animIdCounter=0,l.animRunning=!1,Nu}var cf={},Ep;function Qy(){return Ep||(Ep=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const n=Ht(),s=qf(),l=Zt(),d=Qe(),c={node:1,duration:1,easing:1,onFinish:1,yoyo:1},u=1,p=2,g=3,v=["fill","stroke","shadowColor"];let k=0;class T{constructor(C,b,N,L,x,_,R){this.prop=C,this.propFunc=b,this.begin=L,this._pos=L,this.duration=_,this._change=0,this.prevPos=0,this.yoyo=R,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=N,this._change=x-this.begin,this.pause()}fire(C){const b=this[C];b&&b()}setTime(C){C>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():C<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=C,this.update())}getTime(){return this._time}setPosition(C){this.prevPos=this._pos,this.propFunc(C),this._pos=C}getPosition(C){return C===void 0&&(C=this._time),this.func(C,this.begin,this._change,this.duration)}play(){this.state=p,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=g,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(C){this.pause(),this._time=C,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const C=this.getTimer()-this._startTime;this.state===p?this.setTime(C):this.state===g&&this.setTime(this.duration-C)}pause(){this.state=u,this.fire("onPause")}getTimer(){return new Date().getTime()}}class E{constructor(C){const b=this,N=C.node,L=N._id,x=C.easing||o.Easings.Linear,_=!!C.yoyo;let R,I;typeof C.duration>"u"?R=.3:C.duration===0?R=.001:R=C.duration,this.node=N,this._id=k++;const U=N.getLayer()||(N instanceof d.Konva.Stage?N.getLayers():null);U||n.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new s.Animation(function(){b.tween.onEnterFrame()},U),this.tween=new T(I,function(W){b._tweenFunc(W)},x,0,1,R*1e3,_),this._addListeners(),E.attrs[L]||(E.attrs[L]={}),E.attrs[L][this._id]||(E.attrs[L][this._id]={}),E.tweens[L]||(E.tweens[L]={});for(I in C)c[I]===void 0&&this._addAttr(I,C[I]);this.reset(),this.onFinish=C.onFinish,this.onReset=C.onReset,this.onUpdate=C.onUpdate}_addAttr(C,b){const N=this.node,L=N._id;let x,_,R,I,U;const W=E.tweens[L][C];W&&delete E.attrs[L][W][C];let j=N.getAttr(C);if(n.Util._isArray(b))if(x=[],_=Math.max(b.length,j.length),C==="points"&&b.length!==j.length&&(b.length>j.length?(I=j,j=n.Util._prepareArrayForTween(j,b,N.closed())):(R=b,b=n.Util._prepareArrayForTween(b,j,N.closed()))),C.indexOf("fill")===0)for(let F=0;F<_;F++)if(F%2===0)x.push(b[F]-j[F]);else{const G=n.Util.colorToRGBA(j[F]);U=n.Util.colorToRGBA(b[F]),j[F]=G,x.push({r:U.r-G.r,g:U.g-G.g,b:U.b-G.b,a:U.a-G.a})}else for(let F=0;F<_;F++)x.push(b[F]-j[F]);else v.indexOf(C)!==-1?(j=n.Util.colorToRGBA(j),U=n.Util.colorToRGBA(b),x={r:U.r-j.r,g:U.g-j.g,b:U.b-j.b,a:U.a-j.a}):x=b-j;E.attrs[L][this._id][C]={start:j,diff:x,end:b,trueEnd:R,trueStart:I},E.tweens[L][C]=this._id}_tweenFunc(C){const b=this.node,N=E.attrs[b._id][this._id];let L,x,_,R,I,U,W,j;for(L in N){if(x=N[L],_=x.start,R=x.diff,j=x.end,n.Util._isArray(_))if(I=[],W=Math.max(_.length,j.length),L.indexOf("fill")===0)for(U=0;U<W;U++)U%2===0?I.push((_[U]||0)+R[U]*C):I.push("rgba("+Math.round(_[U].r+R[U].r*C)+","+Math.round(_[U].g+R[U].g*C)+","+Math.round(_[U].b+R[U].b*C)+","+(_[U].a+R[U].a*C)+")");else for(U=0;U<W;U++)I.push((_[U]||0)+R[U]*C);else v.indexOf(L)!==-1?I="rgba("+Math.round(_.r+R.r*C)+","+Math.round(_.g+R.g*C)+","+Math.round(_.b+R.b*C)+","+(_.a+R.a*C)+")":I=_+R*C;b.setAttr(L,I)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const C=this.node,b=E.attrs[C._id][this._id];b.points&&b.points.trueEnd&&C.setAttr("points",b.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const C=this.node,b=E.attrs[C._id][this._id];b.points&&b.points.trueStart&&C.points(b.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(C){return this.tween.seek(C*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const C=this.node._id,b=this._id,N=E.tweens[C];this.pause(),this.anim&&this.anim.stop();for(const L in N)delete E.tweens[C][L];delete E.attrs[C][b],E.tweens[C]&&(Object.keys(E.tweens[C]).length===0&&delete E.tweens[C],Object.keys(E.attrs[C]).length===0&&delete E.attrs[C])}}o.Tween=E,E.attrs={},E.tweens={},l.Node.prototype.to=function(S){const C=S.onFinish;S.node=this,S.onFinish=function(){this.destroy(),C&&C()},new E(S).play()},o.Easings={BackEaseIn(S,C,b,N){return b*(S/=N)*S*((1.70158+1)*S-1.70158)+C},BackEaseOut(S,C,b,N){return b*((S=S/N-1)*S*((1.70158+1)*S+1.70158)+1)+C},BackEaseInOut(S,C,b,N){let L=1.70158;return(S/=N/2)<1?b/2*(S*S*(((L*=1.525)+1)*S-L))+C:b/2*((S-=2)*S*(((L*=1.525)+1)*S+L)+2)+C},ElasticEaseIn(S,C,b,N,L,x){let _=0;return S===0?C:(S/=N)===1?C+b:(x||(x=N*.3),!L||L<Math.abs(b)?(L=b,_=x/4):_=x/(2*Math.PI)*Math.asin(b/L),-(L*Math.pow(2,10*(S-=1))*Math.sin((S*N-_)*(2*Math.PI)/x))+C)},ElasticEaseOut(S,C,b,N,L,x){let _=0;return S===0?C:(S/=N)===1?C+b:(x||(x=N*.3),!L||L<Math.abs(b)?(L=b,_=x/4):_=x/(2*Math.PI)*Math.asin(b/L),L*Math.pow(2,-10*S)*Math.sin((S*N-_)*(2*Math.PI)/x)+b+C)},ElasticEaseInOut(S,C,b,N,L,x){let _=0;return S===0?C:(S/=N/2)===2?C+b:(x||(x=N*(.3*1.5)),!L||L<Math.abs(b)?(L=b,_=x/4):_=x/(2*Math.PI)*Math.asin(b/L),S<1?-.5*(L*Math.pow(2,10*(S-=1))*Math.sin((S*N-_)*(2*Math.PI)/x))+C:L*Math.pow(2,-10*(S-=1))*Math.sin((S*N-_)*(2*Math.PI)/x)*.5+b+C)},BounceEaseOut(S,C,b,N){return(S/=N)<1/2.75?b*(7.5625*S*S)+C:S<2/2.75?b*(7.5625*(S-=1.5/2.75)*S+.75)+C:S<2.5/2.75?b*(7.5625*(S-=2.25/2.75)*S+.9375)+C:b*(7.5625*(S-=2.625/2.75)*S+.984375)+C},BounceEaseIn(S,C,b,N){return b-o.Easings.BounceEaseOut(N-S,0,b,N)+C},BounceEaseInOut(S,C,b,N){return S<N/2?o.Easings.BounceEaseIn(S*2,0,b,N)*.5+C:o.Easings.BounceEaseOut(S*2-N,0,b,N)*.5+b*.5+C},EaseIn(S,C,b,N){return b*(S/=N)*S+C},EaseOut(S,C,b,N){return-b*(S/=N)*(S-2)+C},EaseInOut(S,C,b,N){return(S/=N/2)<1?b/2*S*S+C:-b/2*(--S*(S-2)-1)+C},StrongEaseIn(S,C,b,N){return b*(S/=N)*S*S*S*S+C},StrongEaseOut(S,C,b,N){return b*((S=S/N-1)*S*S*S*S+1)+C},StrongEaseInOut(S,C,b,N){return(S/=N/2)<1?b/2*S*S*S*S*S+C:b/2*((S-=2)*S*S*S*S+2)+C},Linear(S,C,b,N){return b*S/N+C}}})(cf)),cf}var Cp;function Of(){return Cp||(Cp=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const n=Qe(),s=Ht(),l=Zt(),d=nh(),c=Ky(),u=Sm(),p=Yy(),g=Gf(),v=Bf(),k=Tn(),T=qf(),E=Qy(),S=_m(),C=th();o.Konva=s.Util._assign(n.Konva,{Util:s.Util,Transform:s.Transform,Node:l.Node,Container:d.Container,Stage:c.Stage,stages:c.stages,Layer:u.Layer,FastLayer:p.FastLayer,Group:g.Group,DD:v.DD,Shape:k.Shape,shapes:k.shapes,Animation:T.Animation,Tween:E.Tween,Easings:E.Easings,Context:S.Context,Canvas:C.Canvas}),o.default=o.Konva})(nf)),nf}var Au={},xp;function Xy(){if(xp)return Au;xp=1,Object.defineProperty(Au,"__esModule",{value:!0}),Au.Arc=void 0;const o=tt(),n=Tn(),s=Qe(),l=rt(),d=Qe();let c=class extends n.Shape{_sceneFunc(p){const g=s.Konva.getAngle(this.angle()),v=this.clockwise();p.beginPath(),p.arc(0,0,this.outerRadius(),0,g,v),p.arc(0,0,this.innerRadius(),g,0,!v),p.closePath(),p.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(p){this.outerRadius(p/2)}setHeight(p){this.outerRadius(p/2)}getSelfRect(){const p=this.innerRadius(),g=this.outerRadius(),v=this.clockwise(),k=s.Konva.getAngle(v?360-this.angle():this.angle()),T=Math.cos(Math.min(k,Math.PI)),E=1,S=Math.sin(Math.min(Math.max(Math.PI,k),3*Math.PI/2)),C=Math.sin(Math.min(k,Math.PI/2)),b=T*(T>0?p:g),N=E*g,L=S*(S>0?p:g),x=C*(C>0?g:p);return{x:b,y:v?-1*x:L,width:N-b,height:x-L}}};return Au.Arc=c,c.prototype._centroid=!0,c.prototype.className="Arc",c.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,d._registerNode)(c),o.Factory.addGetterSetter(c,"innerRadius",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(c,"outerRadius",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(c,"angle",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(c,"clockwise",!1,(0,l.getBooleanValidator)()),Au}var Iu={},Lu={},Pp;function km(){if(Pp)return Lu;Pp=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.Line=void 0;const o=tt(),n=Qe(),s=Tn(),l=rt();function d(p,g,v,k,T,E,S){const C=Math.sqrt(Math.pow(v-p,2)+Math.pow(k-g,2)),b=Math.sqrt(Math.pow(T-v,2)+Math.pow(E-k,2)),N=S*C/(C+b),L=S*b/(C+b),x=v-N*(T-p),_=k-N*(E-g),R=v+L*(T-p),I=k+L*(E-g);return[x,_,R,I]}function c(p,g){const v=p.length,k=[];for(let T=2;T<v-2;T+=2){const E=d(p[T-2],p[T-1],p[T],p[T+1],p[T+2],p[T+3],g);isNaN(E[0])||(k.push(E[0]),k.push(E[1]),k.push(p[T]),k.push(p[T+1]),k.push(E[2]),k.push(E[3]))}return k}class u extends s.Shape{constructor(g){super(g),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(g){const v=this.points(),k=v.length,T=this.tension(),E=this.closed(),S=this.bezier();if(!k)return;let C=0;if(g.beginPath(),g.moveTo(v[0],v[1]),T!==0&&k>4){const b=this.getTensionPoints(),N=b.length;for(C=E?0:4,E||g.quadraticCurveTo(b[0],b[1],b[2],b[3]);C<N-2;)g.bezierCurveTo(b[C++],b[C++],b[C++],b[C++],b[C++],b[C++]);E||g.quadraticCurveTo(b[N-2],b[N-1],v[k-2],v[k-1])}else if(S)for(C=2;C<k;)g.bezierCurveTo(v[C++],v[C++],v[C++],v[C++],v[C++],v[C++]);else for(C=2;C<k;C+=2)g.lineTo(v[C],v[C+1]);E?(g.closePath(),g.fillStrokeShape(this)):g.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():c(this.points(),this.tension())}_getTensionPointsClosed(){const g=this.points(),v=g.length,k=this.tension(),T=d(g[v-2],g[v-1],g[0],g[1],g[2],g[3],k),E=d(g[v-4],g[v-3],g[v-2],g[v-1],g[0],g[1],k),S=c(g,k);return[T[2],T[3]].concat(S).concat([E[0],E[1],g[v-2],g[v-1],E[2],E[3],T[0],T[1],g[0],g[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let g=this.points();if(g.length<4)return{x:g[0]||0,y:g[1]||0,width:0,height:0};this.tension()!==0?g=[g[0],g[1],...this._getTensionPoints(),g[g.length-2],g[g.length-1]]:g=this.points();let v=g[0],k=g[0],T=g[1],E=g[1],S,C;for(let b=0;b<g.length/2;b++)S=g[b*2],C=g[b*2+1],v=Math.min(v,S),k=Math.max(k,S),T=Math.min(T,C),E=Math.max(E,C);return{x:v,y:T,width:k-v,height:E-T}}}return Lu.Line=u,u.prototype.className="Line",u.prototype._attrsAffectingSize=["points","bezier","tension"],(0,n._registerNode)(u),o.Factory.addGetterSetter(u,"closed",!1),o.Factory.addGetterSetter(u,"bezier",!1),o.Factory.addGetterSetter(u,"tension",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(u,"points",[],(0,l.getNumberArrayValidator)()),Lu}var ju={},df={},bp;function Jy(){return bp||(bp=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const n=(u,p,g)=>{let v,k;const E=g/2;v=0;for(let S=0;S<20;S++)k=E*o.tValues[20][S]+E,v+=o.cValues[20][S]*l(u,p,k);return E*v};o.getCubicArcLength=n;const s=(u,p,g)=>{g===void 0&&(g=1);const v=u[0]-2*u[1]+u[2],k=p[0]-2*p[1]+p[2],T=2*u[1]-2*u[0],E=2*p[1]-2*p[0],S=4*(v*v+k*k),C=4*(v*T+k*E),b=T*T+E*E;if(S===0)return g*Math.sqrt(Math.pow(u[2]-u[0],2)+Math.pow(p[2]-p[0],2));const N=C/(2*S),L=b/S,x=g+N,_=L-N*N,R=x*x+_>0?Math.sqrt(x*x+_):0,I=N*N+_>0?Math.sqrt(N*N+_):0,U=N+Math.sqrt(N*N+_)!==0?_*Math.log(Math.abs((x+R)/(N+I))):0;return Math.sqrt(S)/2*(x*R-N*I+U)};o.getQuadraticArcLength=s;function l(u,p,g){const v=d(1,g,u),k=d(1,g,p),T=v*v+k*k;return Math.sqrt(T)}const d=(u,p,g)=>{const v=g.length-1;let k,T;if(v===0)return 0;if(u===0){T=0;for(let E=0;E<=v;E++)T+=o.binomialCoefficients[v][E]*Math.pow(1-p,v-E)*Math.pow(p,E)*g[E];return T}else{k=new Array(v);for(let E=0;E<v;E++)k[E]=v*(g[E+1]-g[E]);return d(u-1,p,k)}},c=(u,p,g)=>{let v=1,k=u/p,T=(u-g(k))/p,E=0;for(;v>.001;){const S=g(k+T),C=Math.abs(u-S)/p;if(C<v)v=C,k+=T;else{const b=g(k-T),N=Math.abs(u-b)/p;N<v?(v=N,k-=T):T/=2}if(E++,E>500)break}return k};o.t2length=c})(df)),df}var Tp;function Vf(){if(Tp)return ju;Tp=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.Path=void 0;const o=tt(),n=Qe(),s=Tn(),l=Jy();let d=class kr extends s.Shape{constructor(u){super(u),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=kr.parsePathData(this.data()),this.pathLength=kr.getPathLength(this.dataArray)}_sceneFunc(u){const p=this.dataArray;u.beginPath();let g=!1;for(let v=0;v<p.length;v++){const k=p[v].command,T=p[v].points;switch(k){case"L":u.lineTo(T[0],T[1]);break;case"M":u.moveTo(T[0],T[1]);break;case"C":u.bezierCurveTo(T[0],T[1],T[2],T[3],T[4],T[5]);break;case"Q":u.quadraticCurveTo(T[0],T[1],T[2],T[3]);break;case"A":const E=T[0],S=T[1],C=T[2],b=T[3],N=T[4],L=T[5],x=T[6],_=T[7],R=C>b?C:b,I=C>b?1:C/b,U=C>b?b/C:1;u.translate(E,S),u.rotate(x),u.scale(I,U),u.arc(0,0,R,N,N+L,1-_),u.scale(1/I,1/U),u.rotate(-x),u.translate(-E,-S);break;case"z":g=!0,u.closePath();break}}!g&&!this.hasFill()?u.strokeShape(this):u.fillStrokeShape(this)}getSelfRect(){let u=[];this.dataArray.forEach(function(S){if(S.command==="A"){const C=S.points[4],b=S.points[5],N=S.points[4]+b;let L=Math.PI/180;if(Math.abs(C-N)<L&&(L=Math.abs(C-N)),b<0)for(let x=C-L;x>N;x-=L){const _=kr.getPointOnEllipticalArc(S.points[0],S.points[1],S.points[2],S.points[3],x,0);u.push(_.x,_.y)}else for(let x=C+L;x<N;x+=L){const _=kr.getPointOnEllipticalArc(S.points[0],S.points[1],S.points[2],S.points[3],x,0);u.push(_.x,_.y)}}else if(S.command==="C")for(let C=0;C<=1;C+=.01){const b=kr.getPointOnCubicBezier(C,S.start.x,S.start.y,S.points[0],S.points[1],S.points[2],S.points[3],S.points[4],S.points[5]);u.push(b.x,b.y)}else u=u.concat(S.points)});let p=u[0],g=u[0],v=u[1],k=u[1],T,E;for(let S=0;S<u.length/2;S++)T=u[S*2],E=u[S*2+1],isNaN(T)||(p=Math.min(p,T),g=Math.max(g,T)),isNaN(E)||(v=Math.min(v,E),k=Math.max(k,E));return{x:p,y:v,width:g-p,height:k-v}}getLength(){return this.pathLength}getPointAtLength(u){return kr.getPointAtLengthOfDataArray(u,this.dataArray)}static getLineLength(u,p,g,v){return Math.sqrt((g-u)*(g-u)+(v-p)*(v-p))}static getPathLength(u){let p=0;for(let g=0;g<u.length;++g)p+=u[g].pathLength;return p}static getPointAtLengthOfDataArray(u,p){let g,v=0,k=p.length;if(!k)return null;for(;v<k&&u>p[v].pathLength;)u-=p[v].pathLength,++v;if(v===k)return g=p[v-1].points.slice(-2),{x:g[0],y:g[1]};if(u<.01)return p[v].command==="M"?(g=p[v].points.slice(0,2),{x:g[0],y:g[1]}):{x:p[v].start.x,y:p[v].start.y};const T=p[v],E=T.points;switch(T.command){case"L":return kr.getPointOnLine(u,T.start.x,T.start.y,E[0],E[1]);case"C":return kr.getPointOnCubicBezier((0,l.t2length)(u,kr.getPathLength(p),R=>(0,l.getCubicArcLength)([T.start.x,E[0],E[2],E[4]],[T.start.y,E[1],E[3],E[5]],R)),T.start.x,T.start.y,E[0],E[1],E[2],E[3],E[4],E[5]);case"Q":return kr.getPointOnQuadraticBezier((0,l.t2length)(u,kr.getPathLength(p),R=>(0,l.getQuadraticArcLength)([T.start.x,E[0],E[2]],[T.start.y,E[1],E[3]],R)),T.start.x,T.start.y,E[0],E[1],E[2],E[3]);case"A":const S=E[0],C=E[1],b=E[2],N=E[3],L=E[5],x=E[6];let _=E[4];return _+=L*u/T.pathLength,kr.getPointOnEllipticalArc(S,C,b,N,_,x)}return null}static getPointOnLine(u,p,g,v,k,T,E){T=T??p,E=E??g;const S=this.getLineLength(p,g,v,k);if(S<1e-10)return{x:p,y:g};if(v===p)return{x:T,y:E+(k>g?u:-u)};const C=(k-g)/(v-p),b=Math.sqrt(u*u/(1+C*C))*(v<p?-1:1),N=C*b;if(Math.abs(E-g-C*(T-p))<1e-10)return{x:T+b,y:E+N};const L=((T-p)*(v-p)+(E-g)*(k-g))/(S*S),x=p+L*(v-p),_=g+L*(k-g),R=this.getLineLength(T,E,x,_),I=Math.sqrt(u*u-R*R),U=Math.sqrt(I*I/(1+C*C))*(v<p?-1:1),W=C*U;return{x:x+U,y:_+W}}static getPointOnCubicBezier(u,p,g,v,k,T,E,S,C){function b(I){return I*I*I}function N(I){return 3*I*I*(1-I)}function L(I){return 3*I*(1-I)*(1-I)}function x(I){return(1-I)*(1-I)*(1-I)}const _=S*b(u)+T*N(u)+v*L(u)+p*x(u),R=C*b(u)+E*N(u)+k*L(u)+g*x(u);return{x:_,y:R}}static getPointOnQuadraticBezier(u,p,g,v,k,T,E){function S(x){return x*x}function C(x){return 2*x*(1-x)}function b(x){return(1-x)*(1-x)}const N=T*S(u)+v*C(u)+p*b(u),L=E*S(u)+k*C(u)+g*b(u);return{x:N,y:L}}static getPointOnEllipticalArc(u,p,g,v,k,T){const E=Math.cos(T),S=Math.sin(T),C={x:g*Math.cos(k),y:v*Math.sin(k)};return{x:u+(C.x*E-C.y*S),y:p+(C.x*S+C.y*E)}}static parsePathData(u){if(!u)return[];let p=u;const g=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];p=p.replace(new RegExp(" ","g"),",");for(let N=0;N<g.length;N++)p=p.replace(new RegExp(g[N],"g"),"|"+g[N]);const v=p.split("|"),k=[],T=[];let E=0,S=0;const C=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let b;for(let N=1;N<v.length;N++){let L=v[N],x=L.charAt(0);for(L=L.slice(1),T.length=0;b=C.exec(L);)T.push(b[0]);const _=[];for(let R=0,I=T.length;R<I;R++){if(T[R]==="00"){_.push(0,0);continue}const U=parseFloat(T[R]);isNaN(U)?_.push(0):_.push(U)}for(;_.length>0&&!isNaN(_[0]);){let R="",I=[];const U=E,W=S;let j,F,G,B,K,$,J,Y,oe,A;switch(x){case"l":E+=_.shift(),S+=_.shift(),R="L",I.push(E,S);break;case"L":E=_.shift(),S=_.shift(),I.push(E,S);break;case"m":const D=_.shift(),V=_.shift();if(E+=D,S+=V,R="M",k.length>2&&k[k.length-1].command==="z"){for(let q=k.length-2;q>=0;q--)if(k[q].command==="M"){E=k[q].points[0]+D,S=k[q].points[1]+V;break}}I.push(E,S),x="l";break;case"M":E=_.shift(),S=_.shift(),R="M",I.push(E,S),x="L";break;case"h":E+=_.shift(),R="L",I.push(E,S);break;case"H":E=_.shift(),R="L",I.push(E,S);break;case"v":S+=_.shift(),R="L",I.push(E,S);break;case"V":S=_.shift(),R="L",I.push(E,S);break;case"C":I.push(_.shift(),_.shift(),_.shift(),_.shift()),E=_.shift(),S=_.shift(),I.push(E,S);break;case"c":I.push(E+_.shift(),S+_.shift(),E+_.shift(),S+_.shift()),E+=_.shift(),S+=_.shift(),R="C",I.push(E,S);break;case"S":F=E,G=S,j=k[k.length-1],j.command==="C"&&(F=E+(E-j.points[2]),G=S+(S-j.points[3])),I.push(F,G,_.shift(),_.shift()),E=_.shift(),S=_.shift(),R="C",I.push(E,S);break;case"s":F=E,G=S,j=k[k.length-1],j.command==="C"&&(F=E+(E-j.points[2]),G=S+(S-j.points[3])),I.push(F,G,E+_.shift(),S+_.shift()),E+=_.shift(),S+=_.shift(),R="C",I.push(E,S);break;case"Q":I.push(_.shift(),_.shift()),E=_.shift(),S=_.shift(),I.push(E,S);break;case"q":I.push(E+_.shift(),S+_.shift()),E+=_.shift(),S+=_.shift(),R="Q",I.push(E,S);break;case"T":F=E,G=S,j=k[k.length-1],j.command==="Q"&&(F=E+(E-j.points[0]),G=S+(S-j.points[1])),E=_.shift(),S=_.shift(),R="Q",I.push(F,G,E,S);break;case"t":F=E,G=S,j=k[k.length-1],j.command==="Q"&&(F=E+(E-j.points[0]),G=S+(S-j.points[1])),E+=_.shift(),S+=_.shift(),R="Q",I.push(F,G,E,S);break;case"A":B=_.shift(),K=_.shift(),$=_.shift(),J=_.shift(),Y=_.shift(),oe=E,A=S,E=_.shift(),S=_.shift(),R="A",I=this.convertEndpointToCenterParameterization(oe,A,E,S,J,Y,B,K,$);break;case"a":B=_.shift(),K=_.shift(),$=_.shift(),J=_.shift(),Y=_.shift(),oe=E,A=S,E+=_.shift(),S+=_.shift(),R="A",I=this.convertEndpointToCenterParameterization(oe,A,E,S,J,Y,B,K,$);break}k.push({command:R||x,points:I,start:{x:U,y:W},pathLength:this.calcLength(U,W,R||x,I)})}(x==="z"||x==="Z")&&k.push({command:"z",points:[],start:void 0,pathLength:0})}return k}static calcLength(u,p,g,v){let k,T,E,S;const C=kr;switch(g){case"L":return C.getLineLength(u,p,v[0],v[1]);case"C":return(0,l.getCubicArcLength)([u,v[0],v[2],v[4]],[p,v[1],v[3],v[5]],1);case"Q":return(0,l.getQuadraticArcLength)([u,v[0],v[2]],[p,v[1],v[3]],1);case"A":k=0;const b=v[4],N=v[5],L=v[4]+N;let x=Math.PI/180;if(Math.abs(b-L)<x&&(x=Math.abs(b-L)),T=C.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],b,0),N<0)for(S=b-x;S>L;S-=x)E=C.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],S,0),k+=C.getLineLength(T.x,T.y,E.x,E.y),T=E;else for(S=b+x;S<L;S+=x)E=C.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],S,0),k+=C.getLineLength(T.x,T.y,E.x,E.y),T=E;return E=C.getPointOnEllipticalArc(v[0],v[1],v[2],v[3],L,0),k+=C.getLineLength(T.x,T.y,E.x,E.y),k}return 0}static convertEndpointToCenterParameterization(u,p,g,v,k,T,E,S,C){const b=C*(Math.PI/180),N=Math.cos(b)*(u-g)/2+Math.sin(b)*(p-v)/2,L=-1*Math.sin(b)*(u-g)/2+Math.cos(b)*(p-v)/2,x=N*N/(E*E)+L*L/(S*S);x>1&&(E*=Math.sqrt(x),S*=Math.sqrt(x));let _=Math.sqrt((E*E*(S*S)-E*E*(L*L)-S*S*(N*N))/(E*E*(L*L)+S*S*(N*N)));k===T&&(_*=-1),isNaN(_)&&(_=0);const R=_*E*L/S,I=_*-S*N/E,U=(u+g)/2+Math.cos(b)*R-Math.sin(b)*I,W=(p+v)/2+Math.sin(b)*R+Math.cos(b)*I,j=function(Y){return Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1])},F=function(Y,oe){return(Y[0]*oe[0]+Y[1]*oe[1])/(j(Y)*j(oe))},G=function(Y,oe){return(Y[0]*oe[1]<Y[1]*oe[0]?-1:1)*Math.acos(F(Y,oe))},B=G([1,0],[(N-R)/E,(L-I)/S]),K=[(N-R)/E,(L-I)/S],$=[(-1*N-R)/E,(-1*L-I)/S];let J=G(K,$);return F(K,$)<=-1&&(J=Math.PI),F(K,$)>=1&&(J=0),T===0&&J>0&&(J=J-2*Math.PI),T===1&&J<0&&(J=J+2*Math.PI),[U,W,E,S,B,J,b,T]}};return ju.Path=d,d.prototype.className="Path",d.prototype._attrsAffectingSize=["data"],(0,n._registerNode)(d),o.Factory.addGetterSetter(d,"data"),ju}var Rp;function Zy(){if(Rp)return Iu;Rp=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.Arrow=void 0;const o=tt(),n=km(),s=rt(),l=Qe(),d=Vf();let c=class extends n.Line{_sceneFunc(p){super._sceneFunc(p);const g=Math.PI*2,v=this.points();let k=v;const T=this.tension()!==0&&v.length>4;T&&(k=this.getTensionPoints());const E=this.pointerLength(),S=v.length;let C,b;if(T){const x=[k[k.length-4],k[k.length-3],k[k.length-2],k[k.length-1],v[S-2],v[S-1]],_=d.Path.calcLength(k[k.length-4],k[k.length-3],"C",x),R=d.Path.getPointOnQuadraticBezier(Math.min(1,1-E/_),x[0],x[1],x[2],x[3],x[4],x[5]);C=v[S-2]-R.x,b=v[S-1]-R.y}else C=v[S-2]-v[S-4],b=v[S-1]-v[S-3];const N=(Math.atan2(b,C)+g)%g,L=this.pointerWidth();this.pointerAtEnding()&&(p.save(),p.beginPath(),p.translate(v[S-2],v[S-1]),p.rotate(N),p.moveTo(0,0),p.lineTo(-E,L/2),p.lineTo(-E,-L/2),p.closePath(),p.restore(),this.__fillStroke(p)),this.pointerAtBeginning()&&(p.save(),p.beginPath(),p.translate(v[0],v[1]),T?(C=(k[0]+k[2])/2-v[0],b=(k[1]+k[3])/2-v[1]):(C=v[2]-v[0],b=v[3]-v[1]),p.rotate((Math.atan2(-b,-C)+g)%g),p.moveTo(0,0),p.lineTo(-E,L/2),p.lineTo(-E,-L/2),p.closePath(),p.restore(),this.__fillStroke(p))}__fillStroke(p){const g=this.dashEnabled();g&&(this.attrs.dashEnabled=!1,p.setLineDash([])),p.fillStrokeShape(this),g&&(this.attrs.dashEnabled=!0)}getSelfRect(){const p=super.getSelfRect(),g=this.pointerWidth()/2;return{x:p.x,y:p.y-g,width:p.width,height:p.height+g*2}}};return Iu.Arrow=c,c.prototype.className="Arrow",(0,l._registerNode)(c),o.Factory.addGetterSetter(c,"pointerLength",10,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(c,"pointerWidth",10,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(c,"pointerAtBeginning",!1),o.Factory.addGetterSetter(c,"pointerAtEnding",!0),Iu}var Fu={},Op;function e2(){if(Op)return Fu;Op=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.Circle=void 0;const o=tt(),n=Tn(),s=rt(),l=Qe();let d=class extends n.Shape{_sceneFunc(u){u.beginPath(),u.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),u.closePath(),u.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(u){this.radius()!==u/2&&this.radius(u/2)}setHeight(u){this.radius()!==u/2&&this.radius(u/2)}};return Fu.Circle=d,d.prototype._centroid=!0,d.prototype.className="Circle",d.prototype._attrsAffectingSize=["radius"],(0,l._registerNode)(d),o.Factory.addGetterSetter(d,"radius",0,(0,s.getNumberValidator)()),Fu}var Du={},Np;function t2(){if(Np)return Du;Np=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.Ellipse=void 0;const o=tt(),n=Tn(),s=rt(),l=Qe();let d=class extends n.Shape{_sceneFunc(u){const p=this.radiusX(),g=this.radiusY();u.beginPath(),u.save(),p!==g&&u.scale(1,g/p),u.arc(0,0,p,0,Math.PI*2,!1),u.restore(),u.closePath(),u.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(u){this.radiusX(u/2)}setHeight(u){this.radiusY(u/2)}};return Du.Ellipse=d,d.prototype.className="Ellipse",d.prototype._centroid=!0,d.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,l._registerNode)(d),o.Factory.addComponentsGetterSetter(d,"radius",["x","y"]),o.Factory.addGetterSetter(d,"radiusX",0,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(d,"radiusY",0,(0,s.getNumberValidator)()),Du}var Mu={},Ap;function n2(){if(Ap)return Mu;Ap=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.Image=void 0;const o=Ht(),n=tt(),s=Tn(),l=Qe(),d=rt();let c=class Em extends s.Shape{constructor(p){super(p),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",g=>{this._removeImageLoad(g.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const p=this.image();p&&p.complete||p&&p.readyState===4||p&&p.addEventListener&&p.addEventListener("load",this._loadListener)}_removeImageLoad(p){p&&p.removeEventListener&&p.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const p=!!this.cornerRadius(),g=this.hasShadow();return p&&g?!0:super._useBufferCanvas(!0)}_sceneFunc(p){const g=this.getWidth(),v=this.getHeight(),k=this.cornerRadius(),T=this.attrs.image;let E;if(T){const S=this.attrs.cropWidth,C=this.attrs.cropHeight;S&&C?E=[T,this.cropX(),this.cropY(),S,C,0,0,g,v]:E=[T,0,0,g,v]}(this.hasFill()||this.hasStroke()||k)&&(p.beginPath(),k?o.Util.drawRoundedRectPath(p,g,v,k):p.rect(0,0,g,v),p.closePath(),p.fillStrokeShape(this)),T&&(k&&p.clip(),p.drawImage.apply(p,E))}_hitFunc(p){const g=this.width(),v=this.height(),k=this.cornerRadius();p.beginPath(),k?o.Util.drawRoundedRectPath(p,g,v,k):p.rect(0,0,g,v),p.closePath(),p.fillStrokeShape(this)}getWidth(){var p,g;return(p=this.attrs.width)!==null&&p!==void 0?p:(g=this.image())===null||g===void 0?void 0:g.width}getHeight(){var p,g;return(p=this.attrs.height)!==null&&p!==void 0?p:(g=this.image())===null||g===void 0?void 0:g.height}static fromURL(p,g,v=null){const k=o.Util.createImageElement();k.onload=function(){const T=new Em({image:k});g(T)},k.onerror=v,k.crossOrigin="Anonymous",k.src=p}};return Mu.Image=c,c.prototype.className="Image",(0,l._registerNode)(c),n.Factory.addGetterSetter(c,"cornerRadius",0,(0,d.getNumberOrArrayOfNumbersValidator)(4)),n.Factory.addGetterSetter(c,"image"),n.Factory.addComponentsGetterSetter(c,"crop",["x","y","width","height"]),n.Factory.addGetterSetter(c,"cropX",0,(0,d.getNumberValidator)()),n.Factory.addGetterSetter(c,"cropY",0,(0,d.getNumberValidator)()),n.Factory.addGetterSetter(c,"cropWidth",0,(0,d.getNumberValidator)()),n.Factory.addGetterSetter(c,"cropHeight",0,(0,d.getNumberValidator)()),Mu}var ea={},Ip;function r2(){if(Ip)return ea;Ip=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.Tag=ea.Label=void 0;const o=tt(),n=Tn(),s=Gf(),l=rt(),d=Qe(),c=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],u="Change.konva",p="none",g="up",v="right",k="down",T="left",E=c.length;let S=class extends s.Group{constructor(N){super(N),this.on("add.konva",function(L){this._addListeners(L.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(N){let L=this,x;const _=function(){L._sync()};for(x=0;x<E;x++)N.on(c[x]+u,_)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let N=this.getText(),L=this.getTag(),x,_,R,I,U,W,j;if(N&&L){switch(x=N.width(),_=N.height(),R=L.pointerDirection(),I=L.pointerWidth(),j=L.pointerHeight(),U=0,W=0,R){case g:U=x/2,W=-1*j;break;case v:U=x+I,W=_/2;break;case k:U=x/2,W=_+j;break;case T:U=-1*I,W=_/2;break}L.setAttrs({x:-1*U,y:-1*W,width:x,height:_}),N.setAttrs({x:-1*U,y:-1*W})}}};ea.Label=S,S.prototype.className="Label",(0,d._registerNode)(S);class C extends n.Shape{_sceneFunc(N){const L=this.width(),x=this.height(),_=this.pointerDirection(),R=this.pointerWidth(),I=this.pointerHeight(),U=this.cornerRadius();let W=0,j=0,F=0,G=0;typeof U=="number"?W=j=F=G=Math.min(U,L/2,x/2):(W=Math.min(U[0]||0,L/2,x/2),j=Math.min(U[1]||0,L/2,x/2),G=Math.min(U[2]||0,L/2,x/2),F=Math.min(U[3]||0,L/2,x/2)),N.beginPath(),N.moveTo(W,0),_===g&&(N.lineTo((L-R)/2,0),N.lineTo(L/2,-1*I),N.lineTo((L+R)/2,0)),N.lineTo(L-j,0),N.arc(L-j,j,j,Math.PI*3/2,0,!1),_===v&&(N.lineTo(L,(x-I)/2),N.lineTo(L+R,x/2),N.lineTo(L,(x+I)/2)),N.lineTo(L,x-G),N.arc(L-G,x-G,G,0,Math.PI/2,!1),_===k&&(N.lineTo((L+R)/2,x),N.lineTo(L/2,x+I),N.lineTo((L-R)/2,x)),N.lineTo(F,x),N.arc(F,x-F,F,Math.PI/2,Math.PI,!1),_===T&&(N.lineTo(0,(x+I)/2),N.lineTo(-1*R,x/2),N.lineTo(0,(x-I)/2)),N.lineTo(0,W),N.arc(W,W,W,Math.PI,Math.PI*3/2,!1),N.closePath(),N.fillStrokeShape(this)}getSelfRect(){let N=0,L=0,x=this.pointerWidth(),_=this.pointerHeight(),R=this.pointerDirection(),I=this.width(),U=this.height();return R===g?(L-=_,U+=_):R===k?U+=_:R===T?(N-=x*1.5,I+=x):R===v&&(I+=x*1.5),{x:N,y:L,width:I,height:U}}}return ea.Tag=C,C.prototype.className="Tag",(0,d._registerNode)(C),o.Factory.addGetterSetter(C,"pointerDirection",p),o.Factory.addGetterSetter(C,"pointerWidth",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(C,"pointerHeight",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(C,"cornerRadius",0,(0,l.getNumberOrArrayOfNumbersValidator)(4)),ea}var Uu={},Lp;function Cm(){if(Lp)return Uu;Lp=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.Rect=void 0;const o=tt(),n=Tn(),s=Qe(),l=Ht(),d=rt();class c extends n.Shape{_sceneFunc(p){const g=this.cornerRadius(),v=this.width(),k=this.height();p.beginPath(),g?l.Util.drawRoundedRectPath(p,v,k,g):p.rect(0,0,v,k),p.closePath(),p.fillStrokeShape(this)}}return Uu.Rect=c,c.prototype.className="Rect",(0,s._registerNode)(c),o.Factory.addGetterSetter(c,"cornerRadius",0,(0,d.getNumberOrArrayOfNumbersValidator)(4)),Uu}var zu={},jp;function i2(){if(jp)return zu;jp=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.RegularPolygon=void 0;const o=tt(),n=Tn(),s=rt(),l=Qe();let d=class extends n.Shape{_sceneFunc(u){const p=this._getPoints();u.beginPath(),u.moveTo(p[0].x,p[0].y);for(let g=1;g<p.length;g++)u.lineTo(p[g].x,p[g].y);u.closePath(),u.fillStrokeShape(this)}_getPoints(){const u=this.attrs.sides,p=this.attrs.radius||0,g=[];for(let v=0;v<u;v++)g.push({x:p*Math.sin(v*2*Math.PI/u),y:-1*p*Math.cos(v*2*Math.PI/u)});return g}getSelfRect(){const u=this._getPoints();let p=u[0].x,g=u[0].y,v=u[0].x,k=u[0].y;return u.forEach(T=>{p=Math.min(p,T.x),g=Math.max(g,T.x),v=Math.min(v,T.y),k=Math.max(k,T.y)}),{x:p,y:v,width:g-p,height:k-v}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(u){this.radius(u/2)}setHeight(u){this.radius(u/2)}};return zu.RegularPolygon=d,d.prototype.className="RegularPolygon",d.prototype._centroid=!0,d.prototype._attrsAffectingSize=["radius"],(0,l._registerNode)(d),o.Factory.addGetterSetter(d,"radius",0,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(d,"sides",0,(0,s.getNumberValidator)()),zu}var Bu={},Fp;function s2(){if(Fp)return Bu;Fp=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.Ring=void 0;const o=tt(),n=Tn(),s=rt(),l=Qe(),d=Math.PI*2;let c=class extends n.Shape{_sceneFunc(p){p.beginPath(),p.arc(0,0,this.innerRadius(),0,d,!1),p.moveTo(this.outerRadius(),0),p.arc(0,0,this.outerRadius(),d,0,!0),p.closePath(),p.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(p){this.outerRadius(p/2)}setHeight(p){this.outerRadius(p/2)}};return Bu.Ring=c,c.prototype.className="Ring",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,l._registerNode)(c),o.Factory.addGetterSetter(c,"innerRadius",0,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(c,"outerRadius",0,(0,s.getNumberValidator)()),Bu}var Gu={},Dp;function o2(){if(Dp)return Gu;Dp=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.Sprite=void 0;const o=tt(),n=Tn(),s=qf(),l=rt(),d=Qe();let c=class extends n.Shape{constructor(p){super(p),this._updated=!0,this.anim=new s.Animation(()=>{const g=this._updated;return this._updated=!1,g}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(p){const g=this.animation(),v=this.frameIndex(),k=v*4,T=this.animations()[g],E=this.frameOffsets(),S=T[k+0],C=T[k+1],b=T[k+2],N=T[k+3],L=this.image();if((this.hasFill()||this.hasStroke())&&(p.beginPath(),p.rect(0,0,b,N),p.closePath(),p.fillStrokeShape(this)),L)if(E){const x=E[g],_=v*2;p.drawImage(L,S,C,b,N,x[_+0],x[_+1],b,N)}else p.drawImage(L,S,C,b,N,0,0,b,N)}_hitFunc(p){const g=this.animation(),v=this.frameIndex(),k=v*4,T=this.animations()[g],E=this.frameOffsets(),S=T[k+2],C=T[k+3];if(p.beginPath(),E){const b=E[g],N=v*2;p.rect(b[N+0],b[N+1],S,C)}else p.rect(0,0,S,C);p.closePath(),p.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const p=this;this.interval=setInterval(function(){p._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const p=this.getLayer();this.anim.setLayers(p),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const p=this.frameIndex(),g=this.animation(),v=this.animations(),k=v[g],T=k.length/4;p<T-1?this.frameIndex(p+1):this.frameIndex(0)}};return Gu.Sprite=c,c.prototype.className="Sprite",(0,d._registerNode)(c),o.Factory.addGetterSetter(c,"animation"),o.Factory.addGetterSetter(c,"animations"),o.Factory.addGetterSetter(c,"frameOffsets"),o.Factory.addGetterSetter(c,"image"),o.Factory.addGetterSetter(c,"frameIndex",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(c,"frameRate",17,(0,l.getNumberValidator)()),o.Factory.backCompat(c,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Gu}var qu={},Mp;function a2(){if(Mp)return qu;Mp=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.Star=void 0;const o=tt(),n=Tn(),s=rt(),l=Qe();let d=class extends n.Shape{_sceneFunc(u){const p=this.innerRadius(),g=this.outerRadius(),v=this.numPoints();u.beginPath(),u.moveTo(0,0-g);for(let k=1;k<v*2;k++){const T=k%2===0?g:p,E=T*Math.sin(k*Math.PI/v),S=-1*T*Math.cos(k*Math.PI/v);u.lineTo(E,S)}u.closePath(),u.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(u){this.outerRadius(u/2)}setHeight(u){this.outerRadius(u/2)}};return qu.Star=d,d.prototype.className="Star",d.prototype._centroid=!0,d.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,l._registerNode)(d),o.Factory.addGetterSetter(d,"numPoints",5,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(d,"innerRadius",0,(0,s.getNumberValidator)()),o.Factory.addGetterSetter(d,"outerRadius",0,(0,s.getNumberValidator)()),qu}var gl={},Up;function xm(){if(Up)return gl;Up=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.Text=void 0,gl.stringToArray=u;const o=Ht(),n=tt(),s=Tn(),l=Qe(),d=rt(),c=Qe();function u(X){return[...X].reduce((ee,ce,me,ae)=>{if(new RegExp("\\p{Emoji}","u").test(ce)){const Q=ae[me+1];Q&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(Q)?(ee.push(ce+Q),ae[me+1]=""):ee.push(ce)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(ce+(ae[me+1]||""))?ee.push(ce+ae[me+1]):me>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(ce)?ee[ee.length-1]+=ce:ce&&ee.push(ce);return ee},[])}const p="auto",g="center",v="inherit",k="justify",T="Change.konva",E="2d",S="-",C="left",b="text",N="Text",L="top",x="bottom",_="middle",R="normal",I="px ",U=" ",W="right",j="rtl",F="word",G="char",B="none",K="",$=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],J=$.length;function Y(X){return X.split(",").map(ee=>{ee=ee.trim();const ce=ee.indexOf(" ")>=0,me=ee.indexOf('"')>=0||ee.indexOf("'")>=0;return ce&&!me&&(ee=`"${ee}"`),ee}).join(", ")}let oe;function A(){return oe||(oe=o.Util.createCanvasElement().getContext(E),oe)}function D(X){X.fillText(this._partialText,this._partialTextX,this._partialTextY)}function V(X){X.setAttr("miterLimit",2),X.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function q(X){return X=X||{},!X.fillLinearGradientColorStops&&!X.fillRadialGradientColorStops&&!X.fillPatternImage&&(X.fill=X.fill||"black"),X}let M=class extends s.Shape{constructor(ee){super(q(ee)),this._partialTextX=0,this._partialTextY=0;for(let ce=0;ce<J;ce++)this.on($[ce]+T,this._setTextData);this._setTextData()}_sceneFunc(ee){const ce=this.textArr,me=ce.length;if(!this.text())return;let ae=this.padding(),Q=this.fontSize(),ie=this.lineHeight()*Q,ve=this.verticalAlign(),Se=this.direction(),xe=0,ze=this.align(),De=this.getWidth(),it=this.letterSpacing(),Ve=this.fill(),Dt=this.textDecoration(),ot=Dt.indexOf("underline")!==-1,Et=Dt.indexOf("line-through")!==-1,Ir;Se=Se===v?ee.direction:Se;let Ot=ie/2,cr=_;if(l.Konva._fixTextRendering){const dt=this.measureSize("M");cr="alphabetic",Ot=(dt.fontBoundingBoxAscent-dt.fontBoundingBoxDescent)/2+ie/2}for(Se===j&&ee.setAttr("direction",Se),ee.setAttr("font",this._getContextFont()),ee.setAttr("textBaseline",cr),ee.setAttr("textAlign",C),ve===_?xe=(this.getHeight()-me*ie-ae*2)/2:ve===x&&(xe=this.getHeight()-me*ie-ae*2),ee.translate(ae,xe+ae),Ir=0;Ir<me;Ir++){let dt=0,Un=0;const ln=ce[Ir],Lr=ln.text,un=ln.width,dr=ln.lastInParagraph;if(ee.save(),ze===W?dt+=De-un-ae*2:ze===g&&(dt+=(De-un-ae*2)/2),ot){ee.save(),ee.beginPath();const yn=l.Konva._fixTextRendering?Math.round(Q/4):Math.round(Q/2),Kn=dt,Mt=Ot+Un+yn;ee.moveTo(Kn,Mt);const Ut=ze===k&&!dr?De-ae*2:un;ee.lineTo(Kn+Math.round(Ut),Mt),ee.lineWidth=Q/15;const Mi=this._getLinearGradient();ee.strokeStyle=Mi||Ve,ee.stroke(),ee.restore()}if(Et){ee.save(),ee.beginPath();const yn=l.Konva._fixTextRendering?-Math.round(Q/4):0;ee.moveTo(dt,Ot+Un+yn);const Kn=ze===k&&!dr?De-ae*2:un;ee.lineTo(dt+Math.round(Kn),Ot+Un+yn),ee.lineWidth=Q/15;const Mt=this._getLinearGradient();ee.strokeStyle=Mt||Ve,ee.stroke(),ee.restore()}if(Se!==j&&(it!==0||ze===k)){const yn=Lr.split(" ").length-1,Kn=u(Lr);for(let Mt=0;Mt<Kn.length;Mt++){const Ut=Kn[Mt];Ut===" "&&!dr&&ze===k&&(dt+=(De-ae*2-un)/yn),this._partialTextX=dt,this._partialTextY=Ot+Un,this._partialText=Ut,ee.fillStrokeShape(this),dt+=this.measureSize(Ut).width+it}}else it!==0&&ee.setAttr("letterSpacing",`${it}px`),this._partialTextX=dt,this._partialTextY=Ot+Un,this._partialText=Lr,ee.fillStrokeShape(this);ee.restore(),me>1&&(Ot+=ie)}}_hitFunc(ee){const ce=this.getWidth(),me=this.getHeight();ee.beginPath(),ee.rect(0,0,ce,me),ee.closePath(),ee.fillStrokeShape(this)}setText(ee){const ce=o.Util._isString(ee)?ee:ee==null?"":ee+"";return this._setAttr(b,ce),this}getWidth(){return this.attrs.width===p||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===p||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(ee){var ce,me,ae,Q,ie,ve,Se,xe,ze,De,it;let Ve=A(),Dt=this.fontSize(),ot;Ve.save(),Ve.font=this._getContextFont(),ot=Ve.measureText(ee),Ve.restore();const Et=Dt/100;return{actualBoundingBoxAscent:(ce=ot.actualBoundingBoxAscent)!==null&&ce!==void 0?ce:71.58203125*Et,actualBoundingBoxDescent:(me=ot.actualBoundingBoxDescent)!==null&&me!==void 0?me:0,actualBoundingBoxLeft:(ae=ot.actualBoundingBoxLeft)!==null&&ae!==void 0?ae:-7.421875*Et,actualBoundingBoxRight:(Q=ot.actualBoundingBoxRight)!==null&&Q!==void 0?Q:75.732421875*Et,alphabeticBaseline:(ie=ot.alphabeticBaseline)!==null&&ie!==void 0?ie:0,emHeightAscent:(ve=ot.emHeightAscent)!==null&&ve!==void 0?ve:100*Et,emHeightDescent:(Se=ot.emHeightDescent)!==null&&Se!==void 0?Se:-20*Et,fontBoundingBoxAscent:(xe=ot.fontBoundingBoxAscent)!==null&&xe!==void 0?xe:91*Et,fontBoundingBoxDescent:(ze=ot.fontBoundingBoxDescent)!==null&&ze!==void 0?ze:21*Et,hangingBaseline:(De=ot.hangingBaseline)!==null&&De!==void 0?De:72.80000305175781*Et,ideographicBaseline:(it=ot.ideographicBaseline)!==null&&it!==void 0?it:-21*Et,width:ot.width,height:Dt}}_getContextFont(){return this.fontStyle()+U+this.fontVariant()+U+(this.fontSize()+I)+Y(this.fontFamily())}_addTextLine(ee){this.align()===k&&(ee=ee.trim());const me=this._getTextWidth(ee);return this.textArr.push({text:ee,width:me,lastInParagraph:!1})}_getTextWidth(ee){const ce=this.letterSpacing(),me=ee.length;return A().measureText(ee).width+ce*me}_setTextData(){let ee=this.text().split(`
`),ce=+this.fontSize(),me=0,ae=this.lineHeight()*ce,Q=this.attrs.width,ie=this.attrs.height,ve=Q!==p&&Q!==void 0,Se=ie!==p&&ie!==void 0,xe=this.padding(),ze=Q-xe*2,De=ie-xe*2,it=0,Ve=this.wrap(),Dt=Ve!==B,ot=Ve!==G&&Dt,Et=this.ellipsis();this.textArr=[],A().font=this._getContextFont();const Ir=Et?this._getTextWidth(K):0;for(let Ot=0,cr=ee.length;Ot<cr;++Ot){let dt=ee[Ot],Un=this._getTextWidth(dt);if(ve&&Un>ze)for(;dt.length>0;){let ln=0,Lr=u(dt).length,un="",dr=0;for(;ln<Lr;){const yn=ln+Lr>>>1,Kn=u(dt),Mt=Kn.slice(0,yn+1).join(""),Ut=this._getTextWidth(Mt);(Et&&Se&&it+ae>De?Ut+Ir:Ut)<=ze?(ln=yn+1,un=Mt,dr=Ut):Lr=yn}if(un){if(ot){const Mt=u(dt),Ut=u(un),Mi=Mt[Ut.length],vo=Mi===U||Mi===S;let Ui;if(vo&&dr<=ze)Ui=Ut.length;else{const Cl=Ut.lastIndexOf(U),yo=Ut.lastIndexOf(S);Ui=Math.max(Cl,yo)+1}Ui>0&&(ln=Ui,un=Mt.slice(0,ln).join(""),dr=this._getTextWidth(un))}if(un=un.trimRight(),this._addTextLine(un),me=Math.max(me,dr),it+=ae,this._shouldHandleEllipsis(it)){this._tryToAddEllipsisToLastLine();break}if(dt=u(dt).slice(ln).join("").trimLeft(),dt.length>0&&(Un=this._getTextWidth(dt),Un<=ze)){this._addTextLine(dt),it+=ae,me=Math.max(me,Un);break}}else break}else this._addTextLine(dt),it+=ae,me=Math.max(me,Un),this._shouldHandleEllipsis(it)&&Ot<cr-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Se&&it+ae>De)break}this.textHeight=ce,this.textWidth=me}_shouldHandleEllipsis(ee){const ce=+this.fontSize(),me=this.lineHeight()*ce,ae=this.attrs.height,Q=ae!==p&&ae!==void 0,ie=this.padding(),ve=ae-ie*2;return!(this.wrap()!==B)||Q&&ee+me>ve}_tryToAddEllipsisToLastLine(){const ee=this.attrs.width,ce=ee!==p&&ee!==void 0,me=this.padding(),ae=ee-me*2,Q=this.ellipsis(),ie=this.textArr[this.textArr.length-1];!ie||!Q||(ce&&(this._getTextWidth(ie.text+K)<ae||(ie.text=ie.text.slice(0,ie.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ie.text+K))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const ee=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,ce=this.hasShadow();return ee&&ce?!0:super._useBufferCanvas()}};return gl.Text=M,M.prototype._fillFunc=D,M.prototype._strokeFunc=V,M.prototype.className=N,M.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,c._registerNode)(M),n.Factory.overWriteSetter(M,"width",(0,d.getNumberOrAutoValidator)()),n.Factory.overWriteSetter(M,"height",(0,d.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(M,"direction",v),n.Factory.addGetterSetter(M,"fontFamily","Arial"),n.Factory.addGetterSetter(M,"fontSize",12,(0,d.getNumberValidator)()),n.Factory.addGetterSetter(M,"fontStyle",R),n.Factory.addGetterSetter(M,"fontVariant",R),n.Factory.addGetterSetter(M,"padding",0,(0,d.getNumberValidator)()),n.Factory.addGetterSetter(M,"align",C),n.Factory.addGetterSetter(M,"verticalAlign",L),n.Factory.addGetterSetter(M,"lineHeight",1,(0,d.getNumberValidator)()),n.Factory.addGetterSetter(M,"wrap",F),n.Factory.addGetterSetter(M,"ellipsis",!1,(0,d.getBooleanValidator)()),n.Factory.addGetterSetter(M,"letterSpacing",0,(0,d.getNumberValidator)()),n.Factory.addGetterSetter(M,"text","",(0,d.getStringValidator)()),n.Factory.addGetterSetter(M,"textDecoration",""),gl}var Vu={},zp;function l2(){if(zp)return Vu;zp=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.TextPath=void 0;const o=Ht(),n=tt(),s=Tn(),l=Vf(),d=xm(),c=rt(),u=Qe(),p="",g="normal";function v(E){E.fillText(this.partialText,0,0)}function k(E){E.strokeText(this.partialText,0,0)}let T=class extends s.Shape{constructor(S){super(S),this.dummyCanvas=o.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return l.Path.getPathLength(this.dataArray)}_getPointAtLength(S){if(!this.attrs.data)return null;const C=this.pathLength;return S-1>C?null:l.Path.getPointAtLengthOfDataArray(S,this.dataArray)}_readDataAttribute(){this.dataArray=l.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(S){S.setAttr("font",this._getContextFont()),S.setAttr("textBaseline",this.textBaseline()),S.setAttr("textAlign","left"),S.save();const C=this.textDecoration(),b=this.fill(),N=this.fontSize(),L=this.glyphInfo;C==="underline"&&S.beginPath();for(let x=0;x<L.length;x++){S.save();const _=L[x].p0;S.translate(_.x,_.y),S.rotate(L[x].rotation),this.partialText=L[x].text,S.fillStrokeShape(this),C==="underline"&&(x===0&&S.moveTo(0,N/2+1),S.lineTo(N,N/2+1)),S.restore()}C==="underline"&&(S.strokeStyle=b,S.lineWidth=N/20,S.stroke()),S.restore()}_hitFunc(S){S.beginPath();const C=this.glyphInfo;if(C.length>=1){const b=C[0].p0;S.moveTo(b.x,b.y)}for(let b=0;b<C.length;b++){const N=C[b].p1;S.lineTo(N.x,N.y)}S.setAttr("lineWidth",this.fontSize()),S.setAttr("strokeStyle",this.colorKey),S.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(S){return d.Text.prototype.setText.call(this,S)}_getContextFont(){return d.Text.prototype._getContextFont.call(this)}_getTextSize(S){const b=this.dummyCanvas.getContext("2d");b.save(),b.font=this._getContextFont();const N=b.measureText(S);return b.restore(),{width:N.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:S,height:C}=this._getTextSize(this.attrs.text);if(this.textWidth=S,this.textHeight=C,this.glyphInfo=[],!this.attrs.data)return null;const b=this.letterSpacing(),N=this.align(),L=this.kerningFunc(),x=Math.max(this.textWidth+((this.attrs.text||"").length-1)*b,0);let _=0;N==="center"&&(_=Math.max(0,this.pathLength/2-x/2)),N==="right"&&(_=Math.max(0,this.pathLength-x));const R=(0,d.stringToArray)(this.text());let I=_;for(let U=0;U<R.length;U++){const W=this._getPointAtLength(I);if(!W)return;let j=this._getTextSize(R[U]).width+b;if(R[U]===" "&&N==="justify"){const J=this.text().split(" ").length-1;j+=(this.pathLength-x)/J}const F=this._getPointAtLength(I+j);if(!F)return;const G=l.Path.getLineLength(W.x,W.y,F.x,F.y);let B=0;if(L)try{B=L(R[U-1],R[U])*this.fontSize()}catch{B=0}W.x+=B,F.x+=B,this.textWidth+=B;const K=l.Path.getPointOnLine(B+G/2,W.x,W.y,F.x,F.y),$=Math.atan2(F.y-W.y,F.x-W.x);this.glyphInfo.push({transposeX:K.x,transposeY:K.y,text:R[U],rotation:$,p0:W,p1:F}),I+=j}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const S=[];this.glyphInfo.forEach(function(I){S.push(I.p0.x),S.push(I.p0.y),S.push(I.p1.x),S.push(I.p1.y)});let C=S[0]||0,b=S[0]||0,N=S[1]||0,L=S[1]||0,x,_;for(let I=0;I<S.length/2;I++)x=S[I*2],_=S[I*2+1],C=Math.min(C,x),b=Math.max(b,x),N=Math.min(N,_),L=Math.max(L,_);const R=this.fontSize();return{x:C-R/2,y:N-R/2,width:b-C+R,height:L-N+R}}destroy(){return o.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Vu.TextPath=T,T.prototype._fillFunc=v,T.prototype._strokeFunc=k,T.prototype._fillFuncHit=v,T.prototype._strokeFuncHit=k,T.prototype.className="TextPath",T.prototype._attrsAffectingSize=["text","fontSize","data"],(0,u._registerNode)(T),n.Factory.addGetterSetter(T,"data"),n.Factory.addGetterSetter(T,"fontFamily","Arial"),n.Factory.addGetterSetter(T,"fontSize",12,(0,c.getNumberValidator)()),n.Factory.addGetterSetter(T,"fontStyle",g),n.Factory.addGetterSetter(T,"align","left"),n.Factory.addGetterSetter(T,"letterSpacing",0,(0,c.getNumberValidator)()),n.Factory.addGetterSetter(T,"textBaseline","middle"),n.Factory.addGetterSetter(T,"fontVariant",g),n.Factory.addGetterSetter(T,"text",p),n.Factory.addGetterSetter(T,"textDecoration",""),n.Factory.addGetterSetter(T,"kerningFunc",void 0),Vu}var Hu={},Bp;function u2(){if(Bp)return Hu;Bp=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.Transformer=void 0;const o=Ht(),n=tt(),s=Zt(),l=Tn(),d=Cm(),c=Gf(),u=Qe(),p=rt(),g=Qe(),v="tr-konva",k=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(j=>j+`.${v}`).join(" "),T="nodesRect",E=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],S={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},C="ontouchstart"in u.Konva._global;function b(j,F,G){if(j==="rotater")return G;F+=o.Util.degToRad(S[j]||0);const B=(o.Util.radToDeg(F)%360+360)%360;return o.Util._inRange(B,315+22.5,360)||o.Util._inRange(B,0,22.5)?"ns-resize":o.Util._inRange(B,45-22.5,45+22.5)?"nesw-resize":o.Util._inRange(B,90-22.5,90+22.5)?"ew-resize":o.Util._inRange(B,135-22.5,135+22.5)?"nwse-resize":o.Util._inRange(B,180-22.5,180+22.5)?"ns-resize":o.Util._inRange(B,225-22.5,225+22.5)?"nesw-resize":o.Util._inRange(B,270-22.5,270+22.5)?"ew-resize":o.Util._inRange(B,315-22.5,315+22.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+B),"pointer")}const N=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function L(j){return{x:j.x+j.width/2*Math.cos(j.rotation)+j.height/2*Math.sin(-j.rotation),y:j.y+j.height/2*Math.cos(j.rotation)+j.width/2*Math.sin(j.rotation)}}function x(j,F,G){const B=G.x+(j.x-G.x)*Math.cos(F)-(j.y-G.y)*Math.sin(F),K=G.y+(j.x-G.x)*Math.sin(F)+(j.y-G.y)*Math.cos(F);return{...j,rotation:j.rotation+F,x:B,y:K}}function _(j,F){const G=L(j);return x(j,F,G)}function R(j,F,G){let B=F;for(let K=0;K<j.length;K++){const $=u.Konva.getAngle(j[K]),J=Math.abs($-F)%(Math.PI*2);Math.min(J,Math.PI*2-J)<G&&(B=$)}return B}let I=0,U=class extends c.Group{constructor(F){super(F),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(k,this.update),this.getNode()&&this.update()}attachTo(F){return this.setNode(F),this}setNode(F){return o.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([F])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return v+this._id}setNodes(F=[]){this._nodes&&this._nodes.length&&this.detach();const G=F.filter(K=>K.isAncestorOf(this)?(o.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=F=G,F.length===1&&this.useSingleNodeRotation()?this.rotation(F[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(K=>{const $=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(K._attrsAffectingSize.length){const J=K._attrsAffectingSize.map(Y=>Y+"Change."+this._getEventNamespace()).join(" ");K.on(J,$)}K.on(E.map(J=>J+`.${this._getEventNamespace()}`).join(" "),$),K.on(`absoluteTransformChange.${this._getEventNamespace()}`,$),this._proxyDrag(K)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(F){let G;F.on(`dragstart.${this._getEventNamespace()}`,B=>{G=F.getAbsolutePosition(),!this.isDragging()&&F!==this.findOne(".back")&&this.startDrag(B,!1)}),F.on(`dragmove.${this._getEventNamespace()}`,B=>{if(!G)return;const K=F.getAbsolutePosition(),$=K.x-G.x,J=K.y-G.y;this.nodes().forEach(Y=>{if(Y===F||Y.isDragging())return;const oe=Y.getAbsolutePosition();Y.setAbsolutePosition({x:oe.x+$,y:oe.y+J}),Y.startDrag(B)}),G=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(F=>{F.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(T),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(T,this.__getNodeRect)}__getNodeShape(F,G=this.rotation(),B){const K=F.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),$=F.getAbsoluteScale(B),J=F.getAbsolutePosition(B),Y=K.x*$.x-F.offsetX()*$.x,oe=K.y*$.y-F.offsetY()*$.y,A=(u.Konva.getAngle(F.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),D={x:J.x+Y*Math.cos(A)+oe*Math.sin(-A),y:J.y+oe*Math.cos(A)+Y*Math.sin(A),width:K.width*$.x,height:K.height*$.y,rotation:A};return x(D,-u.Konva.getAngle(G),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const G=[];this.nodes().map(A=>{const D=A.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),V=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}],q=A.getAbsoluteTransform();V.forEach(function(M){const X=q.point(M);G.push(X)})});const B=new o.Transform;B.rotate(-u.Konva.getAngle(this.rotation()));let K=1/0,$=1/0,J=-1/0,Y=-1/0;G.forEach(function(A){const D=B.point(A);K===void 0&&(K=J=D.x,$=Y=D.y),K=Math.min(K,D.x),$=Math.min($,D.y),J=Math.max(J,D.x),Y=Math.max(Y,D.y)}),B.invert();const oe=B.point({x:K,y:$});return{x:oe.x,y:oe.y,width:J-K,height:Y-$,rotation:u.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),N.forEach(F=>{this._createAnchor(F)}),this._createAnchor("rotater")}_createAnchor(F){const G=new d.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:F+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:C?10:"auto"}),B=this;G.on("mousedown touchstart",function(K){B._handleMouseDown(K)}),G.on("dragstart",K=>{G.stopDrag(),K.cancelBubble=!0}),G.on("dragend",K=>{K.cancelBubble=!0}),G.on("mouseenter",()=>{const K=u.Konva.getAngle(this.rotation()),$=this.rotateAnchorCursor(),J=b(F,K,$);G.getStage().content&&(G.getStage().content.style.cursor=J),this._cursorChange=!0}),G.on("mouseout",()=>{G.getStage().content&&(G.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(G)}_createBack(){const F=new l.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(G,B){const K=B.getParent(),$=K.padding();G.beginPath(),G.rect(-$,-$,B.width()+$*2,B.height()+$*2),G.moveTo(B.width()/2,-$),K.rotateEnabled()&&K.rotateLineVisible()&&G.lineTo(B.width()/2,-K.rotateAnchorOffset()*o.Util._sign(B.height())-$),G.fillStrokeShape(B)},hitFunc:(G,B)=>{if(!this.shouldOverdrawWholeArea())return;const K=this.padding();G.beginPath(),G.rect(-K,-K,B.width()+K*2,B.height()+K*2),G.fillStrokeShape(B)}});this.add(F),this._proxyDrag(F),F.on("dragstart",G=>{G.cancelBubble=!0}),F.on("dragmove",G=>{G.cancelBubble=!0}),F.on("dragend",G=>{G.cancelBubble=!0}),this.on("dragmove",G=>{this.update()})}_handleMouseDown(F){if(this._transforming)return;this._movingAnchorName=F.target.name().split(" ")[0];const G=this._getNodeRect(),B=G.width,K=G.height,$=Math.sqrt(Math.pow(B,2)+Math.pow(K,2));this.sin=Math.abs(K/$),this.cos=Math.abs(B/$),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const J=F.target.getAbsolutePosition(),Y=F.target.getStage().getPointerPosition();this._anchorDragOffset={x:Y.x-J.x,y:Y.y-J.y},I++,this._fire("transformstart",{evt:F.evt,target:this.getNode()}),this._nodes.forEach(oe=>{oe._fire("transformstart",{evt:F.evt,target:oe})})}_handleMouseMove(F){let G,B,K;const $=this.findOne("."+this._movingAnchorName),J=$.getStage();J.setPointersPositions(F);const Y=J.getPointerPosition();let oe={x:Y.x-this._anchorDragOffset.x,y:Y.y-this._anchorDragOffset.y};const A=$.getAbsolutePosition();this.anchorDragBoundFunc()&&(oe=this.anchorDragBoundFunc()(A,oe,F)),$.setAbsolutePosition(oe);const D=$.getAbsolutePosition();if(A.x===D.x&&A.y===D.y)return;if(this._movingAnchorName==="rotater"){const ae=this._getNodeRect();G=$.x()-ae.width/2,B=-$.y()+ae.height/2;let Q=Math.atan2(-B,G)+Math.PI/2;ae.height<0&&(Q-=Math.PI);const ve=u.Konva.getAngle(this.rotation())+Q,Se=u.Konva.getAngle(this.rotationSnapTolerance()),ze=R(this.rotationSnaps(),ve,Se)-ae.rotation,De=_(ae,ze);this._fitNodesInto(De,F);return}const V=this.shiftBehavior();let q;V==="inverted"?q=this.keepRatio()&&!F.shiftKey:V==="none"?q=this.keepRatio():q=this.keepRatio()||F.shiftKey;let M=this.centeredScaling()||F.altKey;if(this._movingAnchorName==="top-left"){if(q){const ae=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};K=Math.sqrt(Math.pow(ae.x-$.x(),2)+Math.pow(ae.y-$.y(),2));const Q=this.findOne(".top-left").x()>ae.x?-1:1,ie=this.findOne(".top-left").y()>ae.y?-1:1;G=K*this.cos*Q,B=K*this.sin*ie,this.findOne(".top-left").x(ae.x-G),this.findOne(".top-left").y(ae.y-B)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y($.y());else if(this._movingAnchorName==="top-right"){if(q){const ae=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};K=Math.sqrt(Math.pow($.x()-ae.x,2)+Math.pow(ae.y-$.y(),2));const Q=this.findOne(".top-right").x()<ae.x?-1:1,ie=this.findOne(".top-right").y()>ae.y?-1:1;G=K*this.cos*Q,B=K*this.sin*ie,this.findOne(".top-right").x(ae.x+G),this.findOne(".top-right").y(ae.y-B)}var X=$.position();this.findOne(".top-left").y(X.y),this.findOne(".bottom-right").x(X.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x($.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x($.x());else if(this._movingAnchorName==="bottom-left"){if(q){const ae=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};K=Math.sqrt(Math.pow(ae.x-$.x(),2)+Math.pow($.y()-ae.y,2));const Q=ae.x<$.x()?-1:1,ie=$.y()<ae.y?-1:1;G=K*this.cos*Q,B=K*this.sin*ie,$.x(ae.x-G),$.y(ae.y+B)}X=$.position(),this.findOne(".top-left").x(X.x),this.findOne(".bottom-right").y(X.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y($.y());else if(this._movingAnchorName==="bottom-right"){if(q){const ae=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};K=Math.sqrt(Math.pow($.x()-ae.x,2)+Math.pow($.y()-ae.y,2));const Q=this.findOne(".bottom-right").x()<ae.x?-1:1,ie=this.findOne(".bottom-right").y()<ae.y?-1:1;G=K*this.cos*Q,B=K*this.sin*ie,this.findOne(".bottom-right").x(ae.x+G),this.findOne(".bottom-right").y(ae.y+B)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(M=this.centeredScaling()||F.altKey,M){const ae=this.findOne(".top-left"),Q=this.findOne(".bottom-right"),ie=ae.x(),ve=ae.y(),Se=this.getWidth()-Q.x(),xe=this.getHeight()-Q.y();Q.move({x:-ie,y:-ve}),ae.move({x:Se,y:xe})}const ee=this.findOne(".top-left").getAbsolutePosition();G=ee.x,B=ee.y;const ce=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),me=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:G,y:B,width:ce,height:me,rotation:u.Konva.getAngle(this.rotation())},F)}_handleMouseUp(F){this._removeEvents(F)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(F){var G;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const B=this.getNode();I--,this._fire("transformend",{evt:F,target:B}),(G=this.getLayer())===null||G===void 0||G.batchDraw(),B&&this._nodes.forEach(K=>{var $;K._fire("transformend",{evt:F,target:K}),($=K.getLayer())===null||$===void 0||$.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(F,G){const B=this._getNodeRect(),K=1;if(o.Util._inRange(F.width,-this.padding()*2-K,K)){this.update();return}if(o.Util._inRange(F.height,-this.padding()*2-K,K)){this.update();return}const $=new o.Transform;if($.rotate(u.Konva.getAngle(this.rotation())),this._movingAnchorName&&F.width<0&&this._movingAnchorName.indexOf("left")>=0){const q=$.point({x:-this.padding()*2,y:0});F.x+=q.x,F.y+=q.y,F.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y}else if(this._movingAnchorName&&F.width<0&&this._movingAnchorName.indexOf("right")>=0){const q=$.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,F.width+=this.padding()*2}if(this._movingAnchorName&&F.height<0&&this._movingAnchorName.indexOf("top")>=0){const q=$.point({x:0,y:-this.padding()*2});F.x+=q.x,F.y+=q.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,F.height+=this.padding()*2}else if(this._movingAnchorName&&F.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const q=$.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=q.x,this._anchorDragOffset.y-=q.y,F.height+=this.padding()*2}if(this.boundBoxFunc()){const q=this.boundBoxFunc()(B,F);q?F=q:o.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const J=1e7,Y=new o.Transform;Y.translate(B.x,B.y),Y.rotate(B.rotation),Y.scale(B.width/J,B.height/J);const oe=new o.Transform,A=F.width/J,D=F.height/J;this.flipEnabled()===!1?(oe.translate(F.x,F.y),oe.rotate(F.rotation),oe.translate(F.width<0?F.width:0,F.height<0?F.height:0),oe.scale(Math.abs(A),Math.abs(D))):(oe.translate(F.x,F.y),oe.rotate(F.rotation),oe.scale(A,D));const V=oe.multiply(Y.invert());this._nodes.forEach(q=>{var M;const X=q.getParent().getAbsoluteTransform(),ee=q.getTransform().copy();ee.translate(q.offsetX(),q.offsetY());const ce=new o.Transform;ce.multiply(X.copy().invert()).multiply(V).multiply(X).multiply(ee);const me=ce.decompose();q.setAttrs(me),(M=q.getLayer())===null||M===void 0||M.batchDraw()}),this.rotation(o.Util._getRotation(F.rotation)),this._nodes.forEach(q=>{this._fire("transform",{evt:G,target:q}),q._fire("transform",{evt:G,target:q})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(F,G){this.findOne(F).setAttrs(G)}update(){var F;const G=this._getNodeRect();this.rotation(o.Util._getRotation(G.rotation));const B=G.width,K=G.height,$=this.enabledAnchors(),J=this.resizeEnabled(),Y=this.padding(),oe=this.anchorSize(),A=this.find("._anchor");A.forEach(V=>{V.setAttrs({width:oe,height:oe,offsetX:oe/2,offsetY:oe/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:oe/2+Y,offsetY:oe/2+Y,visible:J&&$.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:B/2,y:0,offsetY:oe/2+Y,visible:J&&$.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:B,y:0,offsetX:oe/2-Y,offsetY:oe/2+Y,visible:J&&$.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:K/2,offsetX:oe/2+Y,visible:J&&$.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:B,y:K/2,offsetX:oe/2-Y,visible:J&&$.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:K,offsetX:oe/2+Y,offsetY:oe/2-Y,visible:J&&$.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:B/2,y:K,offsetY:oe/2-Y,visible:J&&$.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:B,y:K,offsetX:oe/2-Y,offsetY:oe/2-Y,visible:J&&$.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:B/2,y:-this.rotateAnchorOffset()*o.Util._sign(K)-Y,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:B,height:K,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const D=this.anchorStyleFunc();D&&A.forEach(V=>{D(V)}),(F=this.getLayer())===null||F===void 0||F.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const F=this.findOne("."+this._movingAnchorName);F&&F.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return s.Node.prototype.toObject.call(this)}clone(F){return s.Node.prototype.clone.call(this,F)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Hu.Transformer=U,U.isTransforming=()=>I>0;function W(j){return j instanceof Array||o.Util.warn("enabledAnchors value should be an array"),j instanceof Array&&j.forEach(function(F){N.indexOf(F)===-1&&o.Util.warn("Unknown anchor name: "+F+". Available names are: "+N.join(", "))}),j||[]}return U.prototype.className="Transformer",(0,g._registerNode)(U),n.Factory.addGetterSetter(U,"enabledAnchors",N,W),n.Factory.addGetterSetter(U,"flipEnabled",!0,(0,p.getBooleanValidator)()),n.Factory.addGetterSetter(U,"resizeEnabled",!0),n.Factory.addGetterSetter(U,"anchorSize",10,(0,p.getNumberValidator)()),n.Factory.addGetterSetter(U,"rotateEnabled",!0),n.Factory.addGetterSetter(U,"rotateLineVisible",!0),n.Factory.addGetterSetter(U,"rotationSnaps",[]),n.Factory.addGetterSetter(U,"rotateAnchorOffset",50,(0,p.getNumberValidator)()),n.Factory.addGetterSetter(U,"rotateAnchorCursor","crosshair"),n.Factory.addGetterSetter(U,"rotationSnapTolerance",5,(0,p.getNumberValidator)()),n.Factory.addGetterSetter(U,"borderEnabled",!0),n.Factory.addGetterSetter(U,"anchorStroke","rgb(0, 161, 255)"),n.Factory.addGetterSetter(U,"anchorStrokeWidth",1,(0,p.getNumberValidator)()),n.Factory.addGetterSetter(U,"anchorFill","white"),n.Factory.addGetterSetter(U,"anchorCornerRadius",0,(0,p.getNumberValidator)()),n.Factory.addGetterSetter(U,"borderStroke","rgb(0, 161, 255)"),n.Factory.addGetterSetter(U,"borderStrokeWidth",1,(0,p.getNumberValidator)()),n.Factory.addGetterSetter(U,"borderDash"),n.Factory.addGetterSetter(U,"keepRatio",!0),n.Factory.addGetterSetter(U,"shiftBehavior","default"),n.Factory.addGetterSetter(U,"centeredScaling",!1),n.Factory.addGetterSetter(U,"ignoreStroke",!1),n.Factory.addGetterSetter(U,"padding",0,(0,p.getNumberValidator)()),n.Factory.addGetterSetter(U,"nodes"),n.Factory.addGetterSetter(U,"node"),n.Factory.addGetterSetter(U,"boundBoxFunc"),n.Factory.addGetterSetter(U,"anchorDragBoundFunc"),n.Factory.addGetterSetter(U,"anchorStyleFunc"),n.Factory.addGetterSetter(U,"shouldOverdrawWholeArea",!1),n.Factory.addGetterSetter(U,"useSingleNodeRotation",!0),n.Factory.backCompat(U,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Hu}var Wu={},Gp;function c2(){if(Gp)return Wu;Gp=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.Wedge=void 0;const o=tt(),n=Tn(),s=Qe(),l=rt(),d=Qe();let c=class extends n.Shape{_sceneFunc(p){p.beginPath(),p.arc(0,0,this.radius(),0,s.Konva.getAngle(this.angle()),this.clockwise()),p.lineTo(0,0),p.closePath(),p.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(p){this.radius(p/2)}setHeight(p){this.radius(p/2)}};return Wu.Wedge=c,c.prototype.className="Wedge",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],(0,d._registerNode)(c),o.Factory.addGetterSetter(c,"radius",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(c,"angle",0,(0,l.getNumberValidator)()),o.Factory.addGetterSetter(c,"clockwise",!1),o.Factory.backCompat(c,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Wu}var $u={},qp;function d2(){if(qp)return $u;qp=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.Blur=void 0;const o=tt(),n=Zt(),s=rt();function l(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const d=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function u(g,v){const k=g.data,T=g.width,E=g.height;let S,C,b,N,L,x,_,R,I,U,W,j,F,G,B,K,$,J,Y,oe;const A=v+v+1,D=T-1,V=E-1,q=v+1,M=q*(q+1)/2,X=new l,ee=d[v],ce=c[v];let me=null,ae=X,Q=null,ie=null;for(let ve=1;ve<A;ve++)ae=ae.next=new l,ve===q&&(me=ae);ae.next=X,b=C=0;for(let ve=0;ve<E;ve++){j=F=G=B=N=L=x=_=0,R=q*(K=k[C]),I=q*($=k[C+1]),U=q*(J=k[C+2]),W=q*(Y=k[C+3]),N+=M*K,L+=M*$,x+=M*J,_+=M*Y,ae=X;for(let Se=0;Se<q;Se++)ae.r=K,ae.g=$,ae.b=J,ae.a=Y,ae=ae.next;for(let Se=1;Se<q;Se++)S=C+((D<Se?D:Se)<<2),N+=(ae.r=K=k[S])*(oe=q-Se),L+=(ae.g=$=k[S+1])*oe,x+=(ae.b=J=k[S+2])*oe,_+=(ae.a=Y=k[S+3])*oe,j+=K,F+=$,G+=J,B+=Y,ae=ae.next;Q=X,ie=me;for(let Se=0;Se<T;Se++)k[C+3]=Y=_*ee>>ce,Y!==0?(Y=255/Y,k[C]=(N*ee>>ce)*Y,k[C+1]=(L*ee>>ce)*Y,k[C+2]=(x*ee>>ce)*Y):k[C]=k[C+1]=k[C+2]=0,N-=R,L-=I,x-=U,_-=W,R-=Q.r,I-=Q.g,U-=Q.b,W-=Q.a,S=b+((S=Se+v+1)<D?S:D)<<2,j+=Q.r=k[S],F+=Q.g=k[S+1],G+=Q.b=k[S+2],B+=Q.a=k[S+3],N+=j,L+=F,x+=G,_+=B,Q=Q.next,R+=K=ie.r,I+=$=ie.g,U+=J=ie.b,W+=Y=ie.a,j-=K,F-=$,G-=J,B-=Y,ie=ie.next,C+=4;b+=T}for(let ve=0;ve<T;ve++){F=G=B=j=L=x=_=N=0,C=ve<<2,R=q*(K=k[C]),I=q*($=k[C+1]),U=q*(J=k[C+2]),W=q*(Y=k[C+3]),N+=M*K,L+=M*$,x+=M*J,_+=M*Y,ae=X;for(let xe=0;xe<q;xe++)ae.r=K,ae.g=$,ae.b=J,ae.a=Y,ae=ae.next;let Se=T;for(let xe=1;xe<=v;xe++)C=Se+ve<<2,N+=(ae.r=K=k[C])*(oe=q-xe),L+=(ae.g=$=k[C+1])*oe,x+=(ae.b=J=k[C+2])*oe,_+=(ae.a=Y=k[C+3])*oe,j+=K,F+=$,G+=J,B+=Y,ae=ae.next,xe<V&&(Se+=T);C=ve,Q=X,ie=me;for(let xe=0;xe<E;xe++)S=C<<2,k[S+3]=Y=_*ee>>ce,Y>0?(Y=255/Y,k[S]=(N*ee>>ce)*Y,k[S+1]=(L*ee>>ce)*Y,k[S+2]=(x*ee>>ce)*Y):k[S]=k[S+1]=k[S+2]=0,N-=R,L-=I,x-=U,_-=W,R-=Q.r,I-=Q.g,U-=Q.b,W-=Q.a,S=ve+((S=xe+q)<V?S:V)*T<<2,N+=j+=Q.r=k[S],L+=F+=Q.g=k[S+1],x+=G+=Q.b=k[S+2],_+=B+=Q.a=k[S+3],Q=Q.next,R+=K=ie.r,I+=$=ie.g,U+=J=ie.b,W+=Y=ie.a,j-=K,F-=$,G-=J,B-=Y,ie=ie.next,C+=T}}const p=function(v){const k=Math.round(this.blurRadius());k>0&&u(v,k)};return $u.Blur=p,o.Factory.addGetterSetter(n.Node,"blurRadius",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),$u}var Ku={},Vp;function h2(){if(Vp)return Ku;Vp=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.Brighten=void 0;const o=tt(),n=Zt(),s=rt(),l=function(d){const c=this.brightness()*255,u=d.data,p=u.length;for(let g=0;g<p;g+=4)u[g]+=c,u[g+1]+=c,u[g+2]+=c};return Ku.Brighten=l,o.Factory.addGetterSetter(n.Node,"brightness",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),Ku}var Yu={},Hp;function f2(){if(Hp)return Yu;Hp=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.Contrast=void 0;const o=tt(),n=Zt(),s=rt(),l=function(d){const c=Math.pow((this.contrast()+100)/100,2),u=d.data,p=u.length;let g=150,v=150,k=150;for(let T=0;T<p;T+=4)g=u[T],v=u[T+1],k=u[T+2],g/=255,g-=.5,g*=c,g+=.5,g*=255,v/=255,v-=.5,v*=c,v+=.5,v*=255,k/=255,k-=.5,k*=c,k+=.5,k*=255,g=g<0?0:g>255?255:g,v=v<0?0:v>255?255:v,k=k<0?0:k>255?255:k,u[T]=g,u[T+1]=v,u[T+2]=k};return Yu.Contrast=l,o.Factory.addGetterSetter(n.Node,"contrast",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),Yu}var Qu={},Wp;function p2(){if(Wp)return Qu;Wp=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.Emboss=void 0;const o=tt(),n=Zt(),s=Ht(),l=rt(),d=function(c){const u=this.embossStrength()*10,p=this.embossWhiteLevel()*255,g=this.embossDirection(),v=this.embossBlend(),k=c.data,T=c.width,E=c.height,S=T*4;let C=0,b=0,N=E;switch(g){case"top-left":C=-1,b=-1;break;case"top":C=-1,b=0;break;case"top-right":C=-1,b=1;break;case"right":C=0,b=1;break;case"bottom-right":C=1,b=1;break;case"bottom":C=1,b=0;break;case"bottom-left":C=1,b=-1;break;case"left":C=0,b=-1;break;default:s.Util.error("Unknown emboss direction: "+g)}do{const L=(N-1)*S;let x=C;N+x<1&&(x=0),N+x>E&&(x=0);const _=(N-1+x)*T*4;let R=T;do{const I=L+(R-1)*4;let U=b;R+U<1&&(U=0),R+U>T&&(U=0);const W=_+(R-1+U)*4,j=k[I]-k[W],F=k[I+1]-k[W+1],G=k[I+2]-k[W+2];let B=j;const K=B>0?B:-B,$=F>0?F:-F,J=G>0?G:-G;if($>K&&(B=F),J>K&&(B=G),B*=u,v){const Y=k[I]+B,oe=k[I+1]+B,A=k[I+2]+B;k[I]=Y>255?255:Y<0?0:Y,k[I+1]=oe>255?255:oe<0?0:oe,k[I+2]=A>255?255:A<0?0:A}else{let Y=p-B;Y<0?Y=0:Y>255&&(Y=255),k[I]=k[I+1]=k[I+2]=Y}}while(--R)}while(--N)};return Qu.Emboss=d,o.Factory.addGetterSetter(n.Node,"embossStrength",.5,(0,l.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"embossWhiteLevel",.5,(0,l.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"embossDirection","top-left",void 0,o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"embossBlend",!1,void 0,o.Factory.afterSetFilter),Qu}var Xu={},$p;function g2(){if($p)return Xu;$p=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.Enhance=void 0;const o=tt(),n=Zt(),s=rt();function l(c,u,p,g,v){const k=p-u,T=v-g;if(k===0)return g+T/2;if(T===0)return g;let E=(c-u)/k;return E=T*E+g,E}const d=function(c){const u=c.data,p=u.length;let g=u[0],v=g,k,T=u[1],E=T,S,C=u[2],b=C,N;const L=this.enhance();if(L===0)return;for(let j=0;j<p;j+=4)k=u[j+0],k<g?g=k:k>v&&(v=k),S=u[j+1],S<T?T=S:S>E&&(E=S),N=u[j+2],N<C?C=N:N>b&&(b=N);v===g&&(v=255,g=0),E===T&&(E=255,T=0),b===C&&(b=255,C=0);let x,_,R,I,U,W;if(L>0)x=v+L*(255-v),_=g-L*(g-0),R=E+L*(255-E),I=T-L*(T-0),U=b+L*(255-b),W=C-L*(C-0);else{const j=(v+g)*.5;x=v+L*(v-j),_=g+L*(g-j);const F=(E+T)*.5;R=E+L*(E-F),I=T+L*(T-F);const G=(b+C)*.5;U=b+L*(b-G),W=C+L*(C-G)}for(let j=0;j<p;j+=4)u[j+0]=l(u[j+0],g,v,_,x),u[j+1]=l(u[j+1],T,E,I,R),u[j+2]=l(u[j+2],C,b,W,U)};return Xu.Enhance=d,o.Factory.addGetterSetter(n.Node,"enhance",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),Xu}var Ju={},Kp;function m2(){if(Kp)return Ju;Kp=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.Grayscale=void 0;const o=function(n){const s=n.data,l=s.length;for(let d=0;d<l;d+=4){const c=.34*s[d]+.5*s[d+1]+.16*s[d+2];s[d]=c,s[d+1]=c,s[d+2]=c}};return Ju.Grayscale=o,Ju}var Zu={},Yp;function v2(){if(Yp)return Zu;Yp=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.HSL=void 0;const o=tt(),n=Zt(),s=rt();o.Factory.addGetterSetter(n.Node,"hue",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"saturation",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"luminance",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter);const l=function(d){const c=d.data,u=c.length,p=1,g=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,k=this.luminance()*127,T=p*g*Math.cos(v*Math.PI/180),E=p*g*Math.sin(v*Math.PI/180),S=.299*p+.701*T+.167*E,C=.587*p-.587*T+.33*E,b=.114*p-.114*T-.497*E,N=.299*p-.299*T-.328*E,L=.587*p+.413*T+.035*E,x=.114*p-.114*T+.293*E,_=.299*p-.3*T+1.25*E,R=.587*p-.586*T-1.05*E,I=.114*p+.886*T-.2*E;let U,W,j,F;for(let G=0;G<u;G+=4)U=c[G+0],W=c[G+1],j=c[G+2],F=c[G+3],c[G+0]=S*U+C*W+b*j+k,c[G+1]=N*U+L*W+x*j+k,c[G+2]=_*U+R*W+I*j+k,c[G+3]=F};return Zu.HSL=l,Zu}var ec={},Qp;function y2(){if(Qp)return ec;Qp=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.HSV=void 0;const o=tt(),n=Zt(),s=rt(),l=function(d){const c=d.data,u=c.length,p=Math.pow(2,this.value()),g=Math.pow(2,this.saturation()),v=Math.abs(this.hue()+360)%360,k=p*g*Math.cos(v*Math.PI/180),T=p*g*Math.sin(v*Math.PI/180),E=.299*p+.701*k+.167*T,S=.587*p-.587*k+.33*T,C=.114*p-.114*k-.497*T,b=.299*p-.299*k-.328*T,N=.587*p+.413*k+.035*T,L=.114*p-.114*k+.293*T,x=.299*p-.3*k+1.25*T,_=.587*p-.586*k-1.05*T,R=.114*p+.886*k-.2*T;for(let I=0;I<u;I+=4){const U=c[I+0],W=c[I+1],j=c[I+2],F=c[I+3];c[I+0]=E*U+S*W+C*j,c[I+1]=b*U+N*W+L*j,c[I+2]=x*U+_*W+R*j,c[I+3]=F}};return ec.HSV=l,o.Factory.addGetterSetter(n.Node,"hue",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"saturation",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"value",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),ec}var tc={},Xp;function _2(){if(Xp)return tc;Xp=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.Invert=void 0;const o=function(n){const s=n.data,l=s.length;for(let d=0;d<l;d+=4)s[d]=255-s[d],s[d+1]=255-s[d+1],s[d+2]=255-s[d+2]};return tc.Invert=o,tc}var nc={},Jp;function w2(){if(Jp)return nc;Jp=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.Kaleidoscope=void 0;const o=tt(),n=Zt(),s=Ht(),l=rt(),d=function(p,g,v){const k=p.data,T=g.data,E=p.width,S=p.height,C=v.polarCenterX||E/2,b=v.polarCenterY||S/2;let N=Math.sqrt(C*C+b*b),L=E-C,x=S-b;const _=Math.sqrt(L*L+x*x);N=_>N?_:N;const R=S,I=E,U=360/I*Math.PI/180;for(let W=0;W<I;W+=1){const j=Math.sin(W*U),F=Math.cos(W*U);for(let G=0;G<R;G+=1){L=Math.floor(C+N*G/R*F),x=Math.floor(b+N*G/R*j);let B=(x*E+L)*4;const K=k[B+0],$=k[B+1],J=k[B+2],Y=k[B+3];B=(W+G*E)*4,T[B+0]=K,T[B+1]=$,T[B+2]=J,T[B+3]=Y}}},c=function(p,g,v){const k=p.data,T=g.data,E=p.width,S=p.height,C=v.polarCenterX||E/2,b=v.polarCenterY||S/2;let N=Math.sqrt(C*C+b*b),L=E-C,x=S-b;const _=Math.sqrt(L*L+x*x);N=_>N?_:N;const R=S,I=E,U=0;let W,j;for(L=0;L<E;L+=1)for(x=0;x<S;x+=1){const F=L-C,G=x-b,B=Math.sqrt(F*F+G*G)*R/N;let K=(Math.atan2(G,F)*180/Math.PI+360+U)%360;K=K*I/360,W=Math.floor(K),j=Math.floor(B);let $=(j*E+W)*4;const J=k[$+0],Y=k[$+1],oe=k[$+2],A=k[$+3];$=(x*E+L)*4,T[$+0]=J,T[$+1]=Y,T[$+2]=oe,T[$+3]=A}},u=function(p){const g=p.width,v=p.height;let k,T,E,S,C,b,N,L,x,_,R=Math.round(this.kaleidoscopePower());const I=Math.round(this.kaleidoscopeAngle()),U=Math.floor(g*(I%360)/360);if(R<1)return;const W=s.Util.createCanvasElement();W.width=g,W.height=v;const j=W.getContext("2d").getImageData(0,0,g,v);s.Util.releaseCanvas(W),d(p,j,{polarCenterX:g/2,polarCenterY:v/2});let F=g/Math.pow(2,R);for(;F<=8;)F=F*2,R-=1;F=Math.ceil(F);let G=F,B=0,K=G,$=1;for(U+F>g&&(B=G,K=0,$=-1),T=0;T<v;T+=1)for(k=B;k!==K;k+=$)E=Math.round(k+U)%g,x=(g*T+E)*4,C=j.data[x+0],b=j.data[x+1],N=j.data[x+2],L=j.data[x+3],_=(g*T+k)*4,j.data[_+0]=C,j.data[_+1]=b,j.data[_+2]=N,j.data[_+3]=L;for(T=0;T<v;T+=1)for(G=Math.floor(F),S=0;S<R;S+=1){for(k=0;k<G+1;k+=1)x=(g*T+k)*4,C=j.data[x+0],b=j.data[x+1],N=j.data[x+2],L=j.data[x+3],_=(g*T+G*2-k-1)*4,j.data[_+0]=C,j.data[_+1]=b,j.data[_+2]=N,j.data[_+3]=L;G*=2}c(j,p,{})};return nc.Kaleidoscope=u,o.Factory.addGetterSetter(n.Node,"kaleidoscopePower",2,(0,l.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"kaleidoscopeAngle",0,(0,l.getNumberValidator)(),o.Factory.afterSetFilter),nc}var rc={},Zp;function S2(){if(Zp)return rc;Zp=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.Mask=void 0;const o=tt(),n=Zt(),s=rt();function l(E,S,C){let b=(C*E.width+S)*4;const N=[];return N.push(E.data[b++],E.data[b++],E.data[b++],E.data[b++]),N}function d(E,S){return Math.sqrt(Math.pow(E[0]-S[0],2)+Math.pow(E[1]-S[1],2)+Math.pow(E[2]-S[2],2))}function c(E){const S=[0,0,0];for(let C=0;C<E.length;C++)S[0]+=E[C][0],S[1]+=E[C][1],S[2]+=E[C][2];return S[0]/=E.length,S[1]/=E.length,S[2]/=E.length,S}function u(E,S){const C=l(E,0,0),b=l(E,E.width-1,0),N=l(E,0,E.height-1),L=l(E,E.width-1,E.height-1),x=S||10;if(d(C,b)<x&&d(b,L)<x&&d(L,N)<x&&d(N,C)<x){const _=c([b,C,L,N]),R=[];for(let I=0;I<E.width*E.height;I++){const U=d(_,[E.data[I*4],E.data[I*4+1],E.data[I*4+2]]);R[I]=U<x?0:255}return R}}function p(E,S){for(let C=0;C<E.width*E.height;C++)E.data[4*C+3]=S[C]}function g(E,S,C){const b=[1,1,1,1,0,1,1,1,1],N=Math.round(Math.sqrt(b.length)),L=Math.floor(N/2),x=[];for(let _=0;_<C;_++)for(let R=0;R<S;R++){const I=_*S+R;let U=0;for(let W=0;W<N;W++)for(let j=0;j<N;j++){const F=_+W-L,G=R+j-L;if(F>=0&&F<C&&G>=0&&G<S){const B=F*S+G,K=b[W*N+j];U+=E[B]*K}}x[I]=U===2040?255:0}return x}function v(E,S,C){const b=[1,1,1,1,1,1,1,1,1],N=Math.round(Math.sqrt(b.length)),L=Math.floor(N/2),x=[];for(let _=0;_<C;_++)for(let R=0;R<S;R++){const I=_*S+R;let U=0;for(let W=0;W<N;W++)for(let j=0;j<N;j++){const F=_+W-L,G=R+j-L;if(F>=0&&F<C&&G>=0&&G<S){const B=F*S+G,K=b[W*N+j];U+=E[B]*K}}x[I]=U>=1020?255:0}return x}function k(E,S,C){const b=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],N=Math.round(Math.sqrt(b.length)),L=Math.floor(N/2),x=[];for(let _=0;_<C;_++)for(let R=0;R<S;R++){const I=_*S+R;let U=0;for(let W=0;W<N;W++)for(let j=0;j<N;j++){const F=_+W-L,G=R+j-L;if(F>=0&&F<C&&G>=0&&G<S){const B=F*S+G,K=b[W*N+j];U+=E[B]*K}}x[I]=U}return x}const T=function(E){const S=this.threshold();let C=u(E,S);return C&&(C=g(C,E.width,E.height),C=v(C,E.width,E.height),C=k(C,E.width,E.height),p(E,C)),E};return rc.Mask=T,o.Factory.addGetterSetter(n.Node,"threshold",0,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),rc}var ic={},eg;function k2(){if(eg)return ic;eg=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.Noise=void 0;const o=tt(),n=Zt(),s=rt(),l=function(d){const c=this.noise()*255,u=d.data,p=u.length,g=c/2;for(let v=0;v<p;v+=4)u[v+0]+=g-2*g*Math.random(),u[v+1]+=g-2*g*Math.random(),u[v+2]+=g-2*g*Math.random()};return ic.Noise=l,o.Factory.addGetterSetter(n.Node,"noise",.2,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),ic}var sc={},tg;function E2(){if(tg)return sc;tg=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.Pixelate=void 0;const o=tt(),n=Ht(),s=Zt(),l=rt(),d=function(c){let u=Math.ceil(this.pixelSize()),p=c.width,g=c.height,v=Math.ceil(p/u),k=Math.ceil(g/u),T=c.data;if(u<=0){n.Util.error("pixelSize value can not be <= 0");return}for(let E=0;E<v;E+=1)for(let S=0;S<k;S+=1){let C=0,b=0,N=0,L=0;const x=E*u,_=x+u,R=S*u,I=R+u;let U=0;for(let W=x;W<_;W+=1)if(!(W>=p))for(let j=R;j<I;j+=1){if(j>=g)continue;const F=(p*j+W)*4;C+=T[F+0],b+=T[F+1],N+=T[F+2],L+=T[F+3],U+=1}C=C/U,b=b/U,N=N/U,L=L/U;for(let W=x;W<_;W+=1)if(!(W>=p))for(let j=R;j<I;j+=1){if(j>=g)continue;const F=(p*j+W)*4;T[F+0]=C,T[F+1]=b,T[F+2]=N,T[F+3]=L}}};return sc.Pixelate=d,o.Factory.addGetterSetter(s.Node,"pixelSize",8,(0,l.getNumberValidator)(),o.Factory.afterSetFilter),sc}var oc={},ng;function C2(){if(ng)return oc;ng=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.Posterize=void 0;const o=tt(),n=Zt(),s=rt(),l=function(d){const c=Math.round(this.levels()*254)+1,u=d.data,p=u.length,g=255/c;for(let v=0;v<p;v+=1)u[v]=Math.floor(u[v]/g)*g};return oc.Posterize=l,o.Factory.addGetterSetter(n.Node,"levels",.5,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),oc}var ac={},rg;function x2(){if(rg)return ac;rg=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.RGB=void 0;const o=tt(),n=Zt(),s=rt(),l=function(d){const c=d.data,u=c.length,p=this.red(),g=this.green(),v=this.blue();for(let k=0;k<u;k+=4){const T=(.34*c[k]+.5*c[k+1]+.16*c[k+2])/255;c[k]=T*p,c[k+1]=T*g,c[k+2]=T*v,c[k+3]=c[k+3]}};return ac.RGB=l,o.Factory.addGetterSetter(n.Node,"red",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)}),o.Factory.addGetterSetter(n.Node,"green",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)}),o.Factory.addGetterSetter(n.Node,"blue",0,s.RGBComponent,o.Factory.afterSetFilter),ac}var lc={},ig;function P2(){if(ig)return lc;ig=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.RGBA=void 0;const o=tt(),n=Zt(),s=rt(),l=function(d){const c=d.data,u=c.length,p=this.red(),g=this.green(),v=this.blue(),k=this.alpha();for(let T=0;T<u;T+=4){const E=1-k;c[T]=p*k+c[T]*E,c[T+1]=g*k+c[T+1]*E,c[T+2]=v*k+c[T+2]*E}};return lc.RGBA=l,o.Factory.addGetterSetter(n.Node,"red",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)}),o.Factory.addGetterSetter(n.Node,"green",0,function(d){return this._filterUpToDate=!1,d>255?255:d<0?0:Math.round(d)}),o.Factory.addGetterSetter(n.Node,"blue",0,s.RGBComponent,o.Factory.afterSetFilter),o.Factory.addGetterSetter(n.Node,"alpha",1,function(d){return this._filterUpToDate=!1,d>1?1:d<0?0:d}),lc}var uc={},sg;function b2(){if(sg)return uc;sg=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.Sepia=void 0;const o=function(n){const s=n.data,l=s.length;for(let d=0;d<l;d+=4){const c=s[d+0],u=s[d+1],p=s[d+2];s[d+0]=Math.min(255,c*.393+u*.769+p*.189),s[d+1]=Math.min(255,c*.349+u*.686+p*.168),s[d+2]=Math.min(255,c*.272+u*.534+p*.131)}};return uc.Sepia=o,uc}var cc={},og;function T2(){if(og)return cc;og=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.Solarize=void 0;const o=function(n){const s=n.data,l=n.width,d=n.height,c=l*4;let u=d;do{const p=(u-1)*c;let g=l;do{const v=p+(g-1)*4;let k=s[v],T=s[v+1],E=s[v+2];k>127&&(k=255-k),T>127&&(T=255-T),E>127&&(E=255-E),s[v]=k,s[v+1]=T,s[v+2]=E}while(--g)}while(--u)};return cc.Solarize=o,cc}var dc={},ag;function R2(){if(ag)return dc;ag=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.Threshold=void 0;const o=tt(),n=Zt(),s=rt(),l=function(d){const c=this.threshold()*255,u=d.data,p=u.length;for(let g=0;g<p;g+=1)u[g]=u[g]<c?0:255};return dc.Threshold=l,o.Factory.addGetterSetter(n.Node,"threshold",.5,(0,s.getNumberValidator)(),o.Factory.afterSetFilter),dc}var lg;function O2(){if(lg)return xu;lg=1,Object.defineProperty(xu,"__esModule",{value:!0}),xu.Konva=void 0;const o=Of(),n=Xy(),s=Zy(),l=e2(),d=t2(),c=n2(),u=r2(),p=km(),g=Vf(),v=Cm(),k=i2(),T=s2(),E=o2(),S=a2(),C=xm(),b=l2(),N=u2(),L=c2(),x=d2(),_=h2(),R=f2(),I=p2(),U=g2(),W=m2(),j=v2(),F=y2(),G=_2(),B=w2(),K=S2(),$=k2(),J=E2(),Y=C2(),oe=x2(),A=P2(),D=b2(),V=T2(),q=R2();return xu.Konva=o.Konva.Util._assign(o.Konva,{Arc:n.Arc,Arrow:s.Arrow,Circle:l.Circle,Ellipse:d.Ellipse,Image:c.Image,Label:u.Label,Tag:u.Tag,Line:p.Line,Path:g.Path,Rect:v.Rect,RegularPolygon:k.RegularPolygon,Ring:T.Ring,Sprite:E.Sprite,Star:S.Star,Text:C.Text,TextPath:b.TextPath,Transformer:N.Transformer,Wedge:L.Wedge,Filters:{Blur:x.Blur,Brighten:_.Brighten,Contrast:R.Contrast,Emboss:I.Emboss,Enhance:U.Enhance,Grayscale:W.Grayscale,HSL:j.HSL,HSV:F.HSV,Invert:G.Invert,Kaleidoscope:B.Kaleidoscope,Mask:K.Mask,Noise:$.Noise,Pixelate:J.Pixelate,Posterize:Y.Posterize,RGB:oe.RGB,RGBA:A.RGBA,Sepia:D.Sepia,Solarize:V.Solarize,Threshold:q.Threshold}}),xu}var N2=Vd.exports,ug;function A2(){if(ug)return Vd.exports;ug=1,Object.defineProperty(N2,"__esModule",{value:!0});const o=O2();return Vd.exports=o.Konva,Vd.exports}A2();var qd={exports:{}},cg;function I2(){return cg||(cg=1,(function(o,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;var s=Of();Object.defineProperty(n,"Konva",{enumerable:!0,get:function(){return s.Konva}});const l=Of();o.exports=l.Konva})(qd,qd.exports)),qd.exports}var L2=I2();const wc=Qd(L2);var hf={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff,dg;function j2(){return dg||(dg=1,ff=function(n){var s={},l=Xd(),d=Nf(),c=Object.assign;function u(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,h=1;h<arguments.length;h++)i+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),v=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),I=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=I&&r[I]||r["@@iterator"],typeof r=="function"?r:null)}function W(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case v:return"Portal";case E:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case L:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case C:return(r.displayName||"Context")+".Consumer";case S:return(r._context.displayName||"Context")+".Provider";case b:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return i=r.displayName||null,i!==null?i:W(r.type)||"Memo";case _:i=r._payload,r=r._init;try{return W(r(i))}catch{}}return null}function j(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(i);case 8:return i===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function F(r){var i=r,h=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(h=i.return),r=i.return;while(r)}return i.tag===3?h:null}function G(r){if(F(r)!==r)throw Error(u(188))}function B(r){var i=r.alternate;if(!i){if(i=F(r),i===null)throw Error(u(188));return i!==r?null:r}for(var h=r,m=i;;){var w=h.return;if(w===null)break;var O=w.alternate;if(O===null){if(m=w.return,m!==null){h=m;continue}break}if(w.child===O.child){for(O=w.child;O;){if(O===h)return G(w),r;if(O===m)return G(w),i;O=O.sibling}throw Error(u(188))}if(h.return!==m.return)h=w,m=O;else{for(var H=!1,se=w.child;se;){if(se===h){H=!0,h=w,m=O;break}if(se===m){H=!0,m=w,h=O;break}se=se.sibling}if(!H){for(se=O.child;se;){if(se===h){H=!0,h=O,m=w;break}if(se===m){H=!0,m=O,h=w;break}se=se.sibling}if(!H)throw Error(u(189))}}if(h.alternate!==m)throw Error(u(190))}if(h.tag!==3)throw Error(u(188));return h.stateNode.current===h?r:i}function K(r){return r=B(r),r!==null?$(r):null}function $(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=$(r);if(i!==null)return i;r=r.sibling}return null}function J(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){if(r.tag!==4){var i=J(r);if(i!==null)return i}r=r.sibling}return null}var Y=Array.isArray,oe=n.getPublicInstance,A=n.getRootHostContext,D=n.getChildHostContext,V=n.prepareForCommit,q=n.resetAfterCommit,M=n.createInstance,X=n.appendInitialChild,ee=n.finalizeInitialChildren,ce=n.prepareUpdate,me=n.shouldSetTextContent,ae=n.createTextInstance,Q=n.scheduleTimeout,ie=n.cancelTimeout,ve=n.noTimeout,Se=n.isPrimaryRenderer,xe=n.supportsMutation,ze=n.supportsPersistence,De=n.supportsHydration,it=n.getInstanceFromNode,Ve=n.preparePortalMount,Dt=n.getCurrentEventPriority,ot=n.detachDeletedInstance,Et=n.supportsMicrotasks,Ir=n.scheduleMicrotask,Ot=n.supportsTestSelectors,cr=n.findFiberRoot,dt=n.getBoundingRect,Un=n.getTextContent,ln=n.isHiddenSubtree,Lr=n.matchAccessibilityRole,un=n.setFocusIfFocusable,dr=n.setupIntersectionObserver,yn=n.appendChild,Kn=n.appendChildToContainer,Mt=n.commitTextUpdate,Ut=n.commitMount,Mi=n.commitUpdate,vo=n.insertBefore,Ui=n.insertInContainerBefore,Cl=n.removeChild,yo=n.removeChildFromContainer,aa=n.resetTextContent,xl=n.hideInstance,Pl=n.hideTextInstance,bl=n.unhideInstance,_s=n.unhideTextInstance,ws=n.clearContainer,kc=n.cloneInstance,Tl=n.createContainerChildSet,Rl=n.appendChildToContainerChildSet,Ec=n.finalizeContainerChildren,la=n.replaceContainerChildren,ua=n.cloneHiddenInstance,Ol=n.cloneHiddenTextInstance,_o=n.canHydrateInstance,Nl=n.canHydrateTextInstance,wo=n.canHydrateSuspenseInstance,Cc=n.isSuspenseInstancePending,zi=n.isSuspenseInstanceFallback,ca=n.getSuspenseInstanceFallbackErrorDetails,da=n.registerSuspenseInstanceRetry,Ss=n.getNextHydratableSibling,ih=n.getFirstHydratableChild,sh=n.getFirstHydratableChildWithinContainer,oh=n.getFirstHydratableChildWithinSuspenseInstance,Bi=n.hydrateInstance,xc=n.hydrateTextInstance,Pc=n.hydrateSuspenseInstance,ah=n.getNextHydratableInstanceAfterSuspenseInstance,bc=n.commitHydratedContainer,Tc=n.commitHydratedSuspenseInstance,Rc=n.clearSuspenseBoundary,Oc=n.clearSuspenseBoundaryFromContainer,lh=n.shouldDeleteUnhydratedTailInstances,uh=n.didNotMatchHydratedContainerTextInstance,It=n.didNotMatchHydratedTextInstance,Al;function Gi(r){if(Al===void 0)try{throw Error()}catch(h){var i=h.stack.trim().match(/\n( *(at )?)/);Al=i&&i[1]||""}return`
`+Al+r}var ha=!1;function ks(r,i){if(!r||ha)return"";ha=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Ee){var m=Ee}Reflect.construct(r,[],i)}else{try{i.call()}catch(Ee){m=Ee}r.call(i.prototype)}else{try{throw Error()}catch(Ee){m=Ee}r()}}catch(Ee){if(Ee&&m&&typeof Ee.stack=="string"){for(var w=Ee.stack.split(`
`),O=m.stack.split(`
`),H=w.length-1,se=O.length-1;1<=H&&0<=se&&w[H]!==O[se];)se--;for(;1<=H&&0<=se;H--,se--)if(w[H]!==O[se]){if(H!==1||se!==1)do if(H--,se--,0>se||w[H]!==O[se]){var pe=`
`+w[H].replace(" at new "," at ");return r.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",r.displayName)),pe}while(1<=H&&0<=se);break}}}finally{ha=!1,Error.prepareStackTrace=h}return(r=r?r.displayName||r.name:"")?Gi(r):""}var ch=Object.prototype.hasOwnProperty,fa=[],Yr=-1;function cn(r){return{current:r}}function _t(r){0>Yr||(r.current=fa[Yr],fa[Yr]=null,Yr--)}function Xe(r,i){Yr++,fa[Yr]=r.current,r.current=i}var gi={},_n=cn(gi),zn=cn(!1),jr=gi;function Qr(r,i){var h=r.type.contextTypes;if(!h)return gi;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var w={},O;for(O in h)w[O]=i[O];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=w),w}function en(r){return r=r.childContextTypes,r!=null}function qi(){_t(zn),_t(_n)}function Nc(r,i,h){if(_n.current!==gi)throw Error(u(168));Xe(_n,i),Xe(zn,h)}function Ac(r,i,h){var m=r.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return h;m=m.getChildContext();for(var w in m)if(!(w in i))throw Error(u(108,j(r)||"Unknown",w));return c({},h,m)}function Es(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||gi,jr=_n.current,Xe(_n,r),Xe(zn,zn.current),!0}function Il(r,i,h){var m=r.stateNode;if(!m)throw Error(u(169));h?(r=Ac(r,i,jr),m.__reactInternalMemoizedMergedChildContext=r,_t(zn),_t(_n),Xe(_n,r)):_t(zn),Xe(zn,h)}var Yn=Math.clz32?Math.clz32:Ll,So=Math.log,dh=Math.LN2;function Ll(r){return r>>>=0,r===0?32:31-(So(r)/dh|0)|0}var st=64,ko=4194304;function Cs(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function xs(r,i){var h=r.pendingLanes;if(h===0)return 0;var m=0,w=r.suspendedLanes,O=r.pingedLanes,H=h&268435455;if(H!==0){var se=H&~w;se!==0?m=Cs(se):(O&=H,O!==0&&(m=Cs(O)))}else H=h&~w,H!==0?m=Cs(H):O!==0&&(m=Cs(O));if(m===0)return 0;if(i!==0&&i!==m&&(i&w)===0&&(w=m&-m,O=i&-i,w>=O||w===16&&(O&4194240)!==0))return i;if((m&4)!==0&&(m|=h&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=m;0<i;)h=31-Yn(i),w=1<<h,m|=r[h],i&=~w;return m}function Ic(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lc(r,i){for(var h=r.suspendedLanes,m=r.pingedLanes,w=r.expirationTimes,O=r.pendingLanes;0<O;){var H=31-Yn(O),se=1<<H,pe=w[H];pe===-1?((se&h)===0||(se&m)!==0)&&(w[H]=Ic(se,i)):pe<=i&&(r.expiredLanes|=se),O&=~se}}function pa(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ga(){var r=st;return st<<=1,(st&4194240)===0&&(st=64),r}function Ps(r){for(var i=[],h=0;31>h;h++)i.push(r);return i}function hr(r,i,h){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Yn(i),r[i]=h}function mi(r,i){var h=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<h;){var w=31-Yn(h),O=1<<w;i[w]=0,m[w]=-1,r[w]=-1,h&=~O}}function Fr(r,i){var h=r.entangledLanes|=i;for(r=r.entanglements;h;){var m=31-Yn(h),w=1<<m;w&i|r[m]&i&&(r[m]|=i),h&=~w}}var Je=0;function bs(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Dr=d.unstable_scheduleCallback,jc=d.unstable_cancelCallback,Fc=d.unstable_shouldYield,Eo=d.unstable_requestPaint,tn=d.unstable_now,ma=d.unstable_ImmediatePriority,va=d.unstable_UserBlockingPriority,ya=d.unstable_NormalPriority,hh=d.unstable_IdlePriority,vi=null,Bn=null;function Ts(r){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(vi,r,void 0,(r.current.flags&128)===128)}catch{}}function _a(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Er=typeof Object.is=="function"?Object.is:_a,Xr=null,Rs=!1,Os=!1;function wa(r){Xr===null?Xr=[r]:Xr.push(r)}function Dc(r){Rs=!0,wa(r)}function dn(){if(!Os&&Xr!==null){Os=!0;var r=0,i=Je;try{var h=Xr;for(Je=1;r<h.length;r++){var m=h[r];do m=m(!0);while(m!==null)}Xr=null,Rs=!1}catch(w){throw Xr!==null&&(Xr=Xr.slice(r+1)),Dr(ma,dn),w}finally{Je=i,Os=!1}}return null}var yi=[],Jr=0,Co=null,Vi=0,Rn=[],Qn=0,Wt=null,Gn=1,Cr="";function xr(r,i){yi[Jr++]=Vi,yi[Jr++]=Co,Co=r,Vi=i}function Mc(r,i,h){Rn[Qn++]=Gn,Rn[Qn++]=Cr,Rn[Qn++]=Wt,Wt=r;var m=Gn;r=Cr;var w=32-Yn(m)-1;m&=~(1<<w),h+=1;var O=32-Yn(i)+w;if(30<O){var H=w-w%5;O=(m&(1<<H)-1).toString(32),m>>=H,w-=H,Gn=1<<32-Yn(i)+w|h<<w|m,Cr=O+r}else Gn=1<<O|h<<w|m,Cr=r}function xo(r){r.return!==null&&(xr(r,1),Mc(r,1,0))}function Po(r){for(;r===Co;)Co=yi[--Jr],yi[Jr]=null,Vi=yi[--Jr],yi[Jr]=null;for(;r===Wt;)Wt=Rn[--Qn],Rn[Qn]=null,Cr=Rn[--Qn],Rn[Qn]=null,Gn=Rn[--Qn],Rn[Qn]=null}var hn=null,On=null,wt=!1,bo=!1,Pr=null;function Uc(r,i){var h=or(5,null,null,0);h.elementType="DELETED",h.stateNode=i,h.return=r,i=r.deletions,i===null?(r.deletions=[h],r.flags|=16):i.push(h)}function Sa(r,i){switch(r.tag){case 5:return i=_o(i,r.type,r.pendingProps),i!==null?(r.stateNode=i,hn=r,On=ih(i),!0):!1;case 6:return i=Nl(i,r.pendingProps),i!==null?(r.stateNode=i,hn=r,On=null,!0):!1;case 13:if(i=wo(i),i!==null){var h=Wt!==null?{id:Gn,overflow:Cr}:null;return r.memoizedState={dehydrated:i,treeContext:h,retryLane:1073741824},h=or(18,null,null,0),h.stateNode=i,h.return=r,r.child=h,hn=r,On=null,!0}return!1;default:return!1}}function jl(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Fl(r){if(wt){var i=On;if(i){var h=i;if(!Sa(r,i)){if(jl(r))throw Error(u(418));i=Ss(h);var m=hn;i&&Sa(r,i)?Uc(m,h):(r.flags=r.flags&-4097|2,wt=!1,hn=r)}}else{if(jl(r))throw Error(u(418));r.flags=r.flags&-4097|2,wt=!1,hn=r}}}function zc(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;hn=r}function ka(r){if(!De||r!==hn)return!1;if(!wt)return zc(r),wt=!0,!1;if(r.tag!==3&&(r.tag!==5||lh(r.type)&&!me(r.type,r.memoizedProps))){var i=On;if(i){if(jl(r))throw Bc(),Error(u(418));for(;i;)Uc(r,i),i=Ss(i)}}if(zc(r),r.tag===13){if(!De)throw Error(u(316));if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(u(317));On=ah(r)}else On=hn?Ss(r.stateNode):null;return!0}function Bc(){for(var r=On;r;)r=Ss(r)}function Hi(){De&&(On=hn=null,bo=wt=!1)}function Dl(r){Pr===null?Pr=[r]:Pr.push(r)}var fh=p.ReactCurrentBatchConfig;function Ea(r,i){if(Er(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var h=Object.keys(r),m=Object.keys(i);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var w=h[m];if(!ch.call(i,w)||!Er(r[w],i[w]))return!1}return!0}function ph(r){switch(r.tag){case 5:return Gi(r.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 2:case 15:return r=ks(r.type,!1),r;case 11:return r=ks(r.type.render,!1),r;case 1:return r=ks(r.type,!0),r;default:return""}}function Wi(r,i,h){if(r=h.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(u(309));var m=h.stateNode}if(!m)throw Error(u(147,r));var w=m,O=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===O?i.ref:(i=function(H){var se=w.refs;H===null?delete se[O]:se[O]=H},i._stringRef=O,i)}if(typeof r!="string")throw Error(u(284));if(!h._owner)throw Error(u(290,r))}return r}function Ca(r,i){throw r=Object.prototype.toString.call(i),Error(u(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Gc(r){var i=r._init;return i(r._payload)}function qc(r){function i(he,le){if(r){var ge=he.deletions;ge===null?(he.deletions=[le],he.flags|=16):ge.push(le)}}function h(he,le){if(!r)return null;for(;le!==null;)i(he,le),le=le.sibling;return null}function m(he,le){for(he=new Map;le!==null;)le.key!==null?he.set(le.key,le):he.set(le.index,le),le=le.sibling;return he}function w(he,le){return he=Fi(he,le),he.index=0,he.sibling=null,he}function O(he,le,ge){return he.index=ge,r?(ge=he.alternate,ge!==null?(ge=ge.index,ge<le?(he.flags|=2,le):ge):(he.flags|=2,le)):(he.flags|=1048576,le)}function H(he){return r&&he.alternate===null&&(he.flags|=2),he}function se(he,le,ge,Te){return le===null||le.tag!==6?(le=to(ge,he.mode,Te),le.return=he,le):(le=w(le,ge),le.return=he,le)}function pe(he,le,ge,Te){var Me=ge.type;return Me===k?Ne(he,le,ge.props.children,Te,ge.key):le!==null&&(le.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===_&&Gc(Me)===le.type)?(Te=w(le,ge.props),Te.ref=Wi(he,le,ge),Te.return=he,Te):(Te=nl(ge.type,ge.key,ge.props,null,he.mode,Te),Te.ref=Wi(he,le,ge),Te.return=he,Te)}function Ee(he,le,ge,Te){return le===null||le.tag!==4||le.stateNode.containerInfo!==ge.containerInfo||le.stateNode.implementation!==ge.implementation?(le=rl(ge,he.mode,Te),le.return=he,le):(le=w(le,ge.children||[]),le.return=he,le)}function Ne(he,le,ge,Te,Me){return le===null||le.tag!==7?(le=gn(ge,he.mode,Te,Me),le.return=he,le):(le=w(le,ge),le.return=he,le)}function We(he,le,ge){if(typeof le=="string"&&le!==""||typeof le=="number")return le=to(""+le,he.mode,ge),le.return=he,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case g:return ge=nl(le.type,le.key,le.props,null,he.mode,ge),ge.ref=Wi(he,null,le),ge.return=he,ge;case v:return le=rl(le,he.mode,ge),le.return=he,le;case _:var Te=le._init;return We(he,Te(le._payload),ge)}if(Y(le)||U(le))return le=gn(le,he.mode,ge,null),le.return=he,le;Ca(he,le)}return null}function be(he,le,ge,Te){var Me=le!==null?le.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Me!==null?null:se(he,le,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case g:return ge.key===Me?pe(he,le,ge,Te):null;case v:return ge.key===Me?Ee(he,le,ge,Te):null;case _:return Me=ge._init,be(he,le,Me(ge._payload),Te)}if(Y(ge)||U(ge))return Me!==null?null:Ne(he,le,ge,Te,null);Ca(he,ge)}return null}function yt(he,le,ge,Te,Me){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return he=he.get(ge)||null,se(le,he,""+Te,Me);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return he=he.get(Te.key===null?ge:Te.key)||null,pe(le,he,Te,Me);case v:return he=he.get(Te.key===null?ge:Te.key)||null,Ee(le,he,Te,Me);case _:var Ye=Te._init;return yt(he,le,ge,Ye(Te._payload),Me)}if(Y(Te)||U(Te))return he=he.get(ge)||null,Ne(le,he,Te,Me,null);Ca(le,Te)}return null}function ct(he,le,ge,Te){for(var Me=null,Ye=null,$e=le,nt=le=0,Xt=null;$e!==null&&nt<ge.length;nt++){$e.index>nt?(Xt=$e,$e=null):Xt=$e.sibling;var et=be(he,$e,ge[nt],Te);if(et===null){$e===null&&($e=Xt);break}r&&$e&&et.alternate===null&&i(he,$e),le=O(et,le,nt),Ye===null?Me=et:Ye.sibling=et,Ye=et,$e=Xt}if(nt===ge.length)return h(he,$e),wt&&xr(he,nt),Me;if($e===null){for(;nt<ge.length;nt++)$e=We(he,ge[nt],Te),$e!==null&&(le=O($e,le,nt),Ye===null?Me=$e:Ye.sibling=$e,Ye=$e);return wt&&xr(he,nt),Me}for($e=m(he,$e);nt<ge.length;nt++)Xt=yt($e,he,nt,ge[nt],Te),Xt!==null&&(r&&Xt.alternate!==null&&$e.delete(Xt.key===null?nt:Xt.key),le=O(Xt,le,nt),Ye===null?Me=Xt:Ye.sibling=Xt,Ye=Xt);return r&&$e.forEach(function(xn){return i(he,xn)}),wt&&xr(he,nt),Me}function Fn(he,le,ge,Te){var Me=U(ge);if(typeof Me!="function")throw Error(u(150));if(ge=Me.call(ge),ge==null)throw Error(u(151));for(var Ye=Me=null,$e=le,nt=le=0,Xt=null,et=ge.next();$e!==null&&!et.done;nt++,et=ge.next()){$e.index>nt?(Xt=$e,$e=null):Xt=$e.sibling;var xn=be(he,$e,et.value,Te);if(xn===null){$e===null&&($e=Xt);break}r&&$e&&xn.alternate===null&&i(he,$e),le=O(xn,le,nt),Ye===null?Me=xn:Ye.sibling=xn,Ye=xn,$e=Xt}if(et.done)return h(he,$e),wt&&xr(he,nt),Me;if($e===null){for(;!et.done;nt++,et=ge.next())et=We(he,et.value,Te),et!==null&&(le=O(et,le,nt),Ye===null?Me=et:Ye.sibling=et,Ye=et);return wt&&xr(he,nt),Me}for($e=m(he,$e);!et.done;nt++,et=ge.next())et=yt($e,he,nt,et.value,Te),et!==null&&(r&&et.alternate!==null&&$e.delete(et.key===null?nt:et.key),le=O(et,le,nt),Ye===null?Me=et:Ye.sibling=et,Ye=et);return r&&$e.forEach(function(_h){return i(he,_h)}),wt&&xr(he,nt),Me}function Wr(he,le,ge,Te){if(typeof ge=="object"&&ge!==null&&ge.type===k&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case g:e:{for(var Me=ge.key,Ye=le;Ye!==null;){if(Ye.key===Me){if(Me=ge.type,Me===k){if(Ye.tag===7){h(he,Ye.sibling),le=w(Ye,ge.props.children),le.return=he,he=le;break e}}else if(Ye.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===_&&Gc(Me)===Ye.type){h(he,Ye.sibling),le=w(Ye,ge.props),le.ref=Wi(he,Ye,ge),le.return=he,he=le;break e}h(he,Ye);break}else i(he,Ye);Ye=Ye.sibling}ge.type===k?(le=gn(ge.props.children,he.mode,Te,ge.key),le.return=he,he=le):(Te=nl(ge.type,ge.key,ge.props,null,he.mode,Te),Te.ref=Wi(he,le,ge),Te.return=he,he=Te)}return H(he);case v:e:{for(Ye=ge.key;le!==null;){if(le.key===Ye)if(le.tag===4&&le.stateNode.containerInfo===ge.containerInfo&&le.stateNode.implementation===ge.implementation){h(he,le.sibling),le=w(le,ge.children||[]),le.return=he,he=le;break e}else{h(he,le);break}else i(he,le);le=le.sibling}le=rl(ge,he.mode,Te),le.return=he,he=le}return H(he);case _:return Ye=ge._init,Wr(he,le,Ye(ge._payload),Te)}if(Y(ge))return ct(he,le,ge,Te);if(U(ge))return Fn(he,le,ge,Te);Ca(he,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,le!==null&&le.tag===6?(h(he,le.sibling),le=w(le,ge),le.return=he,he=le):(h(he,le),le=to(ge,he.mode,Te),le.return=he,he=le),H(he)):h(he,le)}return Wr}var $i=qc(!0),Vc=qc(!1),xa=cn(null),Pa=null,Ns=null,Ml=null;function Ul(){Ml=Ns=Pa=null}function Hc(r,i,h){Se?(Xe(xa,i._currentValue),i._currentValue=h):(Xe(xa,i._currentValue2),i._currentValue2=h)}function To(r){var i=xa.current;_t(xa),Se?r._currentValue=i:r._currentValue2=i}function Ki(r,i,h){for(;r!==null;){var m=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),r===h)break;r=r.return}}function As(r,i){Pa=r,Ml=Ns=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Kt=!0),r.firstContext=null)}function Xn(r){var i=Se?r._currentValue:r._currentValue2;if(Ml!==r)if(r={context:r,memoizedValue:i,next:null},Ns===null){if(Pa===null)throw Error(u(308));Ns=r,Pa.dependencies={lanes:0,firstContext:r}}else Ns=Ns.next=r;return i}var _i=null;function ba(r){_i===null?_i=[r]:_i.push(r)}function zl(r,i,h,m){var w=i.interleaved;return w===null?(h.next=h,ba(i)):(h.next=w.next,w.next=h),i.interleaved=h,br(r,m)}function br(r,i){r.lanes|=i;var h=r.alternate;for(h!==null&&(h.lanes|=i),h=r,r=r.return;r!==null;)r.childLanes|=i,h=r.alternate,h!==null&&(h.childLanes|=i),h=r,r=r.return;return h.tag===3?h.stateNode:null}var Jn=!1;function Bl(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wc(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Zr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function ei(r,i,h){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(Ke&2)!==0){var w=m.pending;return w===null?i.next=i:(i.next=w.next,w.next=i),m.pending=i,br(r,h)}return w=m.interleaved,w===null?(i.next=i,ba(m)):(i.next=w.next,w.next=i),m.interleaved=i,br(r,h)}function Ro(r,i,h){if(i=i.updateQueue,i!==null&&(i=i.shared,(h&4194240)!==0)){var m=i.lanes;m&=r.pendingLanes,h|=m,i.lanes=h,Fr(r,h)}}function Is(r,i){var h=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var w=null,O=null;if(h=h.firstBaseUpdate,h!==null){do{var H={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};O===null?w=O=H:O=O.next=H,h=h.next}while(h!==null);O===null?w=O=i:O=O.next=i}else w=O=i;h={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:O,shared:m.shared,effects:m.effects},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=i:r.next=i,h.lastBaseUpdate=i}function wi(r,i,h,m){var w=r.updateQueue;Jn=!1;var O=w.firstBaseUpdate,H=w.lastBaseUpdate,se=w.shared.pending;if(se!==null){w.shared.pending=null;var pe=se,Ee=pe.next;pe.next=null,H===null?O=Ee:H.next=Ee,H=pe;var Ne=r.alternate;Ne!==null&&(Ne=Ne.updateQueue,se=Ne.lastBaseUpdate,se!==H&&(se===null?Ne.firstBaseUpdate=Ee:se.next=Ee,Ne.lastBaseUpdate=pe))}if(O!==null){var We=w.baseState;H=0,Ne=Ee=pe=null,se=O;do{var be=se.lane,yt=se.eventTime;if((m&be)===be){Ne!==null&&(Ne=Ne.next={eventTime:yt,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var ct=r,Fn=se;switch(be=i,yt=h,Fn.tag){case 1:if(ct=Fn.payload,typeof ct=="function"){We=ct.call(yt,We,be);break e}We=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=Fn.payload,be=typeof ct=="function"?ct.call(yt,We,be):ct,be==null)break e;We=c({},We,be);break e;case 2:Jn=!0}}se.callback!==null&&se.lane!==0&&(r.flags|=64,be=w.effects,be===null?w.effects=[se]:be.push(se))}else yt={eventTime:yt,lane:be,tag:se.tag,payload:se.payload,callback:se.callback,next:null},Ne===null?(Ee=Ne=yt,pe=We):Ne=Ne.next=yt,H|=be;if(se=se.next,se===null){if(se=w.shared.pending,se===null)break;be=se,se=be.next,be.next=null,w.lastBaseUpdate=be,w.shared.pending=null}}while(!0);if(Ne===null&&(pe=We),w.baseState=pe,w.firstBaseUpdate=Ee,w.lastBaseUpdate=Ne,i=w.shared.interleaved,i!==null){w=i;do H|=w.lane,w=w.next;while(w!==i)}else O===null&&(w.shared.lanes=0);si|=H,r.lanes=H,r.memoizedState=We}}function $c(r,i,h){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var m=r[i],w=m.callback;if(w!==null){if(m.callback=null,m=h,typeof w!="function")throw Error(u(191,w));w.call(m)}}}var Si={},fr=cn(Si),Ls=cn(Si),ki=cn(Si);function pr(r){if(r===Si)throw Error(u(174));return r}function Ta(r,i){Xe(ki,i),Xe(Ls,r),Xe(fr,Si),r=A(i),_t(fr),Xe(fr,r)}function Yi(){_t(fr),_t(Ls),_t(ki)}function Gl(r){var i=pr(ki.current),h=pr(fr.current);i=D(h,r.type,i),h!==i&&(Xe(Ls,r),Xe(fr,i))}function ql(r){Ls.current===r&&(_t(fr),_t(Ls))}var Rt=cn(0);function Ra(r){for(var i=r;i!==null;){if(i.tag===13){var h=i.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Cc(h)||zi(h)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Vl=[];function Hl(){for(var r=0;r<Vl.length;r++){var i=Vl[r];Se?i._workInProgressVersionPrimary=null:i._workInProgressVersionSecondary=null}Vl.length=0}var qn=p.ReactCurrentDispatcher,Qi=p.ReactCurrentBatchConfig,Ei=0,Ct=null,zt=null,$t=null,js=!1,Oo=!1,No=0,Fs=0;function nn(){throw Error(u(321))}function Xi(r,i){if(i===null)return!1;for(var h=0;h<i.length&&h<r.length;h++)if(!Er(r[h],i[h]))return!1;return!0}function Ao(r,i,h,m,w,O){if(Ei=O,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,qn.current=r===null||r.memoizedState===null?tu:nu,r=h(m,w),Oo){O=0;do{if(Oo=!1,No=0,25<=O)throw Error(u(301));O+=1,$t=zt=null,i.updateQueue=null,qn.current=ru,r=h(m,w)}while(Oo)}if(qn.current=ns,i=zt!==null&&zt.next!==null,Ei=0,$t=zt=Ct=null,js=!1,i)throw Error(u(300));return r}function Oa(){var r=No!==0;return No=0,r}function Zn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Ct.memoizedState=$t=r:$t=$t.next=r,$t}function fn(){if(zt===null){var r=Ct.alternate;r=r!==null?r.memoizedState:null}else r=zt.next;var i=$t===null?Ct.memoizedState:$t.next;if(i!==null)$t=i,zt=r;else{if(r===null)throw Error(u(310));zt=r,r={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},$t===null?Ct.memoizedState=$t=r:$t=$t.next=r}return $t}function Ji(r,i){return typeof i=="function"?i(r):i}function Na(r){var i=fn(),h=i.queue;if(h===null)throw Error(u(311));h.lastRenderedReducer=r;var m=zt,w=m.baseQueue,O=h.pending;if(O!==null){if(w!==null){var H=w.next;w.next=O.next,O.next=H}m.baseQueue=w=O,h.pending=null}if(w!==null){O=w.next,m=m.baseState;var se=H=null,pe=null,Ee=O;do{var Ne=Ee.lane;if((Ei&Ne)===Ne)pe!==null&&(pe=pe.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),m=Ee.hasEagerState?Ee.eagerState:r(m,Ee.action);else{var We={lane:Ne,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};pe===null?(se=pe=We,H=m):pe=pe.next=We,Ct.lanes|=Ne,si|=Ne}Ee=Ee.next}while(Ee!==null&&Ee!==O);pe===null?H=m:pe.next=se,Er(m,i.memoizedState)||(Kt=!0),i.memoizedState=m,i.baseState=H,i.baseQueue=pe,h.lastRenderedState=m}if(r=h.interleaved,r!==null){w=r;do O=w.lane,Ct.lanes|=O,si|=O,w=w.next;while(w!==r)}else w===null&&(h.lanes=0);return[i.memoizedState,h.dispatch]}function Ds(r){var i=fn(),h=i.queue;if(h===null)throw Error(u(311));h.lastRenderedReducer=r;var m=h.dispatch,w=h.pending,O=i.memoizedState;if(w!==null){h.pending=null;var H=w=w.next;do O=r(O,H.action),H=H.next;while(H!==w);Er(O,i.memoizedState)||(Kt=!0),i.memoizedState=O,i.baseQueue===null&&(i.baseState=O),h.lastRenderedState=O}return[O,m]}function Wl(){}function $l(r,i){var h=Ct,m=fn(),w=i(),O=!Er(m.memoizedState,w);if(O&&(m.memoizedState=w,Kt=!0),m=m.queue,La(Ql.bind(null,h,m,r),[r]),m.getSnapshot!==i||O||$t!==null&&$t.memoizedState.tag&1){if(h.flags|=2048,Zi(9,Yl.bind(null,h,m,w,i),void 0,null),pt===null)throw Error(u(349));(Ei&30)!==0||Kl(h,i,w)}return w}function Kl(r,i,h){r.flags|=16384,r={getSnapshot:i,value:h},i=Ct.updateQueue,i===null?(i={lastEffect:null,stores:null},Ct.updateQueue=i,i.stores=[r]):(h=i.stores,h===null?i.stores=[r]:h.push(r))}function Yl(r,i,h,m){i.value=h,i.getSnapshot=m,Xl(i)&&ti(r)}function Ql(r,i,h){return h(function(){Xl(i)&&ti(r)})}function Xl(r){var i=r.getSnapshot;r=r.value;try{var h=i();return!Er(r,h)}catch{return!0}}function ti(r){var i=br(r,1);i!==null&&En(i,r,1,-1)}function Aa(r){var i=Zn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:r},i.queue=r,r=r.dispatch=gh.bind(null,Ct,r),[i.memoizedState,r]}function Zi(r,i,h,m){return r={tag:r,create:i,destroy:h,deps:m,next:null},i=Ct.updateQueue,i===null?(i={lastEffect:null,stores:null},Ct.updateQueue=i,i.lastEffect=r.next=r):(h=i.lastEffect,h===null?i.lastEffect=r.next=r:(m=h.next,h.next=r,r.next=m,i.lastEffect=r)),r}function Kc(){return fn().memoizedState}function Ia(r,i,h,m){var w=Zn();Ct.flags|=r,w.memoizedState=Zi(1|i,h,void 0,m===void 0?null:m)}function Ci(r,i,h,m){var w=fn();m=m===void 0?null:m;var O=void 0;if(zt!==null){var H=zt.memoizedState;if(O=H.destroy,m!==null&&Xi(m,H.deps)){w.memoizedState=Zi(i,h,O,m);return}}Ct.flags|=r,w.memoizedState=Zi(1|i,h,O,m)}function Yc(r,i){return Ia(8390656,8,r,i)}function La(r,i){return Ci(2048,8,r,i)}function Jl(r,i){return Ci(4,2,r,i)}function gt(r,i){return Ci(4,4,r,i)}function ja(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Io(r,i,h){return h=h!=null?h.concat([r]):null,Ci(4,4,ja.bind(null,i,r),h)}function es(){}function Zl(r,i){var h=fn();i=i===void 0?null:i;var m=h.memoizedState;return m!==null&&i!==null&&Xi(i,m[1])?m[0]:(h.memoizedState=[r,i],r)}function Fa(r,i){var h=fn();i=i===void 0?null:i;var m=h.memoizedState;return m!==null&&i!==null&&Xi(i,m[1])?m[0]:(r=r(),h.memoizedState=[r,i],r)}function Ms(r,i,h){return(Ei&21)===0?(r.baseState&&(r.baseState=!1,Kt=!0),r.memoizedState=h):(Er(h,i)||(h=ga(),Ct.lanes|=h,si|=h,r.baseState=!0),i)}function Da(r,i){var h=Je;Je=h!==0&&4>h?h:4,r(!0);var m=Qi.transition;Qi.transition={};try{r(!1),i()}finally{Je=h,Qi.transition=m}}function ts(){return fn().memoizedState}function Qc(r,i,h){var m=Qt(r);if(h={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null},Xc(r))eu(i,h);else if(h=zl(r,i,h,m),h!==null){var w=St();En(h,r,m,w),Lo(h,i,m)}}function gh(r,i,h){var m=Qt(r),w={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null};if(Xc(r))eu(i,w);else{var O=r.alternate;if(r.lanes===0&&(O===null||O.lanes===0)&&(O=i.lastRenderedReducer,O!==null))try{var H=i.lastRenderedState,se=O(H,h);if(w.hasEagerState=!0,w.eagerState=se,Er(se,H)){var pe=i.interleaved;pe===null?(w.next=w,ba(i)):(w.next=pe.next,pe.next=w),i.interleaved=w;return}}catch{}finally{}h=zl(r,i,w,m),h!==null&&(w=St(),En(h,r,m,w),Lo(h,i,m))}}function Xc(r){var i=r.alternate;return r===Ct||i!==null&&i===Ct}function eu(r,i){Oo=js=!0;var h=r.pending;h===null?i.next=i:(i.next=h.next,h.next=i),r.pending=i}function Lo(r,i,h){if((h&4194240)!==0){var m=i.lanes;m&=r.pendingLanes,h|=m,i.lanes=h,Fr(r,h)}}var ns={readContext:Xn,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},tu={readContext:Xn,useCallback:function(r,i){return Zn().memoizedState=[r,i===void 0?null:i],r},useContext:Xn,useEffect:Yc,useImperativeHandle:function(r,i,h){return h=h!=null?h.concat([r]):null,Ia(4194308,4,ja.bind(null,i,r),h)},useLayoutEffect:function(r,i){return Ia(4194308,4,r,i)},useInsertionEffect:function(r,i){return Ia(4,2,r,i)},useMemo:function(r,i){var h=Zn();return i=i===void 0?null:i,r=r(),h.memoizedState=[r,i],r},useReducer:function(r,i,h){var m=Zn();return i=h!==void 0?h(i):i,m.memoizedState=m.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},m.queue=r,r=r.dispatch=Qc.bind(null,Ct,r),[m.memoizedState,r]},useRef:function(r){var i=Zn();return r={current:r},i.memoizedState=r},useState:Aa,useDebugValue:es,useDeferredValue:function(r){return Zn().memoizedState=r},useTransition:function(){var r=Aa(!1),i=r[0];return r=Da.bind(null,r[1]),Zn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,h){var m=Ct,w=Zn();if(wt){if(h===void 0)throw Error(u(407));h=h()}else{if(h=i(),pt===null)throw Error(u(349));(Ei&30)!==0||Kl(m,i,h)}w.memoizedState=h;var O={value:h,getSnapshot:i};return w.queue=O,Yc(Ql.bind(null,m,O,r),[r]),m.flags|=2048,Zi(9,Yl.bind(null,m,O,h,i),void 0,null),h},useId:function(){var r=Zn(),i=pt.identifierPrefix;if(wt){var h=Cr,m=Gn;h=(m&~(1<<32-Yn(m)-1)).toString(32)+h,i=":"+i+"R"+h,h=No++,0<h&&(i+="H"+h.toString(32)),i+=":"}else h=Fs++,i=":"+i+"r"+h.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},nu={readContext:Xn,useCallback:Zl,useContext:Xn,useEffect:La,useImperativeHandle:Io,useInsertionEffect:Jl,useLayoutEffect:gt,useMemo:Fa,useReducer:Na,useRef:Kc,useState:function(){return Na(Ji)},useDebugValue:es,useDeferredValue:function(r){var i=fn();return Ms(i,zt.memoizedState,r)},useTransition:function(){var r=Na(Ji)[0],i=fn().memoizedState;return[r,i]},useMutableSource:Wl,useSyncExternalStore:$l,useId:ts,unstable_isNewReconciler:!1},ru={readContext:Xn,useCallback:Zl,useContext:Xn,useEffect:La,useImperativeHandle:Io,useInsertionEffect:Jl,useLayoutEffect:gt,useMemo:Fa,useReducer:Ds,useRef:Kc,useState:function(){return Ds(Ji)},useDebugValue:es,useDeferredValue:function(r){var i=fn();return zt===null?i.memoizedState=r:Ms(i,zt.memoizedState,r)},useTransition:function(){var r=Ds(Ji)[0],i=fn().memoizedState;return[r,i]},useMutableSource:Wl,useSyncExternalStore:$l,useId:ts,unstable_isNewReconciler:!1};function er(r,i){if(r&&r.defaultProps){i=c({},i),r=r.defaultProps;for(var h in r)i[h]===void 0&&(i[h]=r[h]);return i}return i}function iu(r,i,h,m){i=r.memoizedState,h=h(m,i),h=h==null?i:c({},i,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var jo={isMounted:function(r){return(r=r._reactInternals)?F(r)===r:!1},enqueueSetState:function(r,i,h){r=r._reactInternals;var m=St(),w=Qt(r),O=Zr(m,w);O.payload=i,h!=null&&(O.callback=h),i=ei(r,O,w),i!==null&&(En(i,r,w,m),Ro(i,r,w))},enqueueReplaceState:function(r,i,h){r=r._reactInternals;var m=St(),w=Qt(r),O=Zr(m,w);O.tag=1,O.payload=i,h!=null&&(O.callback=h),i=ei(r,O,w),i!==null&&(En(i,r,w,m),Ro(i,r,w))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var h=St(),m=Qt(r),w=Zr(h,m);w.tag=2,i!=null&&(w.callback=i),i=ei(r,w,m),i!==null&&(En(i,r,m,h),Ro(i,r,m))}};function Jc(r,i,h,m,w,O,H){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,O,H):i.prototype&&i.prototype.isPureReactComponent?!Ea(h,m)||!Ea(w,O):!0}function Zc(r,i,h){var m=!1,w=gi,O=i.contextType;return typeof O=="object"&&O!==null?O=Xn(O):(w=en(i)?jr:_n.current,m=i.contextTypes,O=(m=m!=null)?Qr(r,w):gi),i=new i(h,O),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=jo,r.stateNode=i,i._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=w,r.__reactInternalMemoizedMaskedChildContext=O),i}function Ma(r,i,h,m){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(h,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(h,m),i.state!==r&&jo.enqueueReplaceState(i,i.state,null)}function Mr(r,i,h,m){var w=r.stateNode;w.props=h,w.state=r.memoizedState,w.refs={},Bl(r);var O=i.contextType;typeof O=="object"&&O!==null?w.context=Xn(O):(O=en(i)?jr:_n.current,w.context=Qr(r,O)),w.state=r.memoizedState,O=i.getDerivedStateFromProps,typeof O=="function"&&(iu(r,i,O,h),w.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(i=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),i!==w.state&&jo.enqueueReplaceState(w,w.state,null),wi(r,h,w,m),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308)}function rs(r,i){try{var h="",m=i;do h+=ph(m),m=m.return;while(m);var w=h}catch(O){w=`
Error generating stack: `+O.message+`
`+O.stack}return{value:r,source:i,stack:w,digest:null}}function xi(r,i,h){return{value:r,source:null,stack:h??null,digest:i??null}}function gr(r,i){try{console.error(i.value)}catch(h){setTimeout(function(){throw h})}}var Fo=typeof WeakMap=="function"?WeakMap:Map;function Ur(r,i,h){h=Zr(-1,h),h.tag=3,h.payload={element:null};var m=i.value;return h.callback=function(){At||(At=!0,Bt=m),gr(r,i)},h}function Ua(r,i,h){h=Zr(-1,h),h.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var w=i.value;h.payload=function(){return m(w)},h.callback=function(){gr(r,i)}}var O=r.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(h.callback=function(){gr(r,i),typeof m!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var H=i.stack;this.componentDidCatch(i.value,{componentStack:H!==null?H:""})}),h}function ed(r,i,h){var m=r.pingCache;if(m===null){m=r.pingCache=new Fo;var w=new Set;m.set(i,w)}else w=m.get(i),w===void 0&&(w=new Set,m.set(i,w));w.has(h)||(w.add(h),r=ld.bind(null,r,i,h),i.then(r,r))}function td(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Pi(r,i,h,m,w){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(i=Zr(-1,1),i.tag=2,ei(h,i,1))),h.lanes|=1),r):(r.flags|=65536,r.lanes=w,r)}var Do=p.ReactCurrentOwner,Kt=!1;function rn(r,i,h,m){i.child=r===null?Vc(i,null,h,m):$i(i,r.child,h,m)}function za(r,i,h,m,w){h=h.render;var O=i.ref;return As(i,w),m=Ao(r,i,h,m,O,w),h=Oa(),r!==null&&!Kt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~w,ri(r,i,w)):(wt&&h&&xo(i),i.flags|=1,rn(r,i,m,w),i.child)}function is(r,i,h,m,w){if(r===null){var O=h.type;return typeof O=="function"&&!Zs(O)&&O.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(i.tag=15,i.type=O,ni(r,i,O,m,w)):(r=nl(h.type,null,m,i,i.mode,w),r.ref=i.ref,r.return=i,i.child=r)}if(O=r.child,(r.lanes&w)===0){var H=O.memoizedProps;if(h=h.compare,h=h!==null?h:Ea,h(H,m)&&r.ref===i.ref)return ri(r,i,w)}return i.flags|=1,r=Fi(O,m),r.ref=i.ref,r.return=i,i.child=r}function ni(r,i,h,m,w){if(r!==null){var O=r.memoizedProps;if(Ea(O,m)&&r.ref===i.ref)if(Kt=!1,i.pendingProps=m=O,(r.lanes&w)!==0)(r.flags&131072)!==0&&(Kt=!0);else return i.lanes=r.lanes,ri(r,i,w)}return zr(r,i,h,m,w)}function mt(r,i,h){var m=i.pendingProps,w=m.children,O=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Ai,Yt),Yt|=h;else{if((h&1073741824)===0)return r=O!==null?O.baseLanes|h:h,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Xe(Ai,Yt),Yt|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=O!==null?O.baseLanes:h,Xe(Ai,Yt),Yt|=m}else O!==null?(m=O.baseLanes|h,i.memoizedState=null):m=h,Xe(Ai,Yt),Yt|=m;return rn(r,i,w,h),i.child}function ft(r,i){var h=i.ref;(r===null&&h!==null||r!==null&&r.ref!==h)&&(i.flags|=512,i.flags|=2097152)}function zr(r,i,h,m,w){var O=en(h)?jr:_n.current;return O=Qr(i,O),As(i,w),h=Ao(r,i,h,m,O,w),m=Oa(),r!==null&&!Kt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~w,ri(r,i,w)):(wt&&m&&xo(i),i.flags|=1,rn(r,i,h,w),i.child)}function pn(r,i,h,m,w){if(en(h)){var O=!0;Es(i)}else O=!1;if(As(i,w),i.stateNode===null)Mo(r,i),Zc(i,h,m),Mr(i,h,m,w),m=!0;else if(r===null){var H=i.stateNode,se=i.memoizedProps;H.props=se;var pe=H.context,Ee=h.contextType;typeof Ee=="object"&&Ee!==null?Ee=Xn(Ee):(Ee=en(h)?jr:_n.current,Ee=Qr(i,Ee));var Ne=h.getDerivedStateFromProps,We=typeof Ne=="function"||typeof H.getSnapshotBeforeUpdate=="function";We||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(se!==m||pe!==Ee)&&Ma(i,H,m,Ee),Jn=!1;var be=i.memoizedState;H.state=be,wi(i,m,H,w),pe=i.memoizedState,se!==m||be!==pe||zn.current||Jn?(typeof Ne=="function"&&(iu(i,h,Ne,m),pe=i.memoizedState),(se=Jn||Jc(i,h,se,m,be,pe,Ee))?(We||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(i.flags|=4194308)):(typeof H.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=pe),H.props=m,H.state=pe,H.context=Ee,m=se):(typeof H.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{H=i.stateNode,Wc(r,i),se=i.memoizedProps,Ee=i.type===i.elementType?se:er(i.type,se),H.props=Ee,We=i.pendingProps,be=H.context,pe=h.contextType,typeof pe=="object"&&pe!==null?pe=Xn(pe):(pe=en(h)?jr:_n.current,pe=Qr(i,pe));var yt=h.getDerivedStateFromProps;(Ne=typeof yt=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(se!==We||be!==pe)&&Ma(i,H,m,pe),Jn=!1,be=i.memoizedState,H.state=be,wi(i,m,H,w);var ct=i.memoizedState;se!==We||be!==ct||zn.current||Jn?(typeof yt=="function"&&(iu(i,h,yt,m),ct=i.memoizedState),(Ee=Jn||Jc(i,h,Ee,m,be,ct,pe)||!1)?(Ne||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(m,ct,pe),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(m,ct,pe)),typeof H.componentDidUpdate=="function"&&(i.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof H.componentDidUpdate!="function"||se===r.memoizedProps&&be===r.memoizedState||(i.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||se===r.memoizedProps&&be===r.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=ct),H.props=m,H.state=ct,H.context=pe,m=Ee):(typeof H.componentDidUpdate!="function"||se===r.memoizedProps&&be===r.memoizedState||(i.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||se===r.memoizedProps&&be===r.memoizedState||(i.flags|=1024),m=!1)}return wn(r,i,h,m,O,w)}function wn(r,i,h,m,w,O){ft(r,i);var H=(i.flags&128)!==0;if(!m&&!H)return w&&Il(i,h,!1),ri(r,i,O);m=i.stateNode,Do.current=i;var se=H&&typeof h.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,r!==null&&H?(i.child=$i(i,r.child,null,O),i.child=$i(i,null,se,O)):rn(r,i,se,O),i.memoizedState=m.state,w&&Il(i,h,!0),i.child}function bi(r){var i=r.stateNode;i.pendingContext?Nc(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Nc(r,i.context,!1),Ta(r,i.containerInfo)}function ss(r,i,h,m,w){return Hi(),Dl(w),i.flags|=256,rn(r,i,h,m),i.child}var Sn={dehydrated:null,treeContext:null,retryLane:0};function Us(r){return{baseLanes:r,cachePool:null,transitions:null}}function su(r,i,h){var m=i.pendingProps,w=Rt.current,O=!1,H=(i.flags&128)!==0,se;if((se=H)||(se=r!==null&&r.memoizedState===null?!1:(w&2)!==0),se?(O=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(w|=1),Xe(Rt,w&1),r===null)return Fl(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:zi(r)?i.lanes=8:i.lanes=1073741824,null):(H=m.children,r=m.fallback,O?(m=i.mode,O=i.child,H={mode:"hidden",children:H},(m&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=H):O=eo(H,m,0,null),r=gn(r,m,h,null),O.return=i,r.return=i,O.sibling=r,i.child=O,i.child.memoizedState=Us(h),i.memoizedState=Sn,r):Ba(i,H));if(w=r.memoizedState,w!==null&&(se=w.dehydrated,se!==null))return nd(r,i,H,m,se,w,h);if(O){O=m.fallback,H=i.mode,w=r.child,se=w.sibling;var pe={mode:"hidden",children:m.children};return(H&1)===0&&i.child!==w?(m=i.child,m.childLanes=0,m.pendingProps=pe,i.deletions=null):(m=Fi(w,pe),m.subtreeFlags=w.subtreeFlags&14680064),se!==null?O=Fi(se,O):(O=gn(O,H,h,null),O.flags|=2),O.return=i,m.return=i,m.sibling=O,i.child=m,m=O,O=i.child,H=r.child.memoizedState,H=H===null?Us(h):{baseLanes:H.baseLanes|h,cachePool:null,transitions:H.transitions},O.memoizedState=H,O.childLanes=r.childLanes&~h,i.memoizedState=Sn,m}return O=r.child,r=O.sibling,m=Fi(O,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=h),m.return=i,m.sibling=null,r!==null&&(h=i.deletions,h===null?(i.deletions=[r],i.flags|=16):h.push(r)),i.child=m,i.memoizedState=null,m}function Ba(r,i){return i=eo({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function os(r,i,h,m){return m!==null&&Dl(m),$i(i,r.child,null,h),r=Ba(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function nd(r,i,h,m,w,O,H){if(h)return i.flags&256?(i.flags&=-257,m=xi(Error(u(422))),os(r,i,H,m)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(O=m.fallback,w=i.mode,m=eo({mode:"visible",children:m.children},w,0,null),O=gn(O,w,H,null),O.flags|=2,m.return=i,O.return=i,m.sibling=O,i.child=m,(i.mode&1)!==0&&$i(i,r.child,null,H),i.child.memoizedState=Us(H),i.memoizedState=Sn,O);if((i.mode&1)===0)return os(r,i,H,null);if(zi(w))return m=ca(w).digest,O=Error(u(419)),m=xi(O,m,void 0),os(r,i,H,m);if(h=(H&r.childLanes)!==0,Kt||h){if(m=pt,m!==null){switch(H&-H){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(m.suspendedLanes|H))!==0?0:w,w!==0&&w!==O.retryLane&&(O.retryLane=w,br(r,w),En(m,r,w,-1))}return Js(),m=xi(Error(u(421))),os(r,i,H,m)}return Cc(w)?(i.flags|=128,i.child=r.child,i=cd.bind(null,r),da(w,i),null):(r=O.treeContext,De&&(On=oh(w),hn=i,wt=!0,Pr=null,bo=!1,r!==null&&(Rn[Qn++]=Gn,Rn[Qn++]=Cr,Rn[Qn++]=Wt,Gn=r.id,Cr=r.overflow,Wt=i)),i=Ba(i,m.children),i.flags|=4096,i)}function Br(r,i,h){r.lanes|=i;var m=r.alternate;m!==null&&(m.lanes|=i),Ki(r.return,i,h)}function zs(r,i,h,m,w){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:w}:(O.isBackwards=i,O.rendering=null,O.renderingStartTime=0,O.last=m,O.tail=h,O.tailMode=w)}function Ga(r,i,h){var m=i.pendingProps,w=m.revealOrder,O=m.tail;if(rn(r,i,m.children,h),m=Rt.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Br(r,h,i);else if(r.tag===19)Br(r,h,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(Xe(Rt,m),(i.mode&1)===0)i.memoizedState=null;else switch(w){case"forwards":for(h=i.child,w=null;h!==null;)r=h.alternate,r!==null&&Ra(r)===null&&(w=h),h=h.sibling;h=w,h===null?(w=i.child,i.child=null):(w=h.sibling,h.sibling=null),zs(i,!1,w,h,O);break;case"backwards":for(h=null,w=i.child,i.child=null;w!==null;){if(r=w.alternate,r!==null&&Ra(r)===null){i.child=w;break}r=w.sibling,w.sibling=h,h=w,w=r}zs(i,!0,h,null,O);break;case"together":zs(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Mo(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function ri(r,i,h){if(r!==null&&(i.dependencies=r.dependencies),si|=i.lanes,(h&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(u(153));if(i.child!==null){for(r=i.child,h=Fi(r,r.pendingProps),i.child=h,h.return=i;r.sibling!==null;)r=r.sibling,h=h.sibling=Fi(r,r.pendingProps),h.return=i;h.sibling=null}return i.child}function Ti(r,i,h){switch(i.tag){case 3:bi(i),Hi();break;case 5:Gl(i);break;case 1:en(i.type)&&Es(i);break;case 4:Ta(i,i.stateNode.containerInfo);break;case 10:Hc(i,i.type._context,i.memoizedProps.value);break;case 13:var m=i.memoizedState;if(m!==null)return m.dehydrated!==null?(Xe(Rt,Rt.current&1),i.flags|=128,null):(h&i.child.childLanes)!==0?su(r,i,h):(Xe(Rt,Rt.current&1),r=ri(r,i,h),r!==null?r.sibling:null);Xe(Rt,Rt.current&1);break;case 19:if(m=(h&i.childLanes)!==0,(r.flags&128)!==0){if(m)return Ga(r,i,h);i.flags|=128}var w=i.memoizedState;if(w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Xe(Rt,Rt.current),m)break;return null;case 22:case 23:return i.lanes=0,mt(r,i,h)}return ri(r,i,h)}function Nn(r){r.flags|=4}function as(r,i){if(r!==null&&r.child===i.child)return!0;if((i.flags&16)!==0)return!1;for(r=i.child;r!==null;){if((r.flags&12854)!==0||(r.subtreeFlags&12854)!==0)return!1;r=r.sibling}return!0}var Ri,Oi,An,In;if(xe)Ri=function(r,i){for(var h=i.child;h!==null;){if(h.tag===5||h.tag===6)X(r,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break;for(;h.sibling===null;){if(h.return===null||h.return===i)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Oi=function(){},An=function(r,i,h,m,w){if(r=r.memoizedProps,r!==m){var O=i.stateNode,H=pr(fr.current);h=ce(O,h,r,m,w,H),(i.updateQueue=h)&&Nn(i)}},In=function(r,i,h,m){h!==m&&Nn(i)};else if(ze){Ri=function(r,i,h,m){for(var w=i.child;w!==null;){if(w.tag===5){var O=w.stateNode;h&&m&&(O=ua(O,w.type,w.memoizedProps,w)),X(r,O)}else if(w.tag===6)O=w.stateNode,h&&m&&(O=Ol(O,w.memoizedProps,w)),X(r,O);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)O=w.child,O!==null&&(O.return=w),Ri(r,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===i)break;for(;w.sibling===null;){if(w.return===null||w.return===i)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};var Ni=function(r,i,h,m){for(var w=i.child;w!==null;){if(w.tag===5){var O=w.stateNode;h&&m&&(O=ua(O,w.type,w.memoizedProps,w)),Rl(r,O)}else if(w.tag===6)O=w.stateNode,h&&m&&(O=Ol(O,w.memoizedProps,w)),Rl(r,O);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)O=w.child,O!==null&&(O.return=w),Ni(r,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===i)break;for(;w.sibling===null;){if(w.return===null||w.return===i)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};Oi=function(r,i){var h=i.stateNode;if(!as(r,i)){r=h.containerInfo;var m=Tl(r);Ni(m,i,!1,!1),h.pendingChildren=m,Nn(i),Ec(r,m)}},An=function(r,i,h,m,w){var O=r.stateNode,H=r.memoizedProps;if((r=as(r,i))&&H===m)i.stateNode=O;else{var se=i.stateNode,pe=pr(fr.current),Ee=null;H!==m&&(Ee=ce(se,h,H,m,w,pe)),r&&Ee===null?i.stateNode=O:(O=kc(O,Ee,h,H,m,i,r,se),ee(O,h,m,w,pe)&&Nn(i),i.stateNode=O,r?Nn(i):Ri(O,i,!1,!1))}},In=function(r,i,h,m){h!==m?(r=pr(ki.current),h=pr(fr.current),i.stateNode=ae(m,r,h,i),Nn(i)):i.stateNode=r.stateNode}}else Oi=function(){},An=function(){},In=function(){};function tr(r,i){if(!wt)switch(r.tailMode){case"hidden":i=r.tail;for(var h=null;i!==null;)i.alternate!==null&&(h=i),i=i.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function xt(r){var i=r.alternate!==null&&r.alternate.child===r.child,h=0,m=0;if(i)for(var w=r.child;w!==null;)h|=w.lanes|w.childLanes,m|=w.subtreeFlags&14680064,m|=w.flags&14680064,w.return=r,w=w.sibling;else for(w=r.child;w!==null;)h|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=r,w=w.sibling;return r.subtreeFlags|=m,r.childLanes=h,i}function ls(r,i,h){var m=i.pendingProps;switch(Po(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(i),null;case 1:return en(i.type)&&qi(),xt(i),null;case 3:return h=i.stateNode,Yi(),_t(zn),_t(_n),Hl(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(ka(i)?Nn(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pr!==null&&(el(Pr),Pr=null))),Oi(r,i),xt(i),null;case 5:ql(i),h=pr(ki.current);var w=i.type;if(r!==null&&i.stateNode!=null)An(r,i,w,m,h),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(u(166));return xt(i),null}if(r=pr(fr.current),ka(i)){if(!De)throw Error(u(175));r=Bi(i.stateNode,i.type,i.memoizedProps,h,r,i,!bo),i.updateQueue=r,r!==null&&Nn(i)}else{var O=M(w,m,h,r,i);Ri(O,i,!1,!1),i.stateNode=O,ee(O,w,m,h,r)&&Nn(i)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return xt(i),null;case 6:if(r&&i.stateNode!=null)In(r,i,r.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(u(166));if(r=pr(ki.current),h=pr(fr.current),ka(i)){if(!De)throw Error(u(176));if(r=i.stateNode,h=i.memoizedProps,(m=xc(r,h,i,!bo))&&(w=hn,w!==null))switch(w.tag){case 3:uh(w.stateNode.containerInfo,r,h,(w.mode&1)!==0);break;case 5:It(w.type,w.memoizedProps,w.stateNode,r,h,(w.mode&1)!==0)}m&&Nn(i)}else i.stateNode=ae(m,r,h,i)}return xt(i),null;case 13:if(_t(Rt),m=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wt&&On!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Bc(),Hi(),i.flags|=98560,w=!1;else if(w=ka(i),m!==null&&m.dehydrated!==null){if(r===null){if(!w)throw Error(u(318));if(!De)throw Error(u(344));if(w=i.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(u(317));Pc(w,i)}else Hi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;xt(i),w=!1}else Pr!==null&&(el(Pr),Pr=null),w=!0;if(!w)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=h,i):(h=m!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Rt.current&1)!==0?bt===0&&(bt=3):Js())),i.updateQueue!==null&&(i.flags|=4),xt(i),null);case 4:return Yi(),Oi(r,i),r===null&&Ve(i.stateNode.containerInfo),xt(i),null;case 10:return To(i.type._context),xt(i),null;case 17:return en(i.type)&&qi(),xt(i),null;case 19:if(_t(Rt),w=i.memoizedState,w===null)return xt(i),null;if(m=(i.flags&128)!==0,O=w.rendering,O===null)if(m)tr(w,!1);else{if(bt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(O=Ra(r),O!==null){for(i.flags|=128,tr(w,!1),r=O.updateQueue,r!==null&&(i.updateQueue=r,i.flags|=4),i.subtreeFlags=0,r=h,h=i.child;h!==null;)m=h,w=r,m.flags&=14680066,O=m.alternate,O===null?(m.childLanes=0,m.lanes=w,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=O.childLanes,m.lanes=O.lanes,m.child=O.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=O.memoizedProps,m.memoizedState=O.memoizedState,m.updateQueue=O.updateQueue,m.type=O.type,w=O.dependencies,m.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),h=h.sibling;return Xe(Rt,Rt.current&1|2),i.child}r=r.sibling}w.tail!==null&&tn()>Ho&&(i.flags|=128,m=!0,tr(w,!1),i.lanes=4194304)}else{if(!m)if(r=Ra(O),r!==null){if(i.flags|=128,m=!0,r=r.updateQueue,r!==null&&(i.updateQueue=r,i.flags|=4),tr(w,!0),w.tail===null&&w.tailMode==="hidden"&&!O.alternate&&!wt)return xt(i),null}else 2*tn()-w.renderingStartTime>Ho&&h!==1073741824&&(i.flags|=128,m=!0,tr(w,!1),i.lanes=4194304);w.isBackwards?(O.sibling=i.child,i.child=O):(r=w.last,r!==null?r.sibling=O:i.child=O,w.last=O)}return w.tail!==null?(i=w.tail,w.rendering=i,w.tail=i.sibling,w.renderingStartTime=tn(),i.sibling=null,r=Rt.current,Xe(Rt,m?r&1|2:r&1),i):(xt(i),null);case 22:case 23:return tl(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(Yt&1073741824)!==0&&(xt(i),xe&&i.subtreeFlags&6&&(i.flags|=8192)):xt(i),null;case 24:return null;case 25:return null}throw Error(u(156,i.tag))}function rd(r,i){switch(Po(i),i.tag){case 1:return en(i.type)&&qi(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Yi(),_t(zn),_t(_n),Hl(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return ql(i),null;case 13:if(_t(Rt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(u(340));Hi()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return _t(Rt),null;case 4:return Yi(),null;case 10:return To(i.type._context),null;case 22:case 23:return tl(),null;case 24:return null;default:return null}}var Bs=!1,sn=!1,nr=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function ut(r,i){var h=r.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(m){kt(r,i,m)}else h.current=null}function rr(r,i,h){try{h()}catch(m){kt(r,i,m)}}var ou=!1;function id(r,i){for(V(r.containerInfo),Pe=i;Pe!==null;)if(r=Pe,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Pe=i;else for(;Pe!==null;){r=Pe;try{var h=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,w=h.memoizedState,O=r.stateNode,H=O.getSnapshotBeforeUpdate(r.elementType===r.type?m:er(r.type,m),w);O.__reactInternalSnapshotBeforeUpdate=H}break;case 3:xe&&ws(r.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(se){kt(r,r.return,se)}if(i=r.sibling,i!==null){i.return=r.return,Pe=i;break}Pe=r.return}return h=ou,ou=!1,h}function us(r,i,h){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&r)===r){var O=w.destroy;w.destroy=void 0,O!==void 0&&rr(i,h,O)}w=w.next}while(w!==m)}}function Gs(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var h=i=i.next;do{if((h.tag&r)===r){var m=h.create;h.destroy=m()}h=h.next}while(h!==i)}}function qa(r){var i=r.ref;if(i!==null){var h=r.stateNode;switch(r.tag){case 5:r=oe(h);break;default:r=h}typeof i=="function"?i(r):i.current=r}}function Uo(r){var i=r.alternate;i!==null&&(r.alternate=null,Uo(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&ot(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function au(r){return r.tag===5||r.tag===3||r.tag===4}function cs(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||au(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function zo(r,i,h){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?Ui(h,r,i):Kn(h,r);else if(m!==4&&(r=r.child,r!==null))for(zo(r,i,h),r=r.sibling;r!==null;)zo(r,i,h),r=r.sibling}function lu(r,i,h){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?vo(h,r,i):yn(h,r);else if(m!==4&&(r=r.child,r!==null))for(lu(r,i,h),r=r.sibling;r!==null;)lu(r,i,h),r=r.sibling}var Lt=null,Vn=!1;function Tr(r,i,h){for(h=h.child;h!==null;)Va(r,i,h),h=h.sibling}function Va(r,i,h){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(vi,h)}catch{}switch(h.tag){case 5:sn||ut(h,i);case 6:if(xe){var m=Lt,w=Vn;Lt=null,Tr(r,i,h),Lt=m,Vn=w,Lt!==null&&(Vn?yo(Lt,h.stateNode):Cl(Lt,h.stateNode))}else Tr(r,i,h);break;case 18:xe&&Lt!==null&&(Vn?Oc(Lt,h.stateNode):Rc(Lt,h.stateNode));break;case 4:xe?(m=Lt,w=Vn,Lt=h.stateNode.containerInfo,Vn=!0,Tr(r,i,h),Lt=m,Vn=w):(ze&&(m=h.stateNode.containerInfo,w=Tl(m),la(m,w)),Tr(r,i,h));break;case 0:case 11:case 14:case 15:if(!sn&&(m=h.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){w=m=m.next;do{var O=w,H=O.destroy;O=O.tag,H!==void 0&&((O&2)!==0||(O&4)!==0)&&rr(h,i,H),w=w.next}while(w!==m)}Tr(r,i,h);break;case 1:if(!sn&&(ut(h,i),m=h.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=h.memoizedProps,m.state=h.memoizedState,m.componentWillUnmount()}catch(se){kt(h,i,se)}Tr(r,i,h);break;case 21:Tr(r,i,h);break;case 22:h.mode&1?(sn=(m=sn)||h.memoizedState!==null,Tr(r,i,h),sn=m):Tr(r,i,h);break;default:Tr(r,i,h)}}function ds(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var h=r.stateNode;h===null&&(h=r.stateNode=new nr),i.forEach(function(m){var w=mh.bind(null,r,m);h.has(m)||(h.add(m),m.then(w,w))})}}function mr(r,i){var h=i.deletions;if(h!==null)for(var m=0;m<h.length;m++){var w=h[m];try{var O=r,H=i;if(xe){var se=H;e:for(;se!==null;){switch(se.tag){case 5:Lt=se.stateNode,Vn=!1;break e;case 3:Lt=se.stateNode.containerInfo,Vn=!0;break e;case 4:Lt=se.stateNode.containerInfo,Vn=!0;break e}se=se.return}if(Lt===null)throw Error(u(160));Va(O,H,w),Lt=null,Vn=!1}else Va(O,H,w);var pe=w.alternate;pe!==null&&(pe.return=null),w.return=null}catch(Ee){kt(w,i,Ee)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Bo(i,r),i=i.sibling}function Bo(r,i){var h=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(mr(i,r),ir(r),m&4){try{us(3,r,r.return),Gs(3,r)}catch(be){kt(r,r.return,be)}try{us(5,r,r.return)}catch(be){kt(r,r.return,be)}}break;case 1:mr(i,r),ir(r),m&512&&h!==null&&ut(h,h.return);break;case 5:if(mr(i,r),ir(r),m&512&&h!==null&&ut(h,h.return),xe){if(r.flags&32){var w=r.stateNode;try{aa(w)}catch(be){kt(r,r.return,be)}}if(m&4&&(w=r.stateNode,w!=null)){var O=r.memoizedProps;if(h=h!==null?h.memoizedProps:O,m=r.type,i=r.updateQueue,r.updateQueue=null,i!==null)try{Mi(w,i,m,h,O,r)}catch(be){kt(r,r.return,be)}}}break;case 6:if(mr(i,r),ir(r),m&4&&xe){if(r.stateNode===null)throw Error(u(162));w=r.stateNode,O=r.memoizedProps,h=h!==null?h.memoizedProps:O;try{Mt(w,h,O)}catch(be){kt(r,r.return,be)}}break;case 3:if(mr(i,r),ir(r),m&4){if(xe&&De&&h!==null&&h.memoizedState.isDehydrated)try{bc(i.containerInfo)}catch(be){kt(r,r.return,be)}if(ze){w=i.containerInfo,O=i.pendingChildren;try{la(w,O)}catch(be){kt(r,r.return,be)}}}break;case 4:if(mr(i,r),ir(r),m&4&&ze){O=r.stateNode,w=O.containerInfo,O=O.pendingChildren;try{la(w,O)}catch(be){kt(r,r.return,be)}}break;case 13:mr(i,r),ir(r),w=r.child,w.flags&8192&&(O=w.memoizedState!==null,w.stateNode.isHidden=O,!O||w.alternate!==null&&w.alternate.memoizedState!==null||(Ks=tn())),m&4&&ds(r);break;case 22:var H=h!==null&&h.memoizedState!==null;if(r.mode&1?(sn=(h=sn)||H,mr(i,r),sn=h):mr(i,r),ir(r),m&8192){if(h=r.memoizedState!==null,(r.stateNode.isHidden=h)&&!H&&(r.mode&1)!==0)for(Pe=r,m=r.child;m!==null;){for(i=Pe=m;Pe!==null;){H=Pe;var se=H.child;switch(H.tag){case 0:case 11:case 14:case 15:us(4,H,H.return);break;case 1:ut(H,H.return);var pe=H.stateNode;if(typeof pe.componentWillUnmount=="function"){var Ee=H,Ne=H.return;try{var We=Ee;pe.props=We.memoizedProps,pe.state=We.memoizedState,pe.componentWillUnmount()}catch(be){kt(Ee,Ne,be)}}break;case 5:ut(H,H.return);break;case 22:if(H.memoizedState!==null){$a(i);continue}}se!==null?(se.return=H,Pe=se):$a(i)}m=m.sibling}if(xe){e:if(m=null,xe)for(i=r;;){if(i.tag===5){if(m===null){m=i;try{w=i.stateNode,h?xl(w):bl(i.stateNode,i.memoizedProps)}catch(be){kt(r,r.return,be)}}}else if(i.tag===6){if(m===null)try{O=i.stateNode,h?Pl(O):_s(O,i.memoizedProps)}catch(be){kt(r,r.return,be)}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;m===i&&(m=null),i=i.return}m===i&&(m=null),i.sibling.return=i.return,i=i.sibling}}}break;case 19:mr(i,r),ir(r),m&4&&ds(r);break;case 21:break;default:mr(i,r),ir(r)}}function ir(r){var i=r.flags;if(i&2){try{if(xe){e:{for(var h=r.return;h!==null;){if(au(h)){var m=h;break e}h=h.return}throw Error(u(160))}switch(m.tag){case 5:var w=m.stateNode;m.flags&32&&(aa(w),m.flags&=-33);var O=cs(r);lu(r,O,w);break;case 3:case 4:var H=m.stateNode.containerInfo,se=cs(r);zo(r,se,H);break;default:throw Error(u(161))}}}catch(pe){kt(r,r.return,pe)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function qs(r,i,h){Pe=r,Ha(r)}function Ha(r,i,h){for(var m=(r.mode&1)!==0;Pe!==null;){var w=Pe,O=w.child;if(w.tag===22&&m){var H=w.memoizedState!==null||Bs;if(!H){var se=w.alternate,pe=se!==null&&se.memoizedState!==null||sn;se=Bs;var Ee=sn;if(Bs=H,(sn=pe)&&!Ee)for(Pe=w;Pe!==null;)H=Pe,pe=H.child,H.tag===22&&H.memoizedState!==null?Ka(w):pe!==null?(pe.return=H,Pe=pe):Ka(w);for(;O!==null;)Pe=O,Ha(O),O=O.sibling;Pe=w,Bs=se,sn=Ee}Wa(r)}else(w.subtreeFlags&8772)!==0&&O!==null?(O.return=w,Pe=O):Wa(r)}}function Wa(r){for(;Pe!==null;){var i=Pe;if((i.flags&8772)!==0){var h=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:sn||Gs(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!sn)if(h===null)m.componentDidMount();else{var w=i.elementType===i.type?h.memoizedProps:er(i.type,h.memoizedProps);m.componentDidUpdate(w,h.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var O=i.updateQueue;O!==null&&$c(i,O,m);break;case 3:var H=i.updateQueue;if(H!==null){if(h=null,i.child!==null)switch(i.child.tag){case 5:h=oe(i.child.stateNode);break;case 1:h=i.child.stateNode}$c(i,H,h)}break;case 5:var se=i.stateNode;h===null&&i.flags&4&&Ut(se,i.type,i.memoizedProps,i);break;case 6:break;case 4:break;case 12:break;case 13:if(De&&i.memoizedState===null){var pe=i.alternate;if(pe!==null){var Ee=pe.memoizedState;if(Ee!==null){var Ne=Ee.dehydrated;Ne!==null&&Tc(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}sn||i.flags&512&&qa(i)}catch(We){kt(i,i.return,We)}}if(i===r){Pe=null;break}if(h=i.sibling,h!==null){h.return=i.return,Pe=h;break}Pe=i.return}}function $a(r){for(;Pe!==null;){var i=Pe;if(i===r){Pe=null;break}var h=i.sibling;if(h!==null){h.return=i.return,Pe=h;break}Pe=i.return}}function Ka(r){for(;Pe!==null;){var i=Pe;try{switch(i.tag){case 0:case 11:case 15:var h=i.return;try{Gs(4,i)}catch(pe){kt(i,h,pe)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var w=i.return;try{m.componentDidMount()}catch(pe){kt(i,w,pe)}}var O=i.return;try{qa(i)}catch(pe){kt(i,O,pe)}break;case 5:var H=i.return;try{qa(i)}catch(pe){kt(i,H,pe)}}}catch(pe){kt(i,i.return,pe)}if(i===r){Pe=null;break}var se=i.sibling;if(se!==null){se.return=i.return,Pe=se;break}Pe=i.return}}var ii=0,Ln=1,Gr=2,Vs=3,Go=4;if(typeof Symbol=="function"&&Symbol.for){var sr=Symbol.for;ii=sr("selector.component"),Ln=sr("selector.has_pseudo_class"),Gr=sr("selector.role"),Vs=sr("selector.test_id"),Go=sr("selector.text")}function qr(r){var i=it(r);if(i!=null){if(typeof i.memoizedProps["data-testname"]!="string")throw Error(u(364));return i}if(r=cr(r),r===null)throw Error(u(362));return r.stateNode.current}function qo(r,i){switch(i.$$typeof){case ii:if(r.type===i.value)return!0;break;case Ln:e:{i=i.value,r=[r,0];for(var h=0;h<r.length;){var m=r[h++],w=r[h++],O=i[w];if(m.tag!==5||!ln(m)){for(;O!=null&&qo(m,O);)w++,O=i[w];if(w===i.length){i=!0;break e}else for(m=m.child;m!==null;)r.push(m,w),m=m.sibling}}i=!1}return i;case Gr:if(r.tag===5&&Lr(r.stateNode,i.value))return!0;break;case Go:if((r.tag===5||r.tag===6)&&(r=Un(r),r!==null&&0<=r.indexOf(i.value)))return!0;break;case Vs:if(r.tag===5&&(r=r.memoizedProps["data-testname"],typeof r=="string"&&r.toLowerCase()===i.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function Ya(r){switch(r.$$typeof){case ii:return"<"+(W(r.value)||"Unknown")+">";case Ln:return":has("+(Ya(r)||"")+")";case Gr:return'[role="'+r.value+'"]';case Go:return'"'+r.value+'"';case Vs:return'[data-testname="'+r.value+'"]';default:throw Error(u(365))}}function Vr(r,i){var h=[];r=[r,0];for(var m=0;m<r.length;){var w=r[m++],O=r[m++],H=i[O];if(w.tag!==5||!ln(w)){for(;H!=null&&qo(w,H);)O++,H=i[O];if(O===i.length)h.push(w);else for(w=w.child;w!==null;)r.push(w,O),w=w.sibling}}return h}function Hr(r,i){if(!Ot)throw Error(u(363));r=qr(r),r=Vr(r,i),i=[],r=Array.from(r);for(var h=0;h<r.length;){var m=r[h++];if(m.tag===5)ln(m)||i.push(m.stateNode);else for(m=m.child;m!==null;)r.push(m),m=m.sibling}return i}var Qa=Math.ceil,Vo=p.ReactCurrentDispatcher,Hs=p.ReactCurrentOwner,Nt=p.ReactCurrentBatchConfig,Ke=0,pt=null,Pt=null,jt=0,Yt=0,Ai=cn(0),bt=0,Ws=null,si=0,vt=0,$s=0,hs=null,kn=null,Ks=0,Ho=1/0,jn=null;function ht(){Ho=tn()+500}var At=!1,Bt=null,Rr=null,Ii=!1,vr=null,Xa=0,Gt=0,Wo=null,Ys=-1,Qs=0;function St(){return(Ke&6)!==0?tn():Ys!==-1?Ys:Ys=tn()}function Qt(r){return(r.mode&1)===0?1:(Ke&2)!==0&&jt!==0?jt&-jt:fh.transition!==null?(Qs===0&&(Qs=ga()),Qs):(r=Je,r!==0?r:Dt())}function En(r,i,h,m){if(50<Gt)throw Gt=0,Wo=null,Error(u(185));hr(r,h,m),((Ke&2)===0||r!==pt)&&(r===pt&&((Ke&2)===0&&(vt|=h),bt===4&&oi(r,jt)),Cn(r,m),h===1&&Ke===0&&(i.mode&1)===0&&(ht(),Rs&&dn()))}function Cn(r,i){var h=r.callbackNode;Lc(r,i);var m=xs(r,r===pt?jt:0);if(m===0)h!==null&&jc(h),r.callbackNode=null,r.callbackPriority=0;else if(i=m&-m,r.callbackPriority!==i){if(h!=null&&jc(h),i===1)r.tag===0?Dc(uu.bind(null,r)):wa(uu.bind(null,r)),Et?Ir(function(){(Ke&6)===0&&dn()}):Dr(ma,dn),h=null;else{switch(bs(m)){case 1:h=ma;break;case 4:h=va;break;case 16:h=ya;break;case 536870912:h=hh;break;default:h=ya}h=mu(h,Ja.bind(null,r))}r.callbackPriority=i,r.callbackNode=h}}function Ja(r,i){if(Ys=-1,Qs=0,(Ke&6)!==0)throw Error(u(327));var h=r.callbackNode;if(ai()&&r.callbackNode!==h)return null;var m=xs(r,r===pt?jt:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||i)i=fs(r,m);else{i=m;var w=Ke;Ke|=2;var O=du();(pt!==r||jt!==i)&&(jn=null,ht(),Li(r,i));do try{hu();break}catch(se){Xs(r,se)}while(!0);Ul(),Vo.current=O,Ke=w,Pt!==null?i=0:(pt=null,jt=0,i=bt)}if(i!==0){if(i===2&&(w=pa(r),w!==0&&(m=w,i=Za(r,w))),i===1)throw h=Ws,Li(r,0),oi(r,m),Cn(r,tn()),h;if(i===6)oi(r,m);else{if(w=r.current.alternate,(m&30)===0&&!sd(w)&&(i=fs(r,m),i===2&&(O=pa(r),O!==0&&(m=O,i=Za(r,O))),i===1))throw h=Ws,Li(r,0),oi(r,m),Cn(r,tn()),h;switch(r.finishedWork=w,r.finishedLanes=m,i){case 0:case 1:throw Error(u(345));case 2:ji(r,kn,jn);break;case 3:if(oi(r,m),(m&130023424)===m&&(i=Ks+500-tn(),10<i)){if(xs(r,0)!==0)break;if(w=r.suspendedLanes,(w&m)!==m){St(),r.pingedLanes|=r.suspendedLanes&w;break}r.timeoutHandle=Q(ji.bind(null,r,kn,jn),i);break}ji(r,kn,jn);break;case 4:if(oi(r,m),(m&4194240)===m)break;for(i=r.eventTimes,w=-1;0<m;){var H=31-Yn(m);O=1<<H,H=i[H],H>w&&(w=H),m&=~O}if(m=w,m=tn()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Qa(m/1960))-m,10<m){r.timeoutHandle=Q(ji.bind(null,r,kn,jn),m);break}ji(r,kn,jn);break;case 5:ji(r,kn,jn);break;default:throw Error(u(329))}}}return Cn(r,tn()),r.callbackNode===h?Ja.bind(null,r):null}function Za(r,i){var h=hs;return r.current.memoizedState.isDehydrated&&(Li(r,i).flags|=256),r=fs(r,i),r!==2&&(i=kn,kn=h,i!==null&&el(i)),r}function el(r){kn===null?kn=r:kn.push.apply(kn,r)}function sd(r){for(var i=r;;){if(i.flags&16384){var h=i.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var m=0;m<h.length;m++){var w=h[m],O=w.getSnapshot;w=w.value;try{if(!Er(O(),w))return!1}catch{return!1}}}if(h=i.child,i.subtreeFlags&16384&&h!==null)h.return=i,i=h;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function oi(r,i){for(i&=~$s,i&=~vt,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var h=31-Yn(i),m=1<<h;r[h]=-1,i&=~m}}function uu(r){if((Ke&6)!==0)throw Error(u(327));ai();var i=xs(r,0);if((i&1)===0)return Cn(r,tn()),null;var h=fs(r,i);if(r.tag!==0&&h===2){var m=pa(r);m!==0&&(i=m,h=Za(r,m))}if(h===1)throw h=Ws,Li(r,0),oi(r,i),Cn(r,tn()),h;if(h===6)throw Error(u(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,ji(r,kn,jn),Cn(r,tn()),null}function cu(r){vr!==null&&vr.tag===0&&(Ke&6)===0&&ai();var i=Ke;Ke|=1;var h=Nt.transition,m=Je;try{if(Nt.transition=null,Je=1,r)return r()}finally{Je=m,Nt.transition=h,Ke=i,(Ke&6)===0&&dn()}}function tl(){Yt=Ai.current,_t(Ai)}function Li(r,i){r.finishedWork=null,r.finishedLanes=0;var h=r.timeoutHandle;if(h!==ve&&(r.timeoutHandle=ve,ie(h)),Pt!==null)for(h=Pt.return;h!==null;){var m=h;switch(Po(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&qi();break;case 3:Yi(),_t(zn),_t(_n),Hl();break;case 5:ql(m);break;case 4:Yi();break;case 13:_t(Rt);break;case 19:_t(Rt);break;case 10:To(m.type._context);break;case 22:case 23:tl()}h=h.return}if(pt=r,Pt=r=Fi(r.current,null),jt=Yt=i,bt=0,Ws=null,$s=vt=si=0,kn=hs=null,_i!==null){for(i=0;i<_i.length;i++)if(h=_i[i],m=h.interleaved,m!==null){h.interleaved=null;var w=m.next,O=h.pending;if(O!==null){var H=O.next;O.next=w,m.next=H}h.pending=m}_i=null}return r}function Xs(r,i){do{var h=Pt;try{if(Ul(),qn.current=ns,js){for(var m=Ct.memoizedState;m!==null;){var w=m.queue;w!==null&&(w.pending=null),m=m.next}js=!1}if(Ei=0,$t=zt=Ct=null,Oo=!1,No=0,Hs.current=null,h===null||h.return===null){bt=1,Ws=i,Pt=null;break}e:{var O=r,H=h.return,se=h,pe=i;if(i=jt,se.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Ee=pe,Ne=se,We=Ne.tag;if((Ne.mode&1)===0&&(We===0||We===11||We===15)){var be=Ne.alternate;be?(Ne.updateQueue=be.updateQueue,Ne.memoizedState=be.memoizedState,Ne.lanes=be.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var yt=td(H);if(yt!==null){yt.flags&=-257,Pi(yt,H,se,O,i),yt.mode&1&&ed(O,Ee,i),i=yt,pe=Ee;var ct=i.updateQueue;if(ct===null){var Fn=new Set;Fn.add(pe),i.updateQueue=Fn}else ct.add(pe);break e}else{if((i&1)===0){ed(O,Ee,i),Js();break e}pe=Error(u(426))}}else if(wt&&se.mode&1){var Wr=td(H);if(Wr!==null){(Wr.flags&65536)===0&&(Wr.flags|=256),Pi(Wr,H,se,O,i),Dl(rs(pe,se));break e}}O=pe=rs(pe,se),bt!==4&&(bt=2),hs===null?hs=[O]:hs.push(O),O=H;do{switch(O.tag){case 3:O.flags|=65536,i&=-i,O.lanes|=i;var he=Ur(O,pe,i);Is(O,he);break e;case 1:se=pe;var le=O.type,ge=O.stateNode;if((O.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Rr===null||!Rr.has(ge)))){O.flags|=65536,i&=-i,O.lanes|=i;var Te=Ua(O,se,i);Is(O,Te);break e}}O=O.return}while(O!==null)}pu(h)}catch(Me){i=Me,Pt===h&&h!==null&&(Pt=h=h.return);continue}break}while(!0)}function du(){var r=Vo.current;return Vo.current=ns,r===null?ns:r}function Js(){(bt===0||bt===3||bt===2)&&(bt=4),pt===null||(si&268435455)===0&&(vt&268435455)===0||oi(pt,jt)}function fs(r,i){var h=Ke;Ke|=2;var m=du();(pt!==r||jt!==i)&&(jn=null,Li(r,i));do try{od();break}catch(w){Xs(r,w)}while(!0);if(Ul(),Ke=h,Vo.current=m,Pt!==null)throw Error(u(261));return pt=null,jt=0,bt}function od(){for(;Pt!==null;)fu(Pt)}function hu(){for(;Pt!==null&&!Fc();)fu(Pt)}function fu(r){var i=dd(r.alternate,r,Yt);r.memoizedProps=r.pendingProps,i===null?pu(r):Pt=i,Hs.current=null}function pu(r){var i=r;do{var h=i.alternate;if(r=i.return,(i.flags&32768)===0){if(h=ls(h,i,Yt),h!==null){Pt=h;return}}else{if(h=rd(h,i),h!==null){h.flags&=32767,Pt=h;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{bt=6,Pt=null;return}}if(i=i.sibling,i!==null){Pt=i;return}Pt=i=r}while(i!==null);bt===0&&(bt=5)}function ji(r,i,h){var m=Je,w=Nt.transition;try{Nt.transition=null,Je=1,ad(r,i,h,m)}finally{Nt.transition=w,Je=m}return null}function ad(r,i,h,m){do ai();while(vr!==null);if((Ke&6)!==0)throw Error(u(327));h=r.finishedWork;var w=r.finishedLanes;if(h===null)return null;if(r.finishedWork=null,r.finishedLanes=0,h===r.current)throw Error(u(177));r.callbackNode=null,r.callbackPriority=0;var O=h.lanes|h.childLanes;if(mi(r,O),r===pt&&(Pt=pt=null,jt=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Ii||(Ii=!0,mu(ya,function(){return ai(),null})),O=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||O){O=Nt.transition,Nt.transition=null;var H=Je;Je=1;var se=Ke;Ke|=4,Hs.current=null,id(r,h),Bo(h,r),q(r.containerInfo),r.current=h,qs(h),Eo(),Ke=se,Je=H,Nt.transition=O}else r.current=h;if(Ii&&(Ii=!1,vr=r,Xa=w),O=r.pendingLanes,O===0&&(Rr=null),Ts(h.stateNode),Cn(r,tn()),i!==null)for(m=r.onRecoverableError,h=0;h<i.length;h++)w=i[h],m(w.value,{componentStack:w.stack,digest:w.digest});if(At)throw At=!1,r=Bt,Bt=null,r;return(Xa&1)!==0&&r.tag!==0&&ai(),O=r.pendingLanes,(O&1)!==0?r===Wo?Gt++:(Gt=0,Wo=r):Gt=0,dn(),null}function ai(){if(vr!==null){var r=bs(Xa),i=Nt.transition,h=Je;try{if(Nt.transition=null,Je=16>r?16:r,vr===null)var m=!1;else{if(r=vr,vr=null,Xa=0,(Ke&6)!==0)throw Error(u(331));var w=Ke;for(Ke|=4,Pe=r.current;Pe!==null;){var O=Pe,H=O.child;if((Pe.flags&16)!==0){var se=O.deletions;if(se!==null){for(var pe=0;pe<se.length;pe++){var Ee=se[pe];for(Pe=Ee;Pe!==null;){var Ne=Pe;switch(Ne.tag){case 0:case 11:case 15:us(8,Ne,O)}var We=Ne.child;if(We!==null)We.return=Ne,Pe=We;else for(;Pe!==null;){Ne=Pe;var be=Ne.sibling,yt=Ne.return;if(Uo(Ne),Ne===Ee){Pe=null;break}if(be!==null){be.return=yt,Pe=be;break}Pe=yt}}}var ct=O.alternate;if(ct!==null){var Fn=ct.child;if(Fn!==null){ct.child=null;do{var Wr=Fn.sibling;Fn.sibling=null,Fn=Wr}while(Fn!==null)}}Pe=O}}if((O.subtreeFlags&2064)!==0&&H!==null)H.return=O,Pe=H;else e:for(;Pe!==null;){if(O=Pe,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:us(9,O,O.return)}var he=O.sibling;if(he!==null){he.return=O.return,Pe=he;break e}Pe=O.return}}var le=r.current;for(Pe=le;Pe!==null;){H=Pe;var ge=H.child;if((H.subtreeFlags&2064)!==0&&ge!==null)ge.return=H,Pe=ge;else e:for(H=le;Pe!==null;){if(se=Pe,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:Gs(9,se)}}catch(Me){kt(se,se.return,Me)}if(se===H){Pe=null;break e}var Te=se.sibling;if(Te!==null){Te.return=se.return,Pe=Te;break e}Pe=se.return}}if(Ke=w,dn(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(vi,r)}catch{}m=!0}return m}finally{Je=h,Nt.transition=i}}return!1}function gu(r,i,h){i=rs(h,i),i=Ur(r,i,1),r=ei(r,i,1),i=St(),r!==null&&(hr(r,1,i),Cn(r,i))}function kt(r,i,h){if(r.tag===3)gu(r,r,h);else for(;i!==null;){if(i.tag===3){gu(i,r,h);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Rr===null||!Rr.has(m))){r=rs(h,r),r=Ua(i,r,1),i=ei(i,r,1),r=St(),i!==null&&(hr(i,1,r),Cn(i,r));break}}i=i.return}}function ld(r,i,h){var m=r.pingCache;m!==null&&m.delete(i),i=St(),r.pingedLanes|=r.suspendedLanes&h,pt===r&&(jt&h)===h&&(bt===4||bt===3&&(jt&130023424)===jt&&500>tn()-Ks?Li(r,0):$s|=h),Cn(r,i)}function ud(r,i){i===0&&((r.mode&1)===0?i=1:(i=ko,ko<<=1,(ko&130023424)===0&&(ko=4194304)));var h=St();r=br(r,i),r!==null&&(hr(r,i,h),Cn(r,h))}function cd(r){var i=r.memoizedState,h=0;i!==null&&(h=i.retryLane),ud(r,h)}function mh(r,i){var h=0;switch(r.tag){case 13:var m=r.stateNode,w=r.memoizedState;w!==null&&(h=w.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(u(314))}m!==null&&m.delete(i),ud(r,h)}var dd;dd=function(r,i,h){if(r!==null)if(r.memoizedProps!==i.pendingProps||zn.current)Kt=!0;else{if((r.lanes&h)===0&&(i.flags&128)===0)return Kt=!1,Ti(r,i,h);Kt=(r.flags&131072)!==0}else Kt=!1,wt&&(i.flags&1048576)!==0&&Mc(i,Vi,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;Mo(r,i),r=i.pendingProps;var w=Qr(i,_n.current);As(i,h),w=Ao(null,i,m,r,w,h);var O=Oa();return i.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,en(m)?(O=!0,Es(i)):O=!1,i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Bl(i),w.updater=jo,i.stateNode=w,w._reactInternals=i,Mr(i,m,r,h),i=wn(null,i,m,!0,O,h)):(i.tag=0,wt&&O&&xo(i),rn(null,i,w,h),i=i.child),i;case 16:m=i.elementType;e:{switch(Mo(r,i),r=i.pendingProps,w=m._init,m=w(m._payload),i.type=m,w=i.tag=vh(m),r=er(m,r),w){case 0:i=zr(null,i,m,r,h);break e;case 1:i=pn(null,i,m,r,h);break e;case 11:i=za(null,i,m,r,h);break e;case 14:i=is(null,i,m,er(m.type,r),h);break e}throw Error(u(306,m,""))}return i;case 0:return m=i.type,w=i.pendingProps,w=i.elementType===m?w:er(m,w),zr(r,i,m,w,h);case 1:return m=i.type,w=i.pendingProps,w=i.elementType===m?w:er(m,w),pn(r,i,m,w,h);case 3:e:{if(bi(i),r===null)throw Error(u(387));m=i.pendingProps,O=i.memoizedState,w=O.element,Wc(r,i),wi(i,m,null,h);var H=i.memoizedState;if(m=H.element,De&&O.isDehydrated)if(O={element:m,isDehydrated:!1,cache:H.cache,pendingSuspenseBoundaries:H.pendingSuspenseBoundaries,transitions:H.transitions},i.updateQueue.baseState=O,i.memoizedState=O,i.flags&256){w=rs(Error(u(423)),i),i=ss(r,i,m,h,w);break e}else if(m!==w){w=rs(Error(u(424)),i),i=ss(r,i,m,h,w);break e}else for(De&&(On=sh(i.stateNode.containerInfo),hn=i,wt=!0,Pr=null,bo=!1),h=Vc(i,null,m,h),i.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Hi(),m===w){i=ri(r,i,h);break e}rn(r,i,m,h)}i=i.child}return i;case 5:return Gl(i),r===null&&Fl(i),m=i.type,w=i.pendingProps,O=r!==null?r.memoizedProps:null,H=w.children,me(m,w)?H=null:O!==null&&me(m,O)&&(i.flags|=32),ft(r,i),rn(r,i,H,h),i.child;case 6:return r===null&&Fl(i),null;case 13:return su(r,i,h);case 4:return Ta(i,i.stateNode.containerInfo),m=i.pendingProps,r===null?i.child=$i(i,null,m,h):rn(r,i,m,h),i.child;case 11:return m=i.type,w=i.pendingProps,w=i.elementType===m?w:er(m,w),za(r,i,m,w,h);case 7:return rn(r,i,i.pendingProps,h),i.child;case 8:return rn(r,i,i.pendingProps.children,h),i.child;case 12:return rn(r,i,i.pendingProps.children,h),i.child;case 10:e:{if(m=i.type._context,w=i.pendingProps,O=i.memoizedProps,H=w.value,Hc(i,m,H),O!==null)if(Er(O.value,H)){if(O.children===w.children&&!zn.current){i=ri(r,i,h);break e}}else for(O=i.child,O!==null&&(O.return=i);O!==null;){var se=O.dependencies;if(se!==null){H=O.child;for(var pe=se.firstContext;pe!==null;){if(pe.context===m){if(O.tag===1){pe=Zr(-1,h&-h),pe.tag=2;var Ee=O.updateQueue;if(Ee!==null){Ee=Ee.shared;var Ne=Ee.pending;Ne===null?pe.next=pe:(pe.next=Ne.next,Ne.next=pe),Ee.pending=pe}}O.lanes|=h,pe=O.alternate,pe!==null&&(pe.lanes|=h),Ki(O.return,h,i),se.lanes|=h;break}pe=pe.next}}else if(O.tag===10)H=O.type===i.type?null:O.child;else if(O.tag===18){if(H=O.return,H===null)throw Error(u(341));H.lanes|=h,se=H.alternate,se!==null&&(se.lanes|=h),Ki(H,h,i),H=O.sibling}else H=O.child;if(H!==null)H.return=O;else for(H=O;H!==null;){if(H===i){H=null;break}if(O=H.sibling,O!==null){O.return=H.return,H=O;break}H=H.return}O=H}rn(r,i,w.children,h),i=i.child}return i;case 9:return w=i.type,m=i.pendingProps.children,As(i,h),w=Xn(w),m=m(w),i.flags|=1,rn(r,i,m,h),i.child;case 14:return m=i.type,w=er(m,i.pendingProps),w=er(m.type,w),is(r,i,m,w,h);case 15:return ni(r,i,i.type,i.pendingProps,h);case 17:return m=i.type,w=i.pendingProps,w=i.elementType===m?w:er(m,w),Mo(r,i),i.tag=1,en(m)?(r=!0,Es(i)):r=!1,As(i,h),Zc(i,m,w),Mr(i,m,w,h),wn(null,i,m,!0,r,h);case 19:return Ga(r,i,h);case 22:return mt(r,i,h)}throw Error(u(156,i.tag))};function mu(r,i){return Dr(r,i)}function hd(r,i,h,m){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(r,i,h,m){return new hd(r,i,h,m)}function Zs(r){return r=r.prototype,!(!r||!r.isReactComponent)}function vh(r){if(typeof r=="function")return Zs(r)?1:0;if(r!=null){if(r=r.$$typeof,r===b)return 11;if(r===x)return 14}return 2}function Fi(r,i){var h=r.alternate;return h===null?(h=or(r.tag,i,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=i,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&14680064,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,i=r.dependencies,h.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h}function nl(r,i,h,m,w,O){var H=2;if(m=r,typeof r=="function")Zs(r)&&(H=1);else if(typeof r=="string")H=5;else e:switch(r){case k:return gn(h.children,w,O,i);case T:H=8,w|=8;break;case E:return r=or(12,h,i,w|2),r.elementType=E,r.lanes=O,r;case N:return r=or(13,h,i,w),r.elementType=N,r.lanes=O,r;case L:return r=or(19,h,i,w),r.elementType=L,r.lanes=O,r;case R:return eo(h,w,O,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case S:H=10;break e;case C:H=9;break e;case b:H=11;break e;case x:H=14;break e;case _:H=16,m=null;break e}throw Error(u(130,r==null?r:typeof r,""))}return i=or(H,h,i,w),i.elementType=r,i.type=m,i.lanes=O,i}function gn(r,i,h,m){return r=or(7,r,m,i),r.lanes=h,r}function eo(r,i,h,m){return r=or(22,r,m,i),r.elementType=R,r.lanes=h,r.stateNode={isHidden:!1},r}function to(r,i,h){return r=or(6,r,null,i),r.lanes=h,r}function rl(r,i,h){return i=or(4,r.children!==null?r.children:[],r.key,i),i.lanes=h,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function fd(r,i,h,m,w){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ve,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ps(0),this.expirationTimes=Ps(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ps(0),this.identifierPrefix=m,this.onRecoverableError=w,De&&(this.mutableSourceEagerHydrationData=null)}function vu(r,i,h,m,w,O,H,se,pe){return r=new fd(r,i,h,se,pe),i===1?(i=1,O===!0&&(i|=8)):i=0,O=or(3,null,null,i),r.current=O,O.stateNode=r,O.memoizedState={element:m,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bl(O),r}function il(r){if(!r)return gi;r=r._reactInternals;e:{if(F(r)!==r||r.tag!==1)throw Error(u(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(en(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(u(171))}if(r.tag===1){var h=r.type;if(en(h))return Ac(r,h,i)}return i}function ps(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(u(188)):(r=Object.keys(r).join(","),Error(u(268,r)));return r=K(i),r===null?null:r.stateNode}function sl(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<i?h:i}}function no(r,i){sl(r,i),(r=r.alternate)&&sl(r,i)}function yh(r){return r=K(r),r===null?null:r.stateNode}function pd(){return null}return s.attemptContinuousHydration=function(r){if(r.tag===13){var i=br(r,134217728);if(i!==null){var h=St();En(i,r,134217728,h)}no(r,134217728)}},s.attemptDiscreteHydration=function(r){if(r.tag===13){var i=br(r,1);if(i!==null){var h=St();En(i,r,1,h)}no(r,1)}},s.attemptHydrationAtCurrentPriority=function(r){if(r.tag===13){var i=Qt(r),h=br(r,i);if(h!==null){var m=St();En(h,r,i,m)}no(r,i)}},s.attemptSynchronousHydration=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var h=Cs(i.pendingLanes);h!==0&&(Fr(i,h|1),Cn(i,tn()),(Ke&6)===0&&(ht(),dn()))}break;case 13:cu(function(){var m=br(r,1);if(m!==null){var w=St();En(m,r,1,w)}}),no(r,1)}},s.batchedUpdates=function(r,i){var h=Ke;Ke|=1;try{return r(i)}finally{Ke=h,Ke===0&&(ht(),Rs&&dn())}},s.createComponentSelector=function(r){return{$$typeof:ii,value:r}},s.createContainer=function(r,i,h,m,w,O,H){return vu(r,i,!1,null,h,m,w,O,H)},s.createHasPseudoClassSelector=function(r){return{$$typeof:Ln,value:r}},s.createHydrationContainer=function(r,i,h,m,w,O,H,se,pe){return r=vu(h,m,!0,r,w,O,H,se,pe),r.context=il(null),h=r.current,m=St(),w=Qt(h),O=Zr(m,w),O.callback=i??null,ei(h,O,w),r.current.lanes=w,hr(r,w,m),Cn(r,m),r},s.createPortal=function(r,i,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:v,key:m==null?null:""+m,children:r,containerInfo:i,implementation:h}},s.createRoleSelector=function(r){return{$$typeof:Gr,value:r}},s.createTestNameSelector=function(r){return{$$typeof:Vs,value:r}},s.createTextSelector=function(r){return{$$typeof:Go,value:r}},s.deferredUpdates=function(r){var i=Je,h=Nt.transition;try{return Nt.transition=null,Je=16,r()}finally{Je=i,Nt.transition=h}},s.discreteUpdates=function(r,i,h,m,w){var O=Je,H=Nt.transition;try{return Nt.transition=null,Je=1,r(i,h,m,w)}finally{Je=O,Nt.transition=H,Ke===0&&ht()}},s.findAllNodes=Hr,s.findBoundingRects=function(r,i){if(!Ot)throw Error(u(363));i=Hr(r,i),r=[];for(var h=0;h<i.length;h++)r.push(dt(i[h]));for(i=r.length-1;0<i;i--){h=r[i];for(var m=h.x,w=m+h.width,O=h.y,H=O+h.height,se=i-1;0<=se;se--)if(i!==se){var pe=r[se],Ee=pe.x,Ne=Ee+pe.width,We=pe.y,be=We+pe.height;if(m>=Ee&&O>=We&&w<=Ne&&H<=be){r.splice(i,1);break}else if(m!==Ee||h.width!==pe.width||be<O||We>H){if(!(O!==We||h.height!==pe.height||Ne<m||Ee>w)){Ee>m&&(pe.width+=Ee-m,pe.x=m),Ne<w&&(pe.width=w-Ee),r.splice(i,1);break}}else{We>O&&(pe.height+=We-O,pe.y=O),be<H&&(pe.height=H-We),r.splice(i,1);break}}}return r},s.findHostInstance=ps,s.findHostInstanceWithNoPortals=function(r){return r=B(r),r=r!==null?J(r):null,r===null?null:r.stateNode},s.findHostInstanceWithWarning=function(r){return ps(r)},s.flushControlled=function(r){var i=Ke;Ke|=1;var h=Nt.transition,m=Je;try{Nt.transition=null,Je=1,r()}finally{Je=m,Nt.transition=h,Ke=i,Ke===0&&(ht(),dn())}},s.flushPassiveEffects=ai,s.flushSync=cu,s.focusWithin=function(r,i){if(!Ot)throw Error(u(363));for(r=qr(r),i=Vr(r,i),i=Array.from(i),r=0;r<i.length;){var h=i[r++];if(!ln(h)){if(h.tag===5&&un(h.stateNode))return!0;for(h=h.child;h!==null;)i.push(h),h=h.sibling}}return!1},s.getCurrentUpdatePriority=function(){return Je},s.getFindAllNodesFailureDescription=function(r,i){if(!Ot)throw Error(u(363));var h=0,m=[];r=[qr(r),0];for(var w=0;w<r.length;){var O=r[w++],H=r[w++],se=i[H];if((O.tag!==5||!ln(O))&&(qo(O,se)&&(m.push(Ya(se)),H++,H>h&&(h=H)),H<i.length))for(O=O.child;O!==null;)r.push(O,H),O=O.sibling}if(h<i.length){for(r=[];h<i.length;h++)r.push(Ya(i[h]));return`findAllNodes was able to match part of the selector:
  `+(m.join(" > ")+`

No matching component was found for:
  `)+r.join(" > ")}return null},s.getPublicRootInstance=function(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return oe(r.child.stateNode);default:return r.child.stateNode}},s.injectIntoDevTools=function(r){if(r={bundleType:r.bundleType,version:r.version,rendererPackageName:r.rendererPackageName,rendererConfig:r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:p.ReactCurrentDispatcher,findHostInstanceByFiber:yh,findFiberByHostInstance:r.findFiberByHostInstance||pd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")r=!1;else{var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled||!i.supportsFiber)r=!0;else{try{vi=i.inject(r),Bn=i}catch{}r=!!i.checkDCE}}return r},s.isAlreadyRendering=function(){return!1},s.observeVisibleRects=function(r,i,h,m){if(!Ot)throw Error(u(363));r=Hr(r,i);var w=dr(r,h,m).disconnect;return{disconnect:function(){w()}}},s.registerMutableSourceForHydration=function(r,i){var h=i._getVersion;h=h(i._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[i,h]:r.mutableSourceEagerHydrationData.push(i,h)},s.runWithPriority=function(r,i){var h=Je;try{return Je=r,i()}finally{Je=h}},s.shouldError=function(){return null},s.shouldSuspend=function(){return!1},s.updateContainer=function(r,i,h,m){var w=i.current,O=St(),H=Qt(w);return h=il(h),i.context===null?i.context=h:i.pendingContext=h,i=Zr(O,H),i.payload={element:r},m=m===void 0?null:m,m!==null&&(i.callback=m),r=ei(w,i,H),r!==null&&(En(r,w,H,O),Ro(r,w,H)),H},s}),ff}var hg;function F2(){return hg||(hg=1,hf.exports=j2()),hf.exports}var D2=F2();const M2=Qd(D2);var pf={exports:{}},fo={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function U2(){return fg||(fg=1,fo.ConcurrentRoot=1,fo.ContinuousEventPriority=4,fo.DefaultEventPriority=16,fo.DiscreteEventPriority=1,fo.IdleEventPriority=536870912,fo.LegacyRoot=0),fo}var pg;function z2(){return pg||(pg=1,pf.exports=U2()),pf.exports}var Pm=z2(),B2=Qe();const gg={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let mg=!1,vg=!1;const Hf=".react-konva-event",G2=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,q2=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,V2={};function rh(o,n,s=V2){if(!mg&&"zIndex"in n&&(console.warn(q2),mg=!0),!vg&&n.draggable){var l=n.x!==void 0||n.y!==void 0,d=n.onDragEnd||n.onDragMove;l&&!d&&(console.warn(G2),vg=!0)}for(var c in s)if(!gg[c]){var u=c.slice(0,2)==="on",p=s[c]!==n[c];if(u&&p){var g=c.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),o.off(g,s[c])}var v=!n.hasOwnProperty(c);v&&o.setAttr(c,void 0)}var k=n._useStrictMode,T={},E=!1;const S={};for(var c in n)if(!gg[c]){var u=c.slice(0,2)==="on",C=s[c]!==n[c];if(u&&C){var g=c.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),n[c]&&(S[g]=n[c])}!u&&(n[c]!==s[c]||k&&n[c]!==o.getAttr(c))&&(E=!0,T[c]=n[c])}E&&(o.setAttrs(T),mo(o));for(var g in S)o.on(g+Hf,S[g])}function mo(o){if(!B2.Konva.autoDrawEnabled){var n=o.getLayer()||o.getStage();n&&n.batchDraw()}}var gf=Nf();const bm={},H2={};wc.Node.prototype._applyProps=rh;function W2(o,n){if(typeof n=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${n}`);return}o.add(n),mo(o)}function $2(o,n,s){let l=wc[o];l||(console.error(`Konva has no node with the type ${o}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${o}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),l=wc.Group);const d={},c={};for(var u in n){var p=u.slice(0,2)==="on";p?c[u]=n[u]:d[u]=n[u]}const g=new l(d);return rh(g,c),g}function K2(o,n,s){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${o}"`)}function Y2(o,n,s){return!1}function Q2(o){return o}function X2(){return null}function J2(){return null}function Z2(o,n,s,l){return H2}function e_(){}function t_(o){}function n_(o,n){return!1}function r_(){return bm}function i_(){return bm}const s_=setTimeout,o_=clearTimeout,a_=-1;function l_(o,n){return!1}const u_=!1,c_=!0,d_=!0;function h_(o,n){n.parent===o?n.moveToTop():o.add(n),mo(o)}function f_(o,n){n.parent===o?n.moveToTop():o.add(n),mo(o)}function Tm(o,n,s){n._remove(),o.add(n),n.setZIndex(s.getZIndex()),mo(o)}function p_(o,n,s){Tm(o,n,s)}function g_(o,n){n.destroy(),n.off(Hf),mo(o)}function m_(o,n){n.destroy(),n.off(Hf),mo(o)}function v_(o,n,s){console.error(`Text components are not yet supported in ReactKonva. You text is: "${s}"`)}function y_(o,n,s){}function __(o,n,s,l,d){rh(o,d,l)}function w_(o){o.hide(),mo(o)}function S_(o){}function k_(o,n){(n.visible==null||n.visible)&&o.show()}function E_(o,n){}function C_(o){}function x_(){}const P_=()=>Pm.DefaultEventPriority,b_=Object.freeze(Object.defineProperty({__proto__:null,appendChild:h_,appendChildToContainer:f_,appendInitialChild:W2,cancelTimeout:o_,clearContainer:C_,commitMount:y_,commitTextUpdate:v_,commitUpdate:__,createInstance:$2,createTextInstance:K2,detachDeletedInstance:x_,finalizeInitialChildren:Y2,getChildHostContext:i_,getCurrentEventPriority:P_,getPublicInstance:Q2,getRootHostContext:r_,hideInstance:w_,hideTextInstance:S_,idlePriority:gf.unstable_IdlePriority,insertBefore:Tm,insertInContainerBefore:p_,isPrimaryRenderer:u_,noTimeout:a_,now:gf.unstable_now,prepareForCommit:X2,preparePortalMount:J2,prepareUpdate:Z2,removeChild:g_,removeChildFromContainer:m_,resetAfterCommit:e_,resetTextContent:t_,run:gf.unstable_runWithPriority,scheduleTimeout:s_,shouldDeprioritizeSubtree:n_,shouldSetTextContent:l_,supportsMutation:d_,unhideInstance:k_,unhideTextInstance:E_,warnsIfNotActing:c_},Symbol.toStringTag,{value:"Module"}));var T_=Object.defineProperty,R_=Object.defineProperties,O_=Object.getOwnPropertyDescriptors,yg=Object.getOwnPropertySymbols,N_=Object.prototype.hasOwnProperty,A_=Object.prototype.propertyIsEnumerable,_g=(o,n,s)=>n in o?T_(o,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[n]=s,wg=(o,n)=>{for(var s in n||(n={}))N_.call(n,s)&&_g(o,s,n[s]);if(yg)for(var s of yg(n))A_.call(n,s)&&_g(o,s,n[s]);return o},I_=(o,n)=>R_(o,O_(n)),Sg,kg;typeof window<"u"&&((Sg=window.document)!=null&&Sg.createElement||((kg=window.navigator)==null?void 0:kg.product)==="ReactNative")?ye.useLayoutEffect:ye.useEffect;function Rm(o,n,s){if(!o)return;if(s(o)===!0)return o;let l=o.child;for(;l;){const d=Rm(l,n,s);if(d)return d;l=l.sibling}}function Om(o){try{return Object.defineProperties(o,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return o}}const Eg=console.error;console.error=function(){const o=[...arguments].join("");if(o?.startsWith("Warning:")&&o.includes("useContext")){console.error=Eg;return}return Eg.apply(this,arguments)};const Wf=Om(ye.createContext(null));class Nm extends ye.Component{render(){return ye.createElement(Wf.Provider,{value:this._reactInternals},this.props.children)}}function L_(){const o=ye.useContext(Wf);if(o===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=ye.useId();return ye.useMemo(()=>{for(const l of[o,o?.alternate]){if(!l)continue;const d=Rm(l,!1,c=>{let u=c.memoizedState;for(;u;){if(u.memoizedState===n)return!0;u=u.next}});if(d)return d}},[o,n])}function j_(){const o=L_(),[n]=ye.useState(()=>new Map);n.clear();let s=o;for(;s;){if(s.type&&typeof s.type=="object"){const d=s.type._context===void 0&&s.type.Provider===s.type?s.type:s.type._context;d&&d!==Wf&&!n.has(d)&&n.set(d,ye.useContext(Om(d)))}s=s.return}return n}function F_(){const o=j_();return ye.useMemo(()=>Array.from(o.keys()).reduce((n,s)=>l=>ye.createElement(n,null,ye.createElement(s.Provider,I_(wg({},l),{value:o.get(s)}))),n=>ye.createElement(Nm,wg({},n))),[o])}function D_(o){const n=ur.useRef({});return ur.useLayoutEffect(()=>{n.current=o}),ur.useLayoutEffect(()=>()=>{n.current={}},[]),n.current}const M_=o=>{const n=ur.useRef(null),s=ur.useRef(null),l=ur.useRef(null),d=D_(o),c=F_(),u=p=>{const{forwardedRef:g}=o;g&&(typeof g=="function"?g(p):g.current=p)};return ur.useLayoutEffect(()=>(s.current=new wc.Stage({width:o.width,height:o.height,container:n.current}),u(s.current),l.current=fc.createContainer(s.current,Pm.LegacyRoot,!1,null),fc.updateContainer(ur.createElement(c,{},o.children),l.current),()=>{wc.isBrowser&&(u(null),fc.updateContainer(null,l.current,null),s.current.destroy())}),[]),ur.useLayoutEffect(()=>{u(s.current),rh(s.current,o,d),fc.updateContainer(ur.createElement(c,{},o.children),l.current,null)}),ur.createElement("div",{ref:n,id:o.id,accessKey:o.accessKey,className:o.className,role:o.role,style:o.style,tabIndex:o.tabIndex,title:o.title})},U_="Layer",z_="Rect",B_="Line",fc=M2(b_);fc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:ur.version,rendererPackageName:"react-konva"});const G_=ur.forwardRef((o,n)=>ur.createElement(Nm,{},ur.createElement(M_,{...o,forwardedRef:n}))),Am=ye.createContext(void 0);function q_({children:o}){const[n,s]=ye.useState("#000000"),[l,d]=ye.useState(5),[c,u]=ye.useState("brush");return re.jsx(Am.Provider,{value:{color:n,brushSize:l,tool:c,setColor:s,setBrushSize:d,setTool:u},children:o})}function Im(){const o=ye.useContext(Am);if(!o)throw new Error("useDrawing must be used within DrawingProvider");return o}function V_({playerId:o,roundId:n,frameNumber:s,onFrameComplete:l}){const[d,c]=ye.useState({}),[u,p]=ye.useState(!1),{color:g,brushSize:v,tool:k}=Im(),T=ye.useRef(null);ye.useEffect(()=>{n&&E()},[n,s]);const E=async()=>{try{const{data:R,error:I}=await Re.from("frames").select("*").eq("round_id",n).eq("player_id",o).eq("frame_number",s).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(I&&I.code!=="PGRST116"){console.error("Error loading frame:",I);return}if(R?.image_data)try{const U=JSON.parse(R.image_data);c(W=>({...W,[s]:U}))}catch{c(U=>({...U,[s]:[]}))}else c(U=>({...U,[s]:[]}))}catch(R){console.error("Error loading frame data:",R)}},S=Gy(async R=>{if(n)try{const I=JSON.stringify(R),{data:U,error:W}=await Re.from("frames").select("id").eq("round_id",n).eq("player_id",o).eq("frame_number",s).order("created_at",{ascending:!1}).limit(1);if(W){console.error("Error checking for existing frame:",W);return}if(U&&U.length>0){const j=U[0].id;await Re.from("frames").update({image_data:I}).eq("id",j)}else await Re.from("frames").insert({round_id:n,player_id:o,frame_number:s,image_data:I});R.length>0&&l&&l(s)}catch(I){console.error("Error saving frame:",I)}},1e3),C=ye.useCallback((R,I,U,W)=>{const j=R.canvas,F=j.width,G=j.height,B=R.getImageData(0,0,F,G),K=B.data,$=parseInt(W.slice(1,3),16),J=parseInt(W.slice(3,5),16),Y=parseInt(W.slice(5,7),16),oe=Math.floor(I),A=Math.floor(U);if(oe<0||oe>=F||A<0||A>=G)return;const D=(A*F+oe)*4,V=K[D],q=K[D+1],M=K[D+2];if(V===$&&q===J&&M===Y)return;const X=[[oe,A]],ee=new Set;for(;X.length>0;){const[ce,me]=X.shift(),ae=`${ce},${me}`;if(ce<0||ce>=F||me<0||me>=G||ee.has(ae))continue;const Q=(me*F+ce)*4,ie=K[Q],ve=K[Q+1],Se=K[Q+2],xe=30;Math.abs(ie-V)>xe||Math.abs(ve-q)>xe||Math.abs(Se-M)>xe||(ee.add(ae),K[Q]=$,K[Q+1]=J,K[Q+2]=Y,K[Q+3]=255,X.push([ce+1,me]),X.push([ce-1,me]),X.push([ce,me+1]),X.push([ce,me-1]))}R.putImageData(B,0,0)},[]),b=async R=>{const I=R.target.getStage()?.getPointerPosition();if(I)if(k==="paintbucket"){Vt.playClick();const U=T.current;if(!U)return;const W=U.getLayers()[0],F=W.getCanvas()._canvas.getContext("2d");if(!F)return;const G=document.createElement("canvas");G.width=800,G.height=600;const B=G.getContext("2d");if(!B)return;B.fillStyle="#FFF5F5",B.fillRect(0,0,800,600);const K=d[s]||[];K.forEach(Y=>{if(Y.tool!=="paintbucket"){B.strokeStyle=Y.color,B.lineWidth=Y.brushSize,B.lineCap="round",B.lineJoin="round",B.globalCompositeOperation=Y.tool==="eraser"?"destination-out":"source-over",B.beginPath();for(let oe=0;oe<Y.points.length-2;oe+=2){const A=Y.points[oe],D=Y.points[oe+1];oe===0?B.moveTo(A,D):B.lineTo(A,D)}B.stroke()}}),C(B,I.x,I.y,g),F.clearRect(0,0,800,600),F.drawImage(G,0,0),F.fillStyle="#FFF5F5",F.fillRect(0,0,800,600),K.forEach(Y=>{Y.tool==="paintbucket"&&Y.points.length>=2&&C(F,Y.points[0],Y.points[1],Y.color)}),K.forEach(Y=>{if(Y.tool!=="paintbucket"){F.strokeStyle=Y.color,F.lineWidth=Y.brushSize,F.lineCap="round",F.lineJoin="round",F.globalCompositeOperation=Y.tool==="eraser"?"destination-out":"source-over",F.beginPath();for(let oe=0;oe<Y.points.length-2;oe+=2){const A=Y.points[oe],D=Y.points[oe+1];oe===0?F.moveTo(A,D):F.lineTo(A,D)}F.stroke()}}),C(F,I.x,I.y,g);const $={points:[I.x,I.y],color:g,brushSize:0,tool:"paintbucket"},J=[...K,$];c(Y=>({...Y,[s]:J})),S(J),W.draw()}else{p(!0),Vt.playDraw();const U={points:[I.x,I.y],color:k==="eraser"?"#FFFFFF":g,brushSize:k==="eraser"?v*2:v,tool:k};c(W=>({...W,[s]:[...W[s]||[],U]}))}},N=R=>{if(!u)return;const U=R.target.getStage()?.getPointerPosition();U&&c(W=>{const j=W[s]||[],F=j[j.length-1];if(!F)return W;const G={...F,points:[...F.points,U.x,U.y]},B={...W,[s]:[...j.slice(0,-1),G]};return S(B[s]),B})},L=()=>{p(!1),S(d[s]||[])};ye.useEffect(()=>{},[]);const x=d[s]||[];ye.useEffect(()=>{if(!T.current)return;const I=T.current.getLayers()[0],W=I.getCanvas()._canvas.getContext("2d");if(!W)return;W.fillStyle="#FFF5F5",W.fillRect(0,0,800,600),x.filter(F=>F.tool==="paintbucket").forEach(F=>{F.points.length>=2&&C(W,F.points[0],F.points[1],F.color)}),x.forEach(F=>{if(F.tool!=="paintbucket"){W.strokeStyle=F.color,W.lineWidth=F.brushSize,W.lineCap="round",W.lineJoin="round",W.globalCompositeOperation=F.tool==="eraser"?"destination-out":"source-over",W.beginPath();for(let G=0;G<F.points.length-2;G+=2){const B=F.points[G],K=F.points[G+1];G===0?W.moveTo(B,K):W.lineTo(B,K)}W.stroke()}}),I.draw()},[x,C]);const _=()=>{switch(k){case"brush":return"cursor-brush";case"eraser":return"cursor-eraser";case"paintbucket":return"cursor-paintbucket";default:return"cursor-default"}};return re.jsx("div",{className:`drawing-canvas-container ${_()}`,children:re.jsx(G_,{width:800,height:600,onMouseDown:b,onMousemove:N,onMouseup:L,onMouseLeave:L,ref:T,children:re.jsxs(U_,{children:[re.jsx(z_,{width:800,height:600,fill:"#FFF5F5"}),x.map((R,I)=>R.tool==="paintbucket"?null:re.jsx(B_,{points:R.points,stroke:R.color,strokeWidth:R.brushSize,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:R.tool==="eraser"?"destination-out":"source-over"},I))]})})})}function H_({frames:o,currentFrame:n,onFrameSelect:s,roundId:l,playerId:d,completedFrames:c,onFrameCompleteToggle:u}){const[p,g]=ye.useState({}),v=ye.useRef({});ye.useEffect(()=>{if(!l)return;const T=async()=>{try{const{data:S,error:C}=await Re.from("frames").select("*").eq("round_id",l).eq("player_id",d).order("frame_number",{ascending:!0}).order("created_at",{ascending:!1});if(C)throw C;const b={};(S||[]).forEach(N=>{const L=b[N.frame_number];(!L||new Date(N.created_at)>new Date(L.created_at))&&(b[N.frame_number]=N)}),g(b)}catch(S){console.error("Error loading frames:",S)}};T();const E=Re.channel(`frames-selector:${l}:${d}`).on("postgres_changes",{event:"*",schema:"public",table:"frames",filter:`round_id=eq.${l}`},S=>{S.new&&S.new.player_id===d&&T()}).subscribe();return()=>{Re.removeChannel(E)}},[l,d]),ye.useEffect(()=>{Object.keys(p).forEach(T=>{const E=parseInt(T),S=v.current[E],C=p[E];if(!S||!C)return;const b=S.getContext("2d");if(b){b.fillStyle="#FFF5F5",b.fillRect(0,0,S.width,S.height);try{const N=JSON.parse(C.image_data);k(b,N,S.width,S.height)}catch(N){console.error("Error drawing thumbnail:",N)}}})},[p]);const k=(T,E,S,C)=>{const b=S/800,N=C/600;E.forEach(L=>{T.strokeStyle=L.color,T.lineWidth=L.brushSize*Math.min(b,N),T.lineCap="round",T.lineJoin="round",L.tool==="eraser"?T.globalCompositeOperation="destination-out":T.globalCompositeOperation="source-over",T.beginPath();for(let x=0;x<L.points.length-2;x+=2){const _=L.points[x]*b,R=L.points[x+1]*N;x===0?T.moveTo(_,R):T.lineTo(_,R)}T.stroke()})};return re.jsxs("div",{className:"frame-selector",children:[re.jsx("h3",{children:"Frames"}),re.jsx("div",{className:"frame-grid",children:Array.from({length:o},(T,E)=>{const S=p[E],C=c.has(E);return re.jsxs("div",{className:`frame-thumbnail-wrapper ${n===E?"active":""} ${C?"complete":""}`,children:[re.jsx("button",{className:`frame-thumbnail ${n===E?"active":""} ${C?"complete":""}`,onClick:()=>{Vt.playClick(),s(E)},children:S?re.jsx("canvas",{ref:b=>{v.current[E]=b},width:100,height:75,className:"frame-thumbnail-canvas"}):re.jsx("div",{className:"frame-number",children:E+1})}),re.jsxs("label",{className:"frame-checkbox-label",children:[re.jsx("input",{type:"checkbox",checked:C,onChange:b=>{b.stopPropagation(),u(E,b.target.checked)},onClick:b=>b.stopPropagation(),className:"frame-checkbox"}),re.jsx("span",{className:"frame-checkbox-text",children:"Complete"})]})]},E)})})]})}function W_(){const{color:o,brushSize:n,tool:s,setColor:l,setBrushSize:d,setTool:c}=Im(),u=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF"];return re.jsxs("div",{className:"tool-panel",children:[re.jsxs("div",{className:"tool-section",children:[re.jsx("h4",{children:"Color"}),re.jsxs("div",{className:"color-picker",children:[re.jsx("input",{type:"color",value:o,onChange:p=>l(p.target.value),className:"color-input"}),re.jsx("div",{className:"color-palette",children:u.map(p=>re.jsx("button",{className:`color-swatch ${o===p?"active":""}`,style:{backgroundColor:p},onClick:()=>{Vt.playClick(),l(p)}},p))})]})]}),re.jsxs("div",{className:"tool-section",children:[re.jsx("h4",{children:"Brush Size"}),re.jsxs("div",{className:"brush-size-control",children:[re.jsx("input",{type:"range",min:"1",max:"50",value:n,onChange:p=>d(Number(p.target.value)),className:"brush-slider"}),re.jsxs("span",{className:"brush-size-value",children:[n,"px"]})]})]}),re.jsxs("div",{className:"tool-section",children:[re.jsx("h4",{children:"Tools"}),re.jsxs("div",{className:"tool-buttons",children:[re.jsx("button",{className:`tool-btn ${s==="brush"?"active":""}`,onClick:()=>{Vt.playClick(),c("brush")},children:"Brush"}),re.jsx("button",{className:`tool-btn ${s==="eraser"?"active":""}`,onClick:()=>{Vt.playClick(),c("eraser")},children:"Eraser"}),re.jsx("button",{className:`tool-btn ${s==="paintbucket"?"active":""}`,onClick:()=>{Vt.playClick(),c("paintbucket")},children:"Paint Bucket"})]})]})]})}function $_({timeRemaining:o}){const n=Math.floor(o/60),s=o%60,l=`${n}:${s.toString().padStart(2,"0")}`,d=()=>o>60?"var(--color-success)":o>30?"var(--color-warning)":"var(--color-error)";return re.jsx("div",{className:"drawing-timer",style:{color:d()},children:re.jsx("div",{className:"timer-display",children:l})})}function K_({prompt:o}){return re.jsx("div",{className:"prompt-display",children:re.jsx("div",{className:"prompt-box",children:re.jsx("p",{children:o})})})}function Y_({gameId:o,playerId:n,onStatusChange:s}){const{game:l}=eh(o),[d,c]=ye.useState(0),[u,p]=ye.useState(null),[g,v]=ye.useState("Loading prompt..."),[k,T]=ye.useState(180),[E,S]=ye.useState(new Set),[C,b]=ye.useState(!1),[N,L]=ye.useState({submitted:0,total:0}),[x,_]=ye.useState(!1),[R,I]=ye.useState([]),[U,W]=ye.useState(null),j=ye.useCallback(async()=>{if(!l||!o)return;const B=l.current_round;if(!B||B<1){console.error("Invalid current_round:",B);return}const{data:K,error:$}=await Re.from("players").select("id").eq("game_id",o);if($){console.error("Error fetching players:",$);return}const J=K?.length||0;if(J===0)return;const{data:Y,error:oe}=await Re.from("player_submissions").select("player_id").eq("game_id",o).eq("round_number",B).eq("phase","drawing");if(oe){console.error("Error checking submissions:",oe);return}const A=Y?.length||0,V=new Set(Y?.map(q=>q.player_id)||[]).size;if(L({submitted:V,total:J}),console.log(`[checkAndTransitionToViewing] Drawings submitted: ${V}/${J} (raw count: ${A}) for round ${B}`),V>=J){console.log("[checkAndTransitionToViewing] All drawings submitted, checking game status...");const{data:q,error:M}=await Re.from("games").select("status, current_round, total_rounds").eq("id",o).single();if(M){console.error("[checkAndTransitionToViewing] Error fetching game:",M);return}if(q&&q.status==="drawing"&&q.current_round===B)if((q.current_round||0)>=(q.total_rounds||0)){const{error:ee}=await Re.from("games").update({status:"complete"}).eq("id",o).eq("status","drawing").eq("current_round",B);if(!ee)console.log("[checkAndTransitionToViewing] All drawings submitted for final round, transitioning to complete"),s("complete");else{console.log("[checkAndTransitionToViewing] Status update failed:",ee);const{data:ce}=await Re.from("games").select("status").eq("id",o).single();ce&&ce.status==="complete"&&s("complete")}}else{const ee=(q.current_round||0)+1,{data:ce}=await Re.from("rounds").select("id").eq("game_id",o).eq("round_number",ee).maybeSingle();if(!ce){const{error:ae}=await Re.from("rounds").insert({game_id:o,round_number:ee,prompt:""});ae&&console.error("[checkAndTransitionToViewing] Error creating next round:",ae)}const{error:me}=await Re.from("games").update({status:"prompt",current_round:ee}).eq("id",o).eq("status","drawing").eq("current_round",B);if(!me)console.log("[checkAndTransitionToViewing] All drawings submitted, transitioning to prompt phase for next round"),s("prompt");else{console.log("[checkAndTransitionToViewing] Status update failed (likely already updated by another player):",me);const{data:ae}=await Re.from("games").select("status").eq("id",o).single();ae&&ae.status==="prompt"&&s("prompt")}}else console.log(`[checkAndTransitionToViewing] Game status mismatch. Current: ${q?.status}, Round: ${q?.current_round}, Expected: drawing/${B}`)}},[l,o,s]);ye.useEffect(()=>{if(!l)return;const B=l.current_round;if(!B||B<1){console.error("Invalid current_round:",B);return}Re.from("rounds").select("*").eq("game_id",o).eq("round_number",B).order("started_at",{ascending:!1}).limit(1).maybeSingle().then(({data:$,error:J})=>{!J&&$?p($):J?console.error("Error fetching current round:",J):$||console.log("No round found for round_number:",B)}),Re.from("players").select("*").eq("game_id",o).order("turn_order",{ascending:!0}).then(({data:$,error:J})=>{if(!J&&$){I($);const Y=$.find(oe=>oe.id===n);if(Y){W(Y);const oe=$.findIndex(V=>V.id===n),A=oe===0?$.length-1:oe-1,D=$[A];if(D){const V=l.current_round;V&&V>=1?Re.from("prompts").select("prompt").eq("game_id",o).eq("round_number",V).eq("player_id",D.id).single().then(({data:q,error:M})=>{v(!M&&q?q.prompt:"No prompt available")}):v("No prompt available")}}}});const K=Re.channel(`game-status:${o}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"games",filter:`id=eq.${o}`},$=>{const J=$.new;J.status!=="drawing"&&s(J.status)}).subscribe();return()=>{Re.removeChannel(K)}},[o,l,s]),ye.useEffect(()=>{if(!l||l.status!=="drawing")return;const B=l.current_round;if(!B||B<1)return;console.log("Starting polling for drawing completion (always active)...");const K=setInterval(async()=>{try{const{data:$,error:J}=await Re.from("players").select("id").eq("game_id",o);if(J){console.error("Error fetching players during poll:",J);return}const Y=$?.length||0;if(Y===0)return;const{data:oe,error:A}=await Re.from("player_submissions").select("player_id").eq("game_id",o).eq("round_number",B).eq("phase","drawing");if(A){console.error("Error checking submissions during poll:",A);return}const D=oe?.length||0;L({submitted:D,total:Y}),console.log(`[Poll] Drawings submitted: ${D}/${Y} for round ${B}`),D>=Y&&(console.log("[Poll] All drawings submitted, calling checkAndTransitionToViewing"),await j())}catch($){console.error("Error in polling for drawing completion:",$)}},1e3);return j(),()=>{console.log("Stopping polling for drawings"),clearInterval(K)}},[l,o,j]),ye.useEffect(()=>{if(!l||!u||!o||!n)return;const B=l.current_round;!B||B<1||Re.from("player_submissions").select("*").eq("game_id",o).eq("round_number",B).eq("player_id",n).eq("phase","drawing").maybeSingle().then(({data:K,error:$})=>{!$&&K?(console.log("Player has already submitted drawing for this round"),b(!0),j()):$&&$.code!=="PGRST116"&&console.error("Error checking submission status:",$)})},[l,o,u,n,j]);const F=ye.useCallback(async()=>{if(!l||!u||!o||!n||C)return;const B=l.current_round;if(!B||B<1){console.error("Invalid current_round:",B);return}if(!x){console.log("Cannot submit: not all frames have data"),alert("Please complete all frames before submitting");return}const{error:K}=await Re.from("player_submissions").upsert({game_id:o,round_number:B,player_id:n,phase:"drawing"},{onConflict:"game_id,round_number,player_id,phase"});if(K){console.error("Error saving submission:",K);return}b(!0),await j()},[l,u,o,n,C,x,j]);ye.useEffect(()=>{if(k<=0){C||F();return}const B=setInterval(()=>{T(K=>K<=1?(C||F(),0):K-1)},1e3);return()=>clearInterval(B)},[k,l,C,F]);const G=l?.frames_per_round||3;return ye.useEffect(()=>{if(!u?.id||G===0){_(!1);return}const B=async()=>{try{const{data:$,error:J}=await Re.from("frames").select("frame_number, image_data, created_at").eq("round_id",u.id).eq("player_id",n).order("created_at",{ascending:!1});if(J)throw J;const Y={};($||[]).forEach(A=>{const D=A.frame_number;if(!Y.hasOwnProperty(D)){const V=A.image_data&&A.image_data.trim()!==""&&A.image_data!=="[]"&&A.image_data!=="null";Y[D]=V}});let oe=!0;for(let A=0;A<G;A++)if(!Y[A]){oe=!1;break}_(oe)}catch($){console.error("Error verifying frames:",$),_(!1)}};B();const K=setInterval(()=>{B()},2e3);return()=>clearInterval(K)},[u?.id,n,G]),ye.useEffect(()=>{if(!u?.id)return;const B=async()=>{try{const{data:$,error:J}=await Re.from("frames").select("frame_number, image_data, created_at").eq("round_id",u.id).eq("player_id",n).order("created_at",{ascending:!1});if(J)throw J;const Y={};($||[]).forEach(A=>{const D=A.frame_number;if(!Y[D]){const V=A.image_data&&A.image_data.trim()!==""&&A.image_data!=="[]"&&A.image_data!=="null";Y[D]={hasData:V}}});const oe=new Set;Object.keys(Y).forEach(A=>{const D=parseInt(A);Y[D].hasData&&oe.add(D)}),S(oe)}catch($){console.error("Error checking frames:",$)}};B();const K=Re.channel(`frames:${u.id}:${n}`).on("postgres_changes",{event:"*",schema:"public",table:"frames",filter:`round_id=eq.${u.id}`},$=>{$.new&&$.new.player_id===n&&B()}).subscribe();return()=>{Re.removeChannel(K)}},[u?.id,n]),re.jsx(q_,{children:re.jsxs("div",{className:"drawing-screen",children:[re.jsxs("div",{className:"drawing-header",children:[re.jsx(K_,{prompt:g}),re.jsx($_,{timeRemaining:k})]}),re.jsxs("div",{className:"drawing-layout",children:[re.jsx("div",{className:"drawing-left",children:re.jsx(H_,{frames:G,currentFrame:d,onFrameSelect:c,roundId:u?.id||"",playerId:n,completedFrames:E,onFrameCompleteToggle:(B,K)=>{S($=>{const J=new Set($);return K?J.add(B):J.delete(B),J})}})}),re.jsx("div",{className:"drawing-center",children:re.jsx(V_,{gameId:o,playerId:n,roundId:u?.id||"",frameNumber:d,framesPerRound:G,onFrameComplete:B=>{S(K=>new Set([...K,B]))}})}),re.jsx("div",{className:"drawing-right",children:re.jsx(W_,{})})]}),re.jsx("div",{className:"drawing-footer",children:C?re.jsxs("div",{className:"submission-waiting",children:[re.jsx("p",{className:"submission-status",children:"Your drawing has been submitted!"}),re.jsxs("p",{className:"waiting-message",children:["Waiting for other players to finish... (",N.submitted,"/",N.total,")"]})]}):x?re.jsx("button",{className:"btn btn-primary btn-large",onClick:()=>{Vt.playSubmit(),F()},onMouseEnter:()=>Vt.playHover(),children:"SUBMIT"}):re.jsxs("div",{className:"submit-info",children:["Complete all ",G," frames to submit (",E.size,"/",G,")"]})})]})})}function Q_({frames:o}){const n=async()=>{if(o.length===0){alert("No frames to download");return}Vt.playDownload();try{const l=await sa(()=>import("./gif-TY_KYinh.js").then(g=>g.g),[]),d=l.default||l.GIF||l;if(!d)throw new Error("Failed to load gif.js module");const c=document.createElement("canvas");c.width=800,c.height=600;const u=c.getContext("2d");if(!u){alert("Failed to create canvas context");return}const p=new d({workers:2,quality:10,width:800,height:600,workerScript:"/gif.worker.js"});p.on("progress",g=>{console.log("GIF generation progress:",Math.round(g*100)+"%")});for(let g=0;g<o.length;g++){u.fillStyle="#FFF5F5",u.fillRect(0,0,c.width,c.height);try{const v=JSON.parse(o[g].image_data);if(!Array.isArray(v)){console.error("Invalid line data format for frame",g);continue}const k=v.filter(E=>E.tool!=="paintbucket"),T=v.filter(E=>E.tool==="paintbucket");k.forEach(E=>{if(!(!E.points||E.points.length<2)){u.strokeStyle=E.color,u.lineWidth=E.brushSize,u.lineCap="round",u.lineJoin="round",E.tool==="eraser"?u.globalCompositeOperation="destination-out":u.globalCompositeOperation="source-over",u.beginPath();for(let S=0;S<E.points.length-2;S+=2){const C=E.points[S],b=E.points[S+1];S===0?u.moveTo(C,b):u.lineTo(C,b)}u.stroke()}}),T.forEach(E=>{E.points&&E.points.length>=2&&s(u,E.points[0],E.points[1],E.color)})}catch(v){console.error("Error parsing/drawing frame",g,":",v);continue}p.addFrame(c,{delay:250,copy:!0})}p.on("finished",g=>{try{const v=URL.createObjectURL(g),k=document.createElement("a");k.href=v,k.download=`animation-${Date.now()}.gif`,document.body.appendChild(k),k.click(),setTimeout(()=>{document.body.removeChild(k),URL.revokeObjectURL(v)},100)}catch(v){console.error("Error downloading GIF:",v),alert("Failed to download GIF. Please try again.")}}),console.log(`Starting GIF generation for ${o.length} frames...`),p.render()}catch(l){console.error("Error loading gif.js:",l),alert("Failed to generate GIF: "+(l instanceof Error?l.message:"Unknown error"))}},s=(l,d,c,u)=>{const p=l.canvas,g=p.width,v=p.height,k=l.getImageData(0,0,g,v),T=k.data,E=parseInt(u.slice(1,3),16),S=parseInt(u.slice(3,5),16),C=parseInt(u.slice(5,7),16),b=Math.floor(d),N=Math.floor(c);if(b<0||b>=g||N<0||N>=v)return;const L=(N*g+b)*4,x=T[L],_=T[L+1],R=T[L+2];if(x===E&&_===S&&R===C)return;const I=[[b,N]],U=new Set;for(;I.length>0;){const[W,j]=I.shift(),F=`${W},${j}`;if(W<0||W>=g||j<0||j>=v||U.has(F))continue;const G=(j*g+W)*4,B=T[G],K=T[G+1],$=T[G+2],J=30;Math.abs(B-x)>J||Math.abs(K-_)>J||Math.abs($-R)>J||(U.add(F),T[G]=E,T[G+1]=S,T[G+2]=C,T[G+3]=255,I.push([W+1,j]),I.push([W-1,j]),I.push([W,j+1]),I.push([W,j-1]))}l.putImageData(k,0,0)};return re.jsx("div",{className:"gif-generator",children:re.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Download as GIF"})})}function Lm({frames:o,playerName:n}){const[s,l]=ye.useState(!1),[d,c]=ye.useState(0),u=ye.useRef(null),p=ye.useRef(null);ye.useEffect(()=>{if(!u.current||o.length===0)return;const E=u.current,S=E.getContext("2d");if(!S)return;S.fillStyle="#FFF5F5",S.fillRect(0,0,E.width,E.height);const C=o[d];if(C)try{const b=JSON.parse(C.image_data),N=b.filter(x=>x.tool!=="paintbucket"),L=b.filter(x=>x.tool==="paintbucket");v(S,N),L.forEach(x=>{x.points.length>=2&&g(S,x.points[0],x.points[1],x.color)})}catch(b){console.error("Error parsing frame data:",b)}},[o,d]);const g=(E,S,C,b)=>{const N=E.canvas,L=N.width,x=N.height,_=E.getImageData(0,0,L,x),R=_.data,I=parseInt(b.slice(1,3),16),U=parseInt(b.slice(3,5),16),W=parseInt(b.slice(5,7),16),j=Math.floor(S),F=Math.floor(C);if(j<0||j>=L||F<0||F>=x)return;const G=(F*L+j)*4,B=R[G],K=R[G+1],$=R[G+2];if(B===I&&K===U&&$===W)return;const J=[[j,F]],Y=new Set;for(;J.length>0;){const[oe,A]=J.shift(),D=`${oe},${A}`;if(oe<0||oe>=L||A<0||A>=x||Y.has(D))continue;const V=(A*L+oe)*4,q=R[V],M=R[V+1],X=R[V+2],ee=30;Math.abs(q-B)>ee||Math.abs(M-K)>ee||Math.abs(X-$)>ee||(Y.add(D),R[V]=I,R[V+1]=U,R[V+2]=W,R[V+3]=255,J.push([oe+1,A]),J.push([oe-1,A]),J.push([oe,A+1]),J.push([oe,A-1]))}E.putImageData(_,0,0)};ye.useEffect(()=>(s&&o.length>0?p.current=setInterval(()=>{c(E=>(E+1)%o.length)},250):p.current&&(clearInterval(p.current),p.current=null),()=>{p.current&&clearInterval(p.current)}),[s,o.length]);const v=(E,S)=>{S.forEach(C=>{if(C.tool!=="paintbucket"){E.strokeStyle=C.color,E.lineWidth=C.brushSize,E.lineCap="round",E.lineJoin="round",C.tool==="eraser"?E.globalCompositeOperation="destination-out":E.globalCompositeOperation="source-over",E.beginPath();for(let b=0;b<C.points.length-2;b+=2){const N=C.points[b],L=C.points[b+1];b===0?E.moveTo(N,L):E.lineTo(N,L)}E.stroke()}})},k=()=>{Vt.playClick(),l(!s)},T=E=>{Vt.playClick(),l(!1),c(E)};return re.jsxs("div",{className:"animation-viewer",children:[n&&re.jsx("h3",{className:"player-name",children:n}),re.jsx("div",{className:"canvas-container",children:re.jsx("canvas",{ref:u,width:800,height:600,className:"animation-canvas"})}),re.jsxs("div",{className:"animation-controls",children:[re.jsx("button",{className:"btn btn-secondary",onClick:k,children:s?"Pause":"Play"}),re.jsxs("div",{className:"frame-indicator",children:["Frame ",d+1," / ",o.length]}),re.jsx("div",{className:"frame-nav",children:o.map((E,S)=>re.jsx("button",{className:`frame-nav-btn ${d===S?"active":""}`,onClick:()=>T(S),children:S+1},S))})]}),re.jsx(Q_,{frames:o,canvasRef:u})]})}function X_({gameId:o,frames:n}){const[s,l]=ye.useState([]),[d,c]=ye.useState({});return ye.useEffect(()=>{Re.from("players").select("*").eq("game_id",o).order("turn_order",{ascending:!0}).then(({data:g,error:v})=>{!v&&g&&l(g)});const u={},p={};n.forEach(g=>{p[g.player_id]||(p[g.player_id]={});const v=p[g.player_id][g.frame_number];(!v||new Date(g.created_at)>new Date(v.created_at))&&(p[g.player_id][g.frame_number]=g)}),Object.keys(p).forEach(g=>{const v=Object.values(p[g]);v.sort((k,T)=>k.frame_number-T.frame_number),u[g]=v}),c(u)},[o,n]),re.jsxs("div",{className:"animation-gallery",children:[re.jsx("h2",{children:"Animations"}),re.jsx("div",{className:"gallery-grid",children:s.map(u=>{const p=d[u.id]||[];return p.length===0?null:re.jsx("div",{className:"gallery-item",children:re.jsx(Lm,{frames:p,playerName:u.nickname})},u.id)})})]})}function J_({gameId:o,onStatusChange:n}){const{game:s}=eh(o),[l,d]=ye.useState([]),[c,u]=ye.useState([]),[p,g]=ye.useState({}),[v,k]=ye.useState({}),[T,E]=ye.useState(null),[S,C]=ye.useState({});ye.useEffect(()=>{if(!s)return;if(s.status!=="complete"){console.log("Animation screen: Game not complete yet, status:",s.status);return}(async()=>{try{const{data:_,error:R}=await Re.from("rounds").select("*").eq("game_id",o).order("round_number",{ascending:!0}).order("started_at",{ascending:!1});if(R)throw R;if(!_)return;const I={};_.forEach(B=>{const K=I[B.round_number];(!K||new Date(B.started_at||0)>new Date(K.started_at||0))&&(I[B.round_number]=B)});const U=Object.values(I).sort((B,K)=>B.round_number-K.round_number);u(U);const{data:W,error:j}=await Re.from("players").select("*").eq("game_id",o).order("turn_order",{ascending:!0});!j&&W&&d(W);const F={},G={};for(const B of U){const{data:K,error:$}=await Re.from("frames").select("*").eq("round_id",B.id).order("player_id",{ascending:!0}).order("frame_number",{ascending:!0}).order("created_at",{ascending:!1});if($)console.error(`Error loading frames for round ${B.round_number}:`,$);else{const oe={};(K||[]).forEach(A=>{const D=`${A.player_id}-${A.frame_number}`,V=oe[D];(!V||new Date(A.created_at)>new Date(V.created_at))&&(oe[D]=A)}),F[B.round_number]=Object.values(oe)}const{data:J,error:Y}=await Re.from("prompts").select("*").eq("game_id",o).eq("round_number",B.round_number).order("player_id",{ascending:!0});Y?console.error(`Error loading prompts for round ${B.round_number}:`,Y):G[B.round_number]=J||[]}if(g(F),k(G),W&&W.length>0){const B={};W.forEach(K=>{const $=[],Y=(G[1]||[]).find(oe=>oe.player_id===K.id);if(Y){const A=(W.findIndex(X=>X.id===K.id)+1)%W.length,D=W[A],q=(F[1]||[]).filter(X=>X.player_id===D.id);$.push({round:1,prompt:Y,promptAuthor:K,animation:q,animationAuthor:D});let M=D;for(let X=2;X<=U.length;X++){const ee=G[X]||[],ce=F[X]||[],me=ee.find(Se=>Se.player_id===M.id),Q=(W.findIndex(Se=>Se.id===M.id)+1)%W.length,ie=W[Q],ve=ce.filter(Se=>Se.player_id===ie.id);$.push({round:X,prompt:me||null,promptAuthor:me?M:null,animation:ve,animationAuthor:ie}),M=ie}}B[K.id]=$}),C(B),!T&&W.length>0&&E(W[0].id)}}catch(_){console.error("Error loading all rounds:",_)}})();const x=Re.channel(`game-status:${o}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"games",filter:`id=eq.${o}`},_=>{const R=_.new;n(R.status)}).subscribe();return()=>{Re.removeChannel(x)}},[o,s,n]);const b=l.find(L=>L.id===T),N=T?S[T]||[]:[];return re.jsxs("div",{className:"animation-screen",children:[re.jsxs("div",{className:"animation-header",children:[re.jsx("h2",{children:"Game Complete - View All Animations"}),re.jsx("p",{children:"Select a player to see their prompt's journey through the game"})]}),re.jsxs("div",{className:"player-selector",children:[re.jsx("h3",{children:"Select Player:"}),re.jsx("div",{className:"player-buttons",children:l.map(L=>re.jsx("button",{className:`player-btn ${T===L.id?"active":""}`,onClick:()=>{Vt.playClick(),E(L.id)},onMouseEnter:()=>Vt.playHover(),children:L.nickname},L.id))})]}),b&&N.length>0&&re.jsxs("div",{className:"animation-content",children:[re.jsxs("div",{className:"chain-header",children:[re.jsxs("h3",{children:[b.nickname,"'s Journey"]}),re.jsx("p",{children:"Starting from their original prompt in Round 1"})]}),N.map((L,x)=>re.jsxs("div",{className:"round-animations",children:[re.jsxs("h4",{children:["Round ",L.round]}),L.prompt&&L.promptAuthor&&re.jsxs("div",{className:"round-prompts",children:[re.jsx("h5",{children:"Prompt:"}),re.jsxs("div",{className:"prompt-item",children:[re.jsxs("span",{className:"prompt-player",children:[L.promptAuthor.nickname,":"]}),re.jsxs("span",{className:"prompt-text",children:['"',L.prompt.prompt,'"']})]}),x>0&&re.jsxs("p",{className:"prompt-context",children:["(Based on ",L.promptAuthor.nickname,"'s animation from Round ",L.round-1,")"]})]}),L.animation.length>0&&L.animationAuthor&&re.jsxs("div",{className:"round-animation",children:[re.jsxs("h5",{children:["Animation by ",L.animationAuthor.nickname,":"]}),re.jsx(X_,{gameId:o,frames:L.animation})]})]},x))]})]})}function Z_({onPromptSubmit:o,currentPrompt:n,isSubmitted:s=!1}){const[l,d]=ye.useState(""),c=u=>{u.preventDefault(),!(s||!l.trim())&&(Vt.playSubmit(),o(l.trim()),d(""))};return s?null:re.jsxs("div",{className:"prompt-input",children:[n&&re.jsx("div",{className:"current-prompt",children:re.jsxs("p",{children:["Previous prompt: ",re.jsx("strong",{children:n})]})}),re.jsxs("form",{onSubmit:c,children:[re.jsxs("div",{className:"form-group",children:[re.jsx("label",{htmlFor:"prompt",children:"Write a prompt for the next player:"}),re.jsx("input",{id:"prompt",type:"text",value:l,onChange:u=>d(u.target.value),placeholder:"Enter your prompt...",maxLength:100,required:!0,disabled:s})]}),re.jsx("button",{type:"submit",className:"btn btn-primary",disabled:s||!l.trim(),onMouseEnter:()=>Vt.playHover(),children:"Submit Prompt"})]})]})}function ew({gameId:o,playerId:n,onStatusChange:s}){const{game:l}=eh(o),[d,c]=ye.useState([]),[u,p]=ye.useState([]),[g,v]=ye.useState(null),[k,T]=ye.useState(null),[E,S]=ye.useState(null),[C,b]=ye.useState(null),[N,L]=ye.useState(60),[x,_]=ye.useState({submitted:0,total:0}),R=ye.useRef(null),I=ye.useRef(!1),U=ye.useRef(null),W=ye.useRef(null);ye.useEffect(()=>{if(!l)return;const B=l.current_round||1;if(U.current&&U.current.round_number===B){console.log("Already have prompt for this round, skipping initialization");return}R.current!==B&&(console.log("Round changed:",R.current,"->",B),R.current=B,I.current=!1,U.current&&U.current.round_number!==B&&(b(null),U.current=null),(!U.current||U.current.round_number!==B)&&L(60)),Re.from("players").select("*").eq("game_id",o).order("turn_order",{ascending:!0}).then(({data:$,error:J})=>{if(!J&&$){p($);const Y=$.find(oe=>oe.id===n);Y&&T(Y)}});const K=(l.current_round||1)-1;K>0?Re.from("players").select("*").eq("game_id",o).order("turn_order",{ascending:!0}).then(({data:$,error:J})=>{if(!J&&$&&$.find(oe=>oe.id===n)){const oe=$.findIndex(V=>V.id===n),A=oe===0?$.length-1:oe-1,D=$[A];D&&(S(D),Re.from("rounds").select("*").eq("game_id",o).eq("round_number",K).order("started_at",{ascending:!1}).limit(1).maybeSingle().then(({data:V,error:q})=>{!q&&V?G(V.id,D.id):q&&console.error("Error fetching previous round:",q)}))}}):(S(null),c([])),Re.from("rounds").select("*").eq("game_id",o).eq("round_number",B).order("started_at",{ascending:!1}).limit(1).maybeSingle().then(({data:$,error:J})=>{!J&&$?v($):J?console.error("Error fetching current round:",J):$||console.log("No round found for round_number:",B)}),!I.current&&!(U.current&&U.current.round_number===B)&&(I.current=!0,Re.from("prompts").select("*").eq("game_id",o).eq("round_number",l.current_round||1).eq("player_id",n).single().then(({data:$,error:J})=>{if(U.current&&U.current.round_number===B){console.log("Skipping prompt fetch - already have prompt in state");return}!J&&$?(console.log("Found existing prompt for round",l.current_round,":",$),b($),U.current=$,L(0)):console.log("No existing prompt for round",l.current_round,", timer should already be set")}))},[o,l,n]);const j=ye.useCallback(async()=>{if(!l)return;console.log("checkAndTransitionToDrawing called for round",l.current_round);const{data:B,error:K}=await Re.from("players").select("id").eq("game_id",o);if(K){console.error("Error fetching players:",K);return}const $=B?.length||0;if($===0){console.log("No players found");return}const{data:J,error:Y}=await Re.from("prompts").select("player_id").eq("game_id",o).eq("round_number",l.current_round||1);if(Y){console.error("Error checking prompts:",Y);return}const oe=J?.length||0;if(_({submitted:oe,total:$}),console.log(`Prompts submitted: ${oe}/${$} for round ${l.current_round}`),oe>=$){console.log("All prompts submitted, checking game status...");const{data:A,error:D}=await Re.from("games").select("status").eq("id",o).single();if(!D&&A&&A.status==="prompt"){const{error:V}=await Re.from("games").update({status:"drawing"}).eq("id",o).eq("status","prompt");V?console.error("Error updating game status:",V):(console.log("Successfully updated game status to drawing, transitioning..."),s("drawing"))}else console.log("Game status is not prompt, cannot transition. Current status:",A?.status)}},[l,o,s]);ye.useEffect(()=>{if(!l||l.status!=="prompt")return;const B=l.current_round||1;if(B<1)return;console.log("[PromptScreen] Starting polling for prompt completion (always active)...");const K=setInterval(async()=>{try{const{data:$,error:J}=await Re.from("players").select("id").eq("game_id",o);if(J){console.error("[PromptScreen] Error fetching players during poll:",J);return}const Y=$?.length||0;if(Y===0)return;const{data:oe,error:A}=await Re.from("prompts").select("player_id").eq("game_id",o).eq("round_number",B);if(A){console.error("[PromptScreen] Error checking prompts during poll:",A);return}const D=oe?.length||0,q=new Set(oe?.map(M=>M.player_id)||[]).size;_({submitted:q,total:Y}),console.log(`[PromptScreen Poll] Prompts submitted: ${q}/${Y} (raw count: ${D}) for round ${B}`),q>=Y&&(console.log("[PromptScreen Poll] All prompts submitted, calling checkAndTransitionToDrawing"),await j())}catch($){console.error("[PromptScreen] Error in polling for prompt completion:",$)}},1e3);return j(),()=>{console.log("[PromptScreen] Stopping polling for prompts"),clearInterval(K)}},[l,o,j]),ye.useEffect(()=>{if(!l||!o||!n)return;const B=l.current_round||1;B<1||Re.from("prompts").select("*").eq("game_id",o).eq("round_number",B).eq("player_id",n).maybeSingle().then(({data:K,error:$})=>{if(!$&&K){console.log("[PromptScreen] Player has already submitted prompt for this round");const J={id:K.id||"",game_id:o,round_number:B,player_id:n,prompt:K.prompt,created_at:K.created_at||new Date().toISOString(),updated_at:K.updated_at||new Date().toISOString()};b(J),U.current=J,L(0),j()}else $&&$.code!=="PGRST116"&&console.error("[PromptScreen] Error checking prompt status:",$)})},[l,o,n,j]),ye.useEffect(()=>{if(!l||!o)return;let B=null,K=null;W.current===null&&l?.status&&(W.current=l.status),K=setInterval(async()=>{try{const{data:$,error:J}=await Re.from("games").select("status").eq("id",o).single();if(!J&&$){const Y=$.status;W.current==="prompt"&&Y==="drawing"&&(console.log("Game status changed via polling: prompt -> drawing"),s("drawing")),W.current=Y}}catch($){console.error("Error polling game status:",$)}},1e3);try{B=Re.channel(`game-status-prompt:${o}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"games",filter:`id=eq.${o}`},$=>{const J=$.new,Y=W.current;W.current=J.status,Y==="prompt"&&J.status==="drawing"&&(console.log("Game status changed via realtime: prompt -> drawing"),s("drawing"))}).subscribe($=>{$==="SUBSCRIBED"&&console.log("PromptScreen: Successfully subscribed to game status updates - realtime active")})}catch($){console.warn("PromptScreen: Realtime not available, using polling only:",$)}return()=>{K&&clearInterval(K),B&&Re.removeChannel(B)}},[o,l,s]);const F=ye.useCallback(async B=>{if(!l||!k){console.log("Cannot submit: missing game or currentPlayer");return}if(C){console.log("Already submitted, ignoring duplicate submission");return}const K={id:"temp",game_id:o,round_number:l.current_round||1,player_id:n,prompt:B,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};b(K),U.current=K,console.log("Submitting prompt:",B);const{error:$}=await Re.from("prompts").upsert({game_id:o,round_number:l.current_round||1,player_id:n,prompt:B,updated_at:new Date().toISOString()},{onConflict:"game_id,round_number,player_id"});if($){console.error("Error saving prompt:",$),b(null);return}const{error:J}=await Re.from("player_submissions").upsert({game_id:o,round_number:l.current_round||1,player_id:n,phase:"prompt"},{onConflict:"game_id,round_number,player_id,phase"});if(J){console.error("Error saving submission:",J),alert(`Error saving submission: ${J.message}`),b(null),U.current=null;return}console.log("Successfully saved prompt submission for player:",n);const Y={id:"",game_id:o,round_number:l.current_round||1,player_id:n,prompt:B,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Setting currentPrompt to:",Y),b(Y),U.current=Y,L(0),await j()},[l,k,C,o,n,j]);ye.useEffect(()=>{if(!l||l.status!=="prompt"||U.current)return;if(N<=0){F("");return}const B=setInterval(()=>{L(K=>K<=1?(F(""),0):K-1)},1e3);return()=>clearInterval(B)},[N,l,F]);const G=async(B,K)=>{try{const{data:$,error:J}=await Re.from("frames").select("*").eq("round_id",B).eq("player_id",K).order("frame_number",{ascending:!0}).order("created_at",{ascending:!1});if(J)throw J;const Y={};($||[]).forEach(oe=>{const A=Y[oe.frame_number];(!A||new Date(oe.created_at)>new Date(A.created_at))&&(Y[oe.frame_number]=oe)}),c(Object.values(Y).sort((oe,A)=>oe.frame_number-A.frame_number))}catch($){console.error("Error loading frames:",$)}};return re.jsxs("div",{className:"prompt-screen",children:[re.jsxs("div",{className:"prompt-header",children:[re.jsx("h2",{children:"Write a Prompt"}),re.jsx("p",{children:l?.current_round===1?"Write an initial prompt for the first drawing":"Watch the previous animation and write a prompt for the next player"}),!C&&re.jsxs("div",{className:"prompt-timer",children:["Time: ",Math.floor(N/60),":",(N%60).toString().padStart(2,"0")]})]}),re.jsxs("div",{className:"prompt-content",children:[E&&d.length>0&&re.jsxs("div",{className:"previous-animation",children:[re.jsxs("h3",{children:[E.nickname,"'s Animation"]}),re.jsx(Lm,{frames:d,playerName:E.nickname})]}),C?re.jsxs("div",{className:"prompt-submitted",children:[re.jsx("p",{className:"submission-status",children:"Your prompt has been submitted!"}),re.jsxs("p",{className:"prompt-submitted-text",children:['"',C.prompt||"(empty prompt)",'"']}),re.jsxs("p",{className:"waiting-message",children:["Waiting for other players to submit their prompts... (",x.submitted,"/",x.total,")"]})]}):re.jsx(Z_,{onPromptSubmit:F,currentPrompt:"",isSubmitted:!!C})]})]})}function tw({gridSize:o=50}){return ye.useEffect(()=>{const n=s=>{const l=Math.floor(s.clientX/o)*o,d=Math.floor(s.clientY/o)*o;document.documentElement.style.setProperty("--mouse-x",`${l}px`),document.documentElement.style.setProperty("--mouse-y",`${d}px`),document.documentElement.style.setProperty("--grid-size",`${o}px`)};return window.addEventListener("mousemove",n),()=>window.removeEventListener("mousemove",n)},[o]),re.jsx("div",{className:"shimmer-grid"})}function nw(){const[o,n]=ye.useState(null),[s,l]=ye.useState(null),[d,c]=ye.useState("lobby");ye.useEffect(()=>{new URLSearchParams(window.location.search).get("room")},[]);const u=(g,v)=>{n(g),l(v),c("lobby")},p=g=>{g==="drawing"?c("drawing"):g==="viewing"?c("animation"):g==="prompt"?c("prompt"):g==="complete"&&c("animation")};return re.jsxs("div",{className:"app",children:[re.jsx(tw,{}),re.jsxs("div",{className:"app-content",children:[d==="lobby"&&re.jsx($y,{gameId:o,playerId:s,onGameJoined:u,onGameStatusChange:p}),d==="drawing"&&o&&s&&re.jsx(Y_,{gameId:o,playerId:s,onStatusChange:p}),d==="animation"&&o&&s&&re.jsx(J_,{gameId:o,playerId:s,onStatusChange:p}),d==="prompt"&&o&&s&&re.jsx(ew,{gameId:o,playerId:s,onStatusChange:p})]})]})}const jm=document.getElementById("root");if(!jm)throw new Error("Root element not found");h1.createRoot(jm).render(re.jsx(ye.StrictMode,{children:re.jsx(nw,{})}));export{Qd as g};
